<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>1.基础篇_基础API_预编译 | yuezi</title><meta name="author" content="yuezi"><meta name="copyright" content="yuezi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JDBC基础篇一、为什么要JDBC我们持久化数据一般有两种方式  I&#x2F;O流技术，存储在本地磁盘中，但没有结构和逻辑，不方便管理和维护  –&gt; 有一个易于管理的技术就好了 关系型数据库，交由DBMS维护，通过database、table分隔不同的数据，使用表的行列存储，区分出不同格式的数据  给出需求：  程序运行时，我们需要crud数据库中的数据，如何使用Java程序进行修改？可以用JDBC">
<meta property="og:type" content="article">
<meta property="og:title" content="1.基础篇_基础API_预编译">
<meta property="og:url" content="https://yuezi2048.github.io/2024/08/20/2.Areas%F0%9F%8C%90/back-end-java/3.JDBC/1.%E5%9F%BA%E7%A1%80%E7%AF%87_%E5%9F%BA%E7%A1%80API_%E9%A2%84%E7%BC%96%E8%AF%91/index.html">
<meta property="og:site_name" content="yuezi">
<meta property="og:description" content="JDBC基础篇一、为什么要JDBC我们持久化数据一般有两种方式  I&#x2F;O流技术，存储在本地磁盘中，但没有结构和逻辑，不方便管理和维护  –&gt; 有一个易于管理的技术就好了 关系型数据库，交由DBMS维护，通过database、table分隔不同的数据，使用表的行列存储，区分出不同格式的数据  给出需求：  程序运行时，我们需要crud数据库中的数据，如何使用Java程序进行修改？可以用JDBC">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yuezi2048.github.io/img/touxiang.jpg">
<meta property="article:published_time" content="2024-08-20T06:26:08.000Z">
<meta property="article:modified_time" content="2024-08-20T06:26:08.000Z">
<meta property="article:author" content="yuezi">
<meta property="article:tag" content="3.JDBC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yuezi2048.github.io/img/touxiang.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "1.基础篇_基础API_预编译",
  "url": "https://yuezi2048.github.io/2024/08/20/2.Areas%F0%9F%8C%90/back-end-java/3.JDBC/1.%E5%9F%BA%E7%A1%80%E7%AF%87_%E5%9F%BA%E7%A1%80API_%E9%A2%84%E7%BC%96%E8%AF%91/",
  "image": "https://yuezi2048.github.io/img/touxiang.jpg",
  "datePublished": "2024-08-20T06:26:08.000Z",
  "dateModified": "2024-08-20T06:26:08.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "yuezi",
      "url": "https://yuezi2048.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yuezi2048.github.io/2024/08/20/2.Areas%F0%9F%8C%90/back-end-java/3.JDBC/1.%E5%9F%BA%E7%A1%80%E7%AF%87_%E5%9F%BA%E7%A1%80API_%E9%A2%84%E7%BC%96%E8%AF%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bfb48b678d82bea9f9cc9d59227767e4";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"FPH6F2TOJL","apiKey":"06d9ea26c803ba912b4d8e13404ed34d","indexName":"blog","hitsPerPage":6,"languages":{"input_placeholder":"搜索","hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，耗时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":350,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '1.基础篇_基础API_预编译',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/backgound.css"><meta name="generator" content="Hexo 8.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">603</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">85</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/default.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">yuezi</span></a><a class="nav-page-title" href="/"><span class="site-name">1.基础篇_基础API_预编译</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">1.基础篇_基础API_预编译</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-20T06:26:08.000Z" title="发表于 2024-08-20 14:26:08">2024-08-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-20T06:26:08.000Z" title="更新于 2024-08-20 14:26:08">2024-08-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/">2.Areas🌐</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/">back-end-java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/3-JDBC/">3.JDBC</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="JDBC基础篇"><a href="#JDBC基础篇" class="headerlink" title="JDBC基础篇"></a>JDBC基础篇</h1><h2 id="一、为什么要JDBC"><a href="#一、为什么要JDBC" class="headerlink" title="一、为什么要JDBC"></a>一、为什么要JDBC</h2><p>我们持久化数据一般有两种方式</p>
<ul>
<li><code>I/O流</code>技术，存储在本地磁盘中，但没有结构和逻辑，不方便管理和维护  –&gt; 有一个易于管理的技术就好了</li>
<li><code>关系型数据库</code>，交由DBMS维护，通过database、table分隔不同的数据，使用表的行列存储，区分出不同格式的数据</li>
</ul>
<p>给出需求：</p>
<ul>
<li>程序运行时，我们需要crud数据库中的数据，如何使用Java程序进行修改？可以用JDBC的技术</li>
</ul>
<img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240817163411866.png" alt="image-20240817163411866" style="zoom: 80%;" />	



<h2 id="二、JDBC概述"><a href="#二、JDBC概述" class="headerlink" title="二、JDBC概述"></a>二、JDBC概述</h2><ul>
<li><code>JDBC（Java Database Connectivity）</code>，即Java数据库连接</li>
<li>JDBC提供独立于所有DBMS的API接口<ul>
<li>Java接口定义了规范，交由各厂商实现。厂商将实现类封装为 数据库驱动<code>jar包</code></li>
</ul>
</li>
<li>我们实际调用时无需过多关心实现过程，只用关心标准和规范，体会<code>接口编程</code>的实际作用</li>
</ul>
<img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240817163744610.png" alt="image-20240817163744610" style="zoom:80%;" />	





<h2 id="三、JDBC快速入门"><a href="#三、JDBC快速入门" class="headerlink" title="三、JDBC快速入门"></a>三、JDBC快速入门</h2><h3 id="3-1-环境搭建"><a href="#3-1-环境搭建" class="headerlink" title="3.1 环境搭建"></a>3.1 环境搭建</h3><p>搭建环境</p>
<ol>
<li>准备数据库。</li>
<li>官网下载数据库连接驱动jar包。<a href="">https://downloads.mysql.com/archives/c-j/</a></li>
<li>创建Java项目（这里没有用Maven 使用IntelliJ构建环境），在项目下创建lib文件夹，将下载的驱动jar包复制到文件夹里。</li>
</ol>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240817170916040.png" alt="image-20240817170916040">	</p>
<ol>
<li>选中lib文件夹右键-&gt;Add as Library，与项目集成。</li>
<li>编写代码</li>
</ol>
<p>数据库搭建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE atguigu;</span><br><span class="line"></span><br><span class="line">use atguigu;</span><br><span class="line"></span><br><span class="line">create table t_emp</span><br><span class="line">(</span><br><span class="line">    emp_id     int auto_increment comment &#x27;员工编号&#x27; primary key,</span><br><span class="line">    emp_name   varchar(100)  not null comment &#x27;员工姓名&#x27;,</span><br><span class="line">    emp_salary double(10, 5) not null comment &#x27;员工薪资&#x27;,</span><br><span class="line">    emp_age    int           not null comment &#x27;员工年龄&#x27;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into t_emp (emp_name,emp_salary,emp_age)</span><br><span class="line">values  (&#x27;andy&#x27;, 777.77, 32),</span><br><span class="line">        (&#x27;大风哥&#x27;, 666.66, 41),</span><br><span class="line">        (&#x27;康师傅&#x27;,111, 23),</span><br><span class="line">        (&#x27;Gavin&#x27;,123, 26),</span><br><span class="line">        (&#x27;小鱼儿&#x27;, 123, 28);</span><br></pre></td></tr></table></figure>





<h3 id="3-2-JDBC实现V1-0"><a href="#3-2-JDBC实现V1-0" class="headerlink" title="3.2 JDBC实现V1.0"></a>3.2 JDBC实现V1.0</h3><ul>
<li><code>注册驱动</code>Class.forName(fullPath)（jdk6后可省略）</li>
<li>传入url userName passWord必要信息，获取<code>连接对象Connection</code></li>
<li>获取用于<code>执行SQL语句的对象Statement</code></li>
<li>传入SQL语句，<code>执行executeQuery</code>，返回<code>结果集resultSet</code></li>
<li><code>处理结果集</code><ul>
<li><code>next()</code>方法从列名开始判断，需要注意的是，即使是一行也要判断</li>
<li>getXXX()方法可以传入下标，从1开始计数</li>
</ul>
</li>
<li>连接对象、执行对象、结果集对象的<code>资源释放</code>（原则：后来的先放）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.atguigu.base;</span><br><span class="line"></span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.DriverManager;</span><br><span class="line">import java.sql.ResultSet;</span><br><span class="line">import java.sql.Statement;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author yuezi2048</span><br><span class="line"> * @version 1.0</span><br><span class="line"> */</span><br><span class="line">public class JDBCQuick &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        // 1. 注册驱动</span><br><span class="line">        /*</span><br><span class="line">            public class Driver extends NonRegisteringDriver implements java.sql.Driver &#123;</span><br><span class="line">                public Driver() throws SQLException &#123;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                static &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        DriverManager.registerDriver(new Driver());</span><br><span class="line">                    &#125; catch (SQLException var1) &#123;</span><br><span class="line">                        throw new RuntimeException(&quot;Can&#x27;t register driver!&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">         */</span><br><span class="line">        // Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        // DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());</span><br><span class="line">        /*</span><br><span class="line">            jdk6后，导入jdbc的jar包后，会自动注册驱动(原理：java会检测接口的实现是否在项目中存在)</span><br><span class="line">            在META-INF的service文件夹下写了 com.mysql.cj.jdbc.Driver接口实现类的全路径</span><br><span class="line">         */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 2. 获取连接对象</span><br><span class="line">        // 如果固定的本机3306 可以简写为jdbc:mysql:///atguigu</span><br><span class="line">        String url = &quot;jdbc:mysql://localhost:3306/atguigu&quot;;</span><br><span class="line">        String userName = &quot;root&quot;;</span><br><span class="line">        String password = &quot;root&quot;;</span><br><span class="line">        Connection connection = DriverManager.getConnection(url, userName, password);</span><br><span class="line"></span><br><span class="line">        // 3. 获取执行SQL语句的对象（实际上负责发送SQL语句 交由DB执行）</span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line"></span><br><span class="line">        // 4. 编写SQL语句，执行，并接收返回的结果集</span><br><span class="line">        String sql = &quot;SELECT emp_id, emp_name, emp_salary, emp_age FROM t_emp where emp_name = &#x27;康师傅&#x27;&quot;;</span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">        // 5. 处理结果，遍历resultSet结果集，借助while(next)方法判断</span><br><span class="line">        System.out.println(&quot;empId&quot; + &quot;\t&quot; + &quot;empName&quot; + &quot;\t&quot; + &quot;empSalary&quot; + &quot;\t&quot; + &quot;empAge&quot;);</span><br><span class="line">        while(resultSet.next()) &#123;</span><br><span class="line">            // 该方法已重载，可以传入列名称，也可以传入下标值，推荐列名</span><br><span class="line">            int empId = resultSet.getInt(&quot;emp_id&quot;);</span><br><span class="line">            String empName = resultSet.getString(&quot;emp_name&quot;);</span><br><span class="line">            double empSalary = resultSet.getDouble(&quot;emp_salary&quot;);</span><br><span class="line">            int empAge = resultSet.getInt(&quot;emp_age&quot;);</span><br><span class="line">            System.out.println(empId + &quot;\t\t&quot; + empName + &quot;\t\t&quot; + empSalary + &quot;\t\t&quot; + empAge);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 6. 资源释放 (连接对象、执行对象、结果集对象)</span><br><span class="line">        // 释放原则：先开后关</span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="四、核心API说明"><a href="#四、核心API说明" class="headerlink" title="四、核心API说明"></a>四、核心API说明</h2><h3 id="4-1-注册驱动"><a href="#4-1-注册驱动" class="headerlink" title="4.1 注册驱动"></a>4.1 注册驱动</h3><ul>
<li><p>JDBC连接数据库时，首先要加载对应包的驱动，从而注册驱动程序，进而JDBC的API能正常识别运行，能与特定的数据库交互</p>
</li>
<li><p>JDK6以后，类路径只要集成jar包，可以自动初始化，无需显式调用<code>Class.forName()</code></p>
</li>
</ul>
<h3 id="4-2-Connection"><a href="#4-2-Connection" class="headerlink" title="4.2 Connection"></a>4.2 Connection</h3><ul>
<li><p><code>Connection</code>是JDBC API的一个重要<code>接口</code>，建立Java和数据库的通信通道。只要Connection不为空，就代表一次连接</p>
</li>
<li><p>建立连接，要指定URL、userName、passWord参数，参考格式：</p>
<ul>
<li>jdbc:mysql:&#x2F;&#x2F;IP地址:端口号&#x2F;数据库名称?参数键值对1&amp;参数键值对2</li>
<li>本机默认端口可省略IP地址和端口号</li>
</ul>
</li>
<li><p><code>Connection</code>接口建立连接后，有如下作用</p>
<ul>
<li><p>提供事务的<code>COMMIT</code>和<code>ROLLBACK</code>方法，用于提交和回滚事务</p>
</li>
<li><p>创建<code>Statement</code>对象，用于执行SQL与数据库交互</p>
</li>
</ul>
</li>
<li><p>使用Connection对象完毕，要释放资源，避免资源浪费和内存泄漏</p>
</li>
</ul>
<h3 id="4-3-Statement"><a href="#4-3-Statement" class="headerlink" title="4.3 Statement"></a>4.3 Statement</h3><ul>
<li><code>Statement</code>是JDBC API的重要<code>接口</code>，用于执行SQL语句与数据库交互，并获取执行结果，结果包括：<ul>
<li>增删改：受影响行数的单行单列结果</li>
<li>查询：单行单列、单行多列、多行多列的结果</li>
</ul>
</li>
<li><code>Statement</code>执行SQL，存在<code>SQL注入攻击的安全问题</code><ul>
<li>当需要构建动态SQL时，需要拼接SQL语句，攻击者可以借助查询条件，让where条件始终为true等方式查询到本不应该返回的结果</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.atguigu.base;</span><br><span class="line"></span><br><span class="line">import java.sql.*;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author yuezi2048</span><br><span class="line"> * @version 1.0</span><br><span class="line"> */</span><br><span class="line">public class JDBCInjection &#123;</span><br><span class="line">    public static void main(String[] args) throws SQLException &#123;</span><br><span class="line">        // 注册驱动 省略</span><br><span class="line">        Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/atguigu&quot;, &quot;root&quot;, &quot;root&quot;);</span><br><span class="line"></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line">        System.out.print(&quot;请输入员工姓名：&quot;);</span><br><span class="line">        Scanner scanner = new Scanner(System.in);</span><br><span class="line">        String name = scanner.nextLine(); // 1&#x27; or &#x27;1&#x27; = &#x27;1</span><br><span class="line">        String sql = &quot;SELECT emp_id, emp_name, emp_salary, emp_age FROM t_emp where emp_name = &#x27;&quot; + name + &quot;&#x27;&quot;;</span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">        while (resultSet.next()) &#123;</span><br><span class="line">            int empId = resultSet.getInt(&quot;emp_id&quot;);</span><br><span class="line">            String empName = resultSet.getString(&quot;emp_name&quot;);</span><br><span class="line">            double empSalary = resultSet.getDouble(&quot;emp_salary&quot;);</span><br><span class="line">            int empAge = resultSet.getInt(&quot;emp_age&quot;);</span><br><span class="line">            System.out.println(empId + &quot;\t\t&quot; + empName + &quot;\t\t&quot; + empSalary + &quot;\t\t&quot; + empAge);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="4-4-PreparedStatement"><a href="#4-4-PreparedStatement" class="headerlink" title="4.4 PreparedStatement"></a>4.4 PreparedStatement</h3><ul>
<li><p>为了解决上述问题，提出<code>Statement</code>的子接口<code>PreparedStatement</code>，实现了：</p>
<ul>
<li><code>预编译SQL语句</code>，使得SQL语句固定</li>
<li>防止SQL注入问题，PreparedStatement提供参数化查询，使用<code>?占位符</code>，将数据作为参数传递到SQL语句中<ul>
<li>对于传入的关键字进行转义，并对传入的参数使用单引号包裹</li>
</ul>
</li>
<li>性能提升，预编译SQL语句可以让同一个SQL语句在执行多次的情况下复用，无需重复编译和解析</li>
</ul>
</li>
<li><p>后续的学习我们都是基于PreparedStatement进行实现，更安全、效率更高！</p>
</li>
</ul>
<h4 id="解决SQL注入的问题"><a href="#解决SQL注入的问题" class="headerlink" title="解决SQL注入的问题"></a>解决SQL注入的问题</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.atguigu.base;</span><br><span class="line"></span><br><span class="line">import java.sql.*;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author yuezi2048</span><br><span class="line"> * @version 1.0</span><br><span class="line"> */</span><br><span class="line">public class JDBCPrepared &#123;</span><br><span class="line">    public static void main(String[] args) throws SQLException &#123;</span><br><span class="line">        // 1. 注册驱动 省略</span><br><span class="line">        // 2. 获取连接对象</span><br><span class="line">        Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/atguigu&quot;, &quot;root&quot;, &quot;root&quot;);</span><br><span class="line"></span><br><span class="line">        // 3. 获取执行SQL语句对象</span><br><span class="line">        String sql = &quot;SELECT emp_id, emp_name, emp_salary, emp_age FROM t_emp where emp_name = ?&quot;;</span><br><span class="line">        // 必须传入SQL语句等参数，且传入的值用? 代替，防止SQL注入的问题（原理：如果有关键符号会转义当成普通字符，再在外面加上&#x27;&#x27;）</span><br><span class="line">        // 此时已经完成了预编译SQL语句</span><br><span class="line">        PreparedStatement preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">        System.out.print(&quot;请输入员工姓名：&quot;);</span><br><span class="line">        Scanner scanner = new Scanner(System.in);</span><br><span class="line">        String name = scanner.nextLine();</span><br><span class="line"></span><br><span class="line">        // 4. 为？占位符赋值，并执行SQL语句，接收返回的结果</span><br><span class="line">        // preparedStatement是Statement的子接口，因此也会继承父类的方法</span><br><span class="line">        preparedStatement.setString(1, name); // 这里下标从1开始</span><br><span class="line">        ResultSet resultSet = preparedStatement.executeQuery();</span><br><span class="line"></span><br><span class="line">        // 5. 处理结果</span><br><span class="line">        while (resultSet.next()) &#123;</span><br><span class="line">            int empId = resultSet.getInt(&quot;emp_id&quot;);</span><br><span class="line">            String empName = resultSet.getString(&quot;emp_name&quot;);</span><br><span class="line">            double empSalary = resultSet.getDouble(&quot;emp_salary&quot;);</span><br><span class="line">            int empAge = resultSet.getInt(&quot;emp_age&quot;);</span><br><span class="line">            System.out.println(empId + &quot;\t\t&quot; + empName + &quot;\t\t&quot; + empSalary + &quot;\t\t&quot; + empAge);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // 6. 关闭连接对象</span><br><span class="line">        resultSet.close();</span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-5-ResultSet"><a href="#4-5-ResultSet" class="headerlink" title="4.5 ResultSet"></a>4.5 ResultSet</h3><ul>
<li><code>ResultSet</code>是JDBC API的接口，用以表示<code>查询语句返回的结果集</code>，并提供遍历访问的方式</li>
<li>使用<code>next()</code>方法将游标移动到下一行，逐行遍历，返回Boolean类型，表示下一行是否有结果</li>
<li>使用<code>getXxx</code>方法可以获取单列的数据，该方法已重载，支持索引或列名获取</li>
</ul>
<h2 id="五、预编译SQL实现CRUD"><a href="#五、预编译SQL实现CRUD" class="headerlink" title="五、预编译SQL实现CRUD"></a>五、预编译SQL实现CRUD</h2><h3 id="5-1-查询多行多列"><a href="#5-1-查询多行多列" class="headerlink" title="5.1 查询多行多列"></a>5.1 查询多行多列</h3><ul>
<li>使用<code>executeQuery()</code>查询</li>
<li>结果集通过while循环，使用<code>next</code>方法逐个判断下一行是否有记录</li>
<li><code>getXxx</code>除了下标，可以用查询到的<code>别名</code>来判断</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testQueryMulRow</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql:///atguigu&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(<span class="string">&quot;SELECT emp_id, emp_name, emp_salary, emp_age FROM t_emp WHERE emp_age &gt; ?&quot;</span>);</span><br><span class="line">    preparedStatement.setInt(<span class="number">1</span>, <span class="number">25</span>);</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> preparedStatement.executeQuery();</span><br><span class="line">    <span class="comment">// 注意即使只有单行，也要用next判断从列名开始判断是否存在下一行</span></span><br><span class="line">    <span class="comment">// 如果明确只有一行，至少也要用一次if判断，建议用while</span></span><br><span class="line">    <span class="comment">// 使用getInt时除了下标（从1开始），也可以使用别名</span></span><br><span class="line">    <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">empId</span> <span class="operator">=</span> resultSet.getInt(<span class="string">&quot;emp_id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">empName</span> <span class="operator">=</span> resultSet.getString(<span class="string">&quot;emp_name&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">empSalary</span> <span class="operator">=</span> resultSet.getDouble(<span class="string">&quot;emp_salary&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">empAge</span> <span class="operator">=</span> resultSet.getInt(<span class="string">&quot;emp_age&quot;</span>);</span><br><span class="line">        System.out.println(empId + <span class="string">&quot;\t&quot;</span> + empName + <span class="string">&quot;\t&quot;</span> + empSalary + <span class="string">&quot;\t&quot;</span> + empAge);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    resultSet.close();</span><br><span class="line">    preparedStatement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-2-新增-修改-删除"><a href="#5-2-新增-修改-删除" class="headerlink" title="5.2 新增 修改 删除"></a>5.2 新增 修改 删除</h3><ul>
<li>就是SQL语句不一样，占位符赋值大同小异，其他大差不差</li>
<li>使用<code>executeUpdate</code>执行</li>
<li><code>需要进行判断受影响行数是否大于0</code>，从而判断DML是否操作成功</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql:///atguigu&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_emp(emp_id, emp_name, emp_salary, emp_age) values(?, ?, ?, ?)&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">    preparedStatement.setInt(<span class="number">1</span>, <span class="number">6</span>);</span><br><span class="line">    preparedStatement.setString(<span class="number">2</span>, <span class="string">&quot;hsp&quot;</span>);</span><br><span class="line">    preparedStatement.setDouble(<span class="number">3</span>, <span class="number">10000</span>);</span><br><span class="line">    preparedStatement.setInt(<span class="number">4</span>, <span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> preparedStatement.executeUpdate();<span class="comment">// 增删改使用executeUpdate，返回受影响行数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据受影响行数判断</span></span><br><span class="line">    <span class="keyword">if</span> (res &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;success, affected rows: &quot;</span> + res);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    preparedStatement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql:///atguigu&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE t_emp SET emp_age = ? WHERE emp_id = ?&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">    preparedStatement.setInt(<span class="number">1</span>, <span class="number">38</span>);</span><br><span class="line">    preparedStatement.setInt(<span class="number">2</span>, <span class="number">6</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> preparedStatement.executeUpdate();</span><br><span class="line">    <span class="keyword">if</span> (res &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;success, affected rows: &quot;</span> + res);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    preparedStatement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/atguigu&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from t_emp where emp_id = ?&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">    preparedStatement.setInt(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> preparedStatement.executeUpdate();</span><br><span class="line">    <span class="keyword">if</span> (res &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;success affected rows: &quot;</span> + res);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;delete failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    preparedStatement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="六、常见问题"><a href="#六、常见问题" class="headerlink" title="六、常见问题"></a>六、常见问题</h2><ul>
<li>Connection、PreparedStatement、ResultSet等资源，使用完毕后，注意要<code>释放资源</code>，否则会浪费资源和造成内存泄漏</li>
<li>java.sql.SQLSyntaxErrorException：SQL语句错误异常，一般有几种可能：<ol>
<li>SQL语句有错误，检查SQL语句！建议SQL语句在SQL工具中测试后再复制到Java程序中！</li>
<li>连接数据库的URL中，数据库名称编写错误，也会报该异常！</li>
</ol>
</li>
<li>java.sql.SQLException：No value specified for parameter 1<ul>
<li>在使用预编译SQL语句时，如果有?占位符，要为每一个占位符赋值，否则报该错误！</li>
</ul>
</li>
<li>java.sql.SOLException: Access denied for user ‘root‘@’localhost’ (using password: YES)<ul>
<li>连接数据库时，如果用户名或密码输入错误，也会报SQLException，容易混淆！所以一定要看清楚异常后面的原因描述</li>
</ul>
</li>
<li>com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure<ul>
<li>在连接数据库的URL中，如果IP或端口写错了，会报该异常</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://yuezi2048.github.io">yuezi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://yuezi2048.github.io/2024/08/20/2.Areas%F0%9F%8C%90/back-end-java/3.JDBC/1.%E5%9F%BA%E7%A1%80%E7%AF%87_%E5%9F%BA%E7%A1%80API_%E9%A2%84%E7%BC%96%E8%AF%91/">https://yuezi2048.github.io/2024/08/20/2.Areas🌐/back-end-java/3.JDBC/1.基础篇_基础API_预编译/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://yuezi2048.github.io" target="_blank">yuezi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/3-JDBC/">3.JDBC</a></div><div class="post-share"><div class="social-share" data-image="/img/touxiang.jpg" data-sites="qq,wechat"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/08/17/2.Areas%F0%9F%8C%90/back-end-java/1.JavaSE/%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94%E9%9F%A9%E9%A1%BA%E5%B9%B3/15.%E6%B3%9B%E5%9E%8B/" title="15.泛型"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">15.泛型</div></div><div class="info-2"><div class="info-item-1">十五、泛型15.1 为什么要泛型 如果要在ArrayList中添加三个Dog对象，用传统的多态实现，会有两个问题 每次调用Dog对象方法都需要向下转型一次 如果不小心加入了Cat等其他对象，可能会出现异常    package com.hspedu.generic;import java.util.ArrayList;/** * @author yuezi2048 * @version 1.0 */public class Generic01 &#123;    /*    	大黄：10        中黄：5        小黄：1        Exception in thread &quot;main&quot; java.lang.ClassCastException: com.hspedu.generic.Cat cannot be cast to com.hspedu.generic.Dog            at com.hspedu.generic.Generic01.main(Generic01.java:22)    */   ...</div></div></div></a><a class="pagination-related" href="/2024/09/01/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/1.%20JavaWeb%E6%A6%82%E8%BF%B0/" title="1. JavaWeb概述"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">1. JavaWeb概述</div></div><div class="info-2"><div class="info-item-1">第一章 Web概述1.1 JavaWeb是什么 通过Java技术解决Web互联网领域的技术栈（使用JavaEE技术开发企业级互联网项目，项目规模和架构模式和JavaSE有很大区别） 客户-服务器模式 客户端：与用户交互，接收用户的输入，向服务器发送数据并返回服务器输出的数据 服务器：从硬件和软件两个方面描述(广义和狭义) 硬件上，是比普通计算机运行更快 负载更高 价格更贵，一般是网络中的大型客户机提供计算服务 软件上，是安装在计算机上的某个进程，根据不同的作用可以分为不同的服务器，如DNS redis ftp服务器等     应用 APP 微信小程序 PC端程序 PC浏览器 外设（小米音箱 电话手表 POS机等）    1.2 JavaWeb技术栈前端 HTML CSS JS ES6 Nodejs npm vite vue3 router pinia axios element-plus… 后端 HTTP xml Tomcat Servlet Request Response Cookie Session Filter Listener MySQL JDBC Druid...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/09/06/2.Areas%F0%9F%8C%90/back-end-java/3.JDBC/2.%E8%BF%9B%E9%98%B6%E7%AF%87_%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1_%E8%BF%9E%E6%8E%A5%E6%B1%A0/" title="2.进阶篇_面向对象_连接池"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-06</div><div class="info-item-2">2.进阶篇_面向对象_连接池</div></div><div class="info-2"><div class="info-item-1">进阶篇一、JDBC进阶1.1 ORM思想 ORM（Object Relational Mapping）思想即为对象到关系数据库的映射，面向对象与数据库表的概念对应起来了 问题：JDBC操作时，数据库的一行完整的数据，传到了Java却是一个个变量，不利于维护和管理 解决：一张表对应一个类，一行数据对应一个对象，一列对应对象的属性，即将数据存储在一个实体类里   现在我们使用JDBC实现手动ORM，后续有ORM框架，如MyBatis、JPA等  package com.atguigu.pojo;//类名和数据库名对应，但是表名一般缩写，类名要全写！public class Employee &#123;    private Integer empId;//emp_id = empId 数据库中列名用下划线分隔，属性名用驼峰！    private String empName;//emp_name = empName    private Double empSalary;//emp_salary = empSalary    private Integer...</div></div></div></a><a class="pagination-related" href="/2024/10/13/2.Areas%F0%9F%8C%90/back-end-java/3.JDBC/3.%E9%AB%98%E7%BA%A7%E7%AF%87_%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%B0%81%E8%A3%85_%E6%A0%87%E8%AF%86%E8%BF%9E%E6%8E%A5/" title="3.高级篇_工具类封装_标识连接"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-13</div><div class="info-item-2">3.高级篇_工具类封装_标识连接</div></div><div class="info-2"><div class="info-item-1">高级篇一、JDBC优化和工具类封装1.1 存在的问题我们发现，虽然连接池解决了用户频繁请求释放连接造成的资源浪费，但有这些问题：  用户连接一次就要写 创建连接池、建立连接、连接回收的代码，存在代码冗余的问题 —&gt; 工具类封装 用户频繁连接，会对应连接池不同的新连接，在使用事务时，用户无法保证事务的正常提交 -&gt; 怎么让用户线程在一段时间内标识唯一的连接？ –&gt; map  1.2...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">yuezi</div><div class="author-info-description">积微者速成</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">603</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">85</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yuezi2048"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://githubfast.com/yuezi2048" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_46345703" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="https://qm.qq.com/cgi-bin/qm/qr?k=dD62GIPTf5-iS4UdSfJRy7NHwsrCh3-j" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:joyLing@stumail.nwu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">积微者速成</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JDBC%E5%9F%BA%E7%A1%80%E7%AF%87"><span class="toc-text">JDBC基础篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81JDBC"><span class="toc-text">一、为什么要JDBC</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81JDBC%E6%A6%82%E8%BF%B0"><span class="toc-text">二、JDBC概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81JDBC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">三、JDBC快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">3.1 环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-JDBC%E5%AE%9E%E7%8E%B0V1-0"><span class="toc-text">3.2 JDBC实现V1.0</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%A0%B8%E5%BF%83API%E8%AF%B4%E6%98%8E"><span class="toc-text">四、核心API说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8"><span class="toc-text">4.1 注册驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Connection"><span class="toc-text">4.2 Connection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-Statement"><span class="toc-text">4.3 Statement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-PreparedStatement"><span class="toc-text">4.4 PreparedStatement</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">解决SQL注入的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-ResultSet"><span class="toc-text">4.5 ResultSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%A2%84%E7%BC%96%E8%AF%91SQL%E5%AE%9E%E7%8E%B0CRUD"><span class="toc-text">五、预编译SQL实现CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E6%9F%A5%E8%AF%A2%E5%A4%9A%E8%A1%8C%E5%A4%9A%E5%88%97"><span class="toc-text">5.1 查询多行多列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%96%B0%E5%A2%9E-%E4%BF%AE%E6%94%B9-%E5%88%A0%E9%99%A4"><span class="toc-text">5.2 新增 修改 删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-text">六、常见问题</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/Excalidraw/Drawing%202024-11-01%2015.37.37.excalidraw/" title="Drawing 2024-11-01 15.37.37.excalidraw">Drawing 2024-11-01 15.37.37.excalidraw</a><time datetime="2025-10-31T04:19:26.621Z" title="发表于 2025-10-31 12:19:26">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/01.project/condefather/yupao/back-end/7.%E4%BC%98%E5%8C%96%E4%B8%BB%E9%A1%B5%E6%80%A7%E8%83%BD-%E4%BC%98%E5%8C%96%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/" title="7.优化主页性能-优化批量导入数据">7.优化主页性能-优化批量导入数据</a><time datetime="2025-10-31T04:19:26.102Z" title="发表于 2025-10-31 12:19:26">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/MySQL/81.%E4%BB%80%E4%B9%88%E6%98%AF%E6%B8%B8%E6%A0%87Cursor%E5%88%86%E9%A1%B5_%E5%AF%B9%E6%AF%94%E4%BC%A0%E7%BB%9FLIMIT_OFFSET%E5%88%86%E9%A1%B5%E7%9A%84%E4%BC%98%E5%8A%BF%E6%98%AF%E4%BB%80%E4%B9%88/" title="81.什么是游标Cursor分页_对比传统LIMIT_OFFSET分页的优势是什么">81.什么是游标Cursor分页_对比传统LIMIT_OFFSET分页的优势是什么</a><time datetime="2025-10-31T04:14:27.000Z" title="发表于 2025-10-31 12:14:27">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/MySQL/80.%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5%E5%92%8C%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5%E5%90%84%E8%87%AA%E4%BC%98%E7%BC%BA%E7%82%B9/" title="80.全量同步和增量同步各自优缺点">80.全量同步和增量同步各自优缺点</a><time datetime="2025-10-31T04:13:32.000Z" title="发表于 2025-10-31 12:13:32">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/MySQL/79.%E4%BB%80%E4%B9%88%E6%98%AF%E6%89%B9%E9%87%8F%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93_%E7%9B%B8%E6%AF%94%E5%8D%95%E6%9D%A1%E6%8F%92%E5%85%A5%E4%BC%98%E5%8A%BF/" title="79.什么是批量数据入库_相比单条插入优势">79.什么是批量数据入库_相比单条插入优势</a><time datetime="2025-10-31T04:03:26.000Z" title="发表于 2025-10-31 12:03:26">2025-10-31</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/default.png);"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By yuezi</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>