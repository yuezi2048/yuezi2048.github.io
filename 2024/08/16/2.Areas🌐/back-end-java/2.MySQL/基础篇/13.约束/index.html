<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>13.约束 | yuezi</title><meta name="author" content="yuezi"><meta name="copyright" content="yuezi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="十三、约束1. 约束(CONSTRAINT)概述1.1 为什么要约束为什么要约束–&gt; 保证数据完整性 为了防止数据库不存在不符合语义的数据，并且防止因错误信息的输入输出造成无效操作&#x2F;错误信息，引出数据完整性的概念 数据完整性（Data Integrity）：数据的精确性（Accuracy）和可靠性（Reliability） 为了保证数据的完整性，SQL规范以约束的方式对表数据进行额">
<meta property="og:type" content="article">
<meta property="og:title" content="13.约束">
<meta property="og:url" content="https://yuezi2048.github.io/2024/08/16/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/13.%E7%BA%A6%E6%9D%9F/index.html">
<meta property="og:site_name" content="yuezi">
<meta property="og:description" content="十三、约束1. 约束(CONSTRAINT)概述1.1 为什么要约束为什么要约束–&gt; 保证数据完整性 为了防止数据库不存在不符合语义的数据，并且防止因错误信息的输入输出造成无效操作&#x2F;错误信息，引出数据完整性的概念 数据完整性（Data Integrity）：数据的精确性（Accuracy）和可靠性（Reliability） 为了保证数据的完整性，SQL规范以约束的方式对表数据进行额">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yuezi2048.github.io/img/touxiang.jpg">
<meta property="article:published_time" content="2024-08-16T04:15:06.000Z">
<meta property="article:modified_time" content="2024-08-16T04:15:06.000Z">
<meta property="article:author" content="yuezi">
<meta property="article:tag" content="基础篇">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yuezi2048.github.io/img/touxiang.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "13.约束",
  "url": "https://yuezi2048.github.io/2024/08/16/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/13.%E7%BA%A6%E6%9D%9F/",
  "image": "https://yuezi2048.github.io/img/touxiang.jpg",
  "datePublished": "2024-08-16T04:15:06.000Z",
  "dateModified": "2024-08-16T04:15:06.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "yuezi",
      "url": "https://yuezi2048.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yuezi2048.github.io/2024/08/16/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/13.%E7%BA%A6%E6%9D%9F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bfb48b678d82bea9f9cc9d59227767e4";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"FPH6F2TOJL","apiKey":"06d9ea26c803ba912b4d8e13404ed34d","indexName":"blog","hitsPerPage":6,"languages":{"input_placeholder":"搜索","hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，耗时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":350,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '13.约束',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/backgound.css"><meta name="generator" content="Hexo 8.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">603</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">85</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/default.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">yuezi</span></a><a class="nav-page-title" href="/"><span class="site-name">13.约束</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">13.约束</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-16T04:15:06.000Z" title="发表于 2024-08-16 12:15:06">2024-08-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-16T04:15:06.000Z" title="更新于 2024-08-16 12:15:06">2024-08-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/">2.Areas🌐</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/">back-end-java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/2-MySQL/">2.MySQL</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/2-MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/">基础篇</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">6.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>24分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="十三、约束"><a href="#十三、约束" class="headerlink" title="十三、约束"></a>十三、约束</h1><h2 id="1-约束-CONSTRAINT-概述"><a href="#1-约束-CONSTRAINT-概述" class="headerlink" title="1. 约束(CONSTRAINT)概述"></a>1. 约束(CONSTRAINT)概述</h2><h3 id="1-1-为什么要约束"><a href="#1-1-为什么要约束" class="headerlink" title="1.1 为什么要约束"></a>1.1 为什么要约束</h3><p>为什么要约束–&gt; 保证数据完整性</p>
<p>为了防止数据库不存在不符合语义的数据，并且防止因错误信息的输入输出造成无效操作&#x2F;错误信息，引出<code>数据完整性</code>的概念</p>
<p><code>数据完整性</code>（Data Integrity）：数据的精确性（Accuracy）和可靠性（Reliability）</p>
<p>为了保证数据的完整性，SQL规范以约束的方式对<strong>表数据进行额外的条件限制</strong>。从以下四个方面考虑：</p>
<ul>
<li><code>实体完整性（Entity Integrity）</code>：例如，同一个表中，不能存在两条完全相同无法区分的记录</li>
<li><code>域完整性（Domain Integrity）</code>：例如：年龄范围0-120，性别范围“男&#x2F;女”</li>
<li><code>引用完整性（Referential Integrity）</code>：例如：员工所在部门，在部门表中要能找到这个部门</li>
<li><code>用户自定义完整性（User-defined Integrity）</code>：例如：用户名唯一、密码不能为空等，本部门经理的工资不得高于本部门职工的平均工资的5倍。</li>
</ul>
<h3 id="1-2-什么是约束"><a href="#1-2-什么是约束" class="headerlink" title="1.2 什么是约束"></a>1.2 什么是约束</h3><p>约束是表级的强制规定。</p>
<p>可以在<strong>创建表时规定约束（通过 CREATE TABLE 语句）</strong>，或者在<strong>表创建之后通过 ALTER TABLE 语句规定约束</strong>。</p>
<h3 id="1-3-约束的分类"><a href="#1-3-约束的分类" class="headerlink" title="1.3 约束的分类"></a>1.3 约束的分类</h3><p>角度1：根据约束的字段个数，分为<strong>单列约束</strong>和<strong>多列约束</strong></p>
<p>角度2：根据约束的作用范围，分为<strong>列级约束</strong>和<strong>表级约束</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">			位置			支持的约束类型					是否可以起约束名</span><br><span class="line">列级约束：	列的后面		语法都支持，但外键没有效果		不可以</span><br><span class="line">表级约束：	所有列的下面	   默认和非空不支持，其他支持	   可以（主键没有效果）</span><br></pre></td></tr></table></figure>

<p>角度3：根据约束的功能，分为</p>
<ul>
<li><strong>NOT NULL</strong> <strong>非空约束，规定某个字段不能为空</strong></li>
<li><strong>UNIQUE</strong>  <strong>唯一约束</strong>，<strong>规定某个字段在整个表中是唯一的</strong></li>
<li><strong>PRIMARY KEY  主键(非空且唯一)约束</strong></li>
<li><strong>FOREIGN KEY</strong>  <strong>外键约束</strong></li>
<li><strong>CHECK</strong>  <strong>检查约束</strong></li>
<li><strong>DEFAULT</strong>  <strong>默认值约束</strong></li>
</ul>
<blockquote>
<p>注意： MySQL不支持check约束，但可以使用check约束，而没有任何效果</p>
</blockquote>
<p>角度4：添加约束的场景</p>
<ul>
<li>CRETATE TABLE 创建表时 添加约束</li>
<li>ALTER TABLE 修改表时 添加约束、删除约束</li>
</ul>
<h3 id="1-4-查看表中的约束"><a href="#1-4-查看表中的约束" class="headerlink" title="1.4 查看表中的约束"></a>1.4 查看表中的约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 2.如何查看表中的约束</span><br><span class="line">#information_schema数据库名（系统库）</span><br><span class="line">#table_constraints表名称（专门存储各个表的约束）</span><br><span class="line">SELECT * FROM information_schema.table_constraints </span><br><span class="line">WHERE table_name = &#x27;employees&#x27;;</span><br><span class="line"></span><br><span class="line">CREATE DATABASE dbtest13;</span><br><span class="line">USE dbtest13;</span><br></pre></td></tr></table></figure>



<h2 id="2-NOT-NULL"><a href="#2-NOT-NULL" class="headerlink" title="2. NOT NULL"></a>2. NOT NULL</h2><h3 id="2-1-NOT-NULL特点"><a href="#2-1-NOT-NULL特点" class="headerlink" title="2.1 NOT NULL特点"></a>2.1 NOT NULL特点</h3><p><code>NOT NULL</code>关键字是限定某个字段&#x2F;某列的值不允许为空，特点如下：</p>
<ul>
<li>MySQL的所有数据类型若不加限定，默认为NULL</li>
<li>NOT NULL只能用在<code>列级约束</code>上，也就是说不能用在<code>表级约束</code>上<ul>
<li>但可以有多个列限定</li>
</ul>
</li>
<li>注意空字符串和0，不等同于NULL</li>
</ul>
<p><code>NOT NULL</code>约束对于增删改的影响：</p>
<ul>
<li>添加的时候，如果没有对元素赋值，先看默认值，再看是否为空，如果默认为NULL，那就报错</li>
<li>添加的时候，如果赋值了，且赋值为NULL，直接报错</li>
<li>ALTER TABLE的时候，要保证没有NULL字段</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 3. not null 非空约束（只能用在列级约束上，不能在整个表后面加）</span><br><span class="line"># 3.1 创建表CREATE TABLE时添加</span><br><span class="line">CREATE TABLE test1(</span><br><span class="line">id INT NOT NULL,</span><br><span class="line">last_name VARCHAR(15) NOT NULL,</span><br><span class="line">email VARCHAR(25),</span><br><span class="line">salary DECIMAL(10, 2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test1;</span><br><span class="line"></span><br><span class="line">-- 约束对于增删改会有影响</span><br><span class="line">INSERT INTO test1(id, last_name, email, salary) </span><br><span class="line">VALUES(1, &#x27;Tom&#x27;, &#x27;tom@126.com&#x27;, 3400);</span><br><span class="line"></span><br><span class="line">-- Column &#x27;xxx&#x27; cannot be null</span><br><span class="line">INSERT INTO test1(id, last_name, email, salary) </span><br><span class="line">VALUES(2, NULL, &#x27;tom1@126.com&#x27;, 3400);</span><br><span class="line">INSERT INTO test1(id, last_name, email, salary) </span><br><span class="line">VALUES(NULL, &#x27;Jerry&#x27;, &#x27;jerry@126.com&#x27;, 3400);</span><br><span class="line"></span><br><span class="line">-- 这种写法是先看默认值，然后看非空</span><br><span class="line">-- Field &#x27;last_name&#x27; doesn&#x27;t have a default value</span><br><span class="line">INSERT INTO test1(id, email) </span><br><span class="line">VALUES(3, &#x27;abc@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">UPDATE test1</span><br><span class="line">SET email = NULL</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line">-- Column &#x27;last_name&#x27; cannot be null</span><br><span class="line">UPDATE test1</span><br><span class="line">SET last_name = NULL</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM test1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3.2 ALTER TABLE时加约束(受到原先值的影响，只要字段存在null值不能加)</span><br><span class="line">DESC test1;</span><br><span class="line"></span><br><span class="line">-- Invalid use of NULL value</span><br><span class="line">ALTER TABLE test1</span><br><span class="line">MODIFY email VARCHAR(25) NOT NULL;</span><br><span class="line"></span><br><span class="line">UPDATE test1</span><br><span class="line">SET email = &#x27;tom@126.com&#x27;</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test1</span><br><span class="line">MODIFY email VARCHAR(25) NOT NULL;</span><br></pre></td></tr></table></figure>



<h3 id="2-2-删除非空约束"><a href="#2-2-删除非空约束" class="headerlink" title="2.2 删除非空约束"></a>2.2 删除非空约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 3.3 ALTER TABLE 删除约束</span><br><span class="line">ALTER TABLE test1</span><br><span class="line">MODIFY email VARCHAR(25) NULL;</span><br></pre></td></tr></table></figure>





<h2 id="3-UNIQUE"><a href="#3-UNIQUE" class="headerlink" title="3. UNIQUE"></a>3. UNIQUE</h2><h3 id="3-1-UNIQUE特点"><a href="#3-1-UNIQUE特点" class="headerlink" title="3.1 UNIQUE特点"></a>3.1 UNIQUE特点</h3><p><code>UNIQUE</code>关键字是用来限制某个字段&#x2F;某列的值不能重复，特点如下：</p>
<ul>
<li>同个表可以有多个唯一约束<ul>
<li>其中，不仅可以指定某一个列唯一（通过列级约束&#x2F;表级约束），也可以指定<strong>多个列的组合</strong>唯一（通过表级约束）</li>
</ul>
</li>
<li>唯一约束允许列值为空（例子：没邮箱的员工只有1个吗？）</li>
<li>创建约束的时候<ul>
<li>如果没有给唯一约束命名，该约束名称默认为该列名（组合列默认是第一个列名）</li>
<li>MySQL会给唯一约束的列上默认创建一个<code>唯一索引</code></li>
</ul>
</li>
</ul>
<p>对于增删改的影响</p>
<ul>
<li>增加和修改时，保证不能有两个相同的UNIQUE字段（NULL除外）</li>
<li>在ALTER TABLE的时候，要保证前提不能有两个相同的UNIQUE字段</li>
</ul>
<p>UNIQUE字段删除的事项：</p>
<ul>
<li>添加唯一性约束的列上也会自动创建唯一索引。</li>
<li>删除唯一约束只能通过删除唯一索引的方式删除。</li>
<li>删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。</li>
<li>如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同；如果是组合列，那么默认和()中排在第一个的列名相同。也可以自定义唯一性约束名。</li>
</ul>
<blockquote>
<p>注意：删除UNIQUE约束，只能通过删除唯一索引的方式删除</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 4. UNIQUE</span><br><span class="line"># 4.1 CREATE TABLE 加</span><br><span class="line">CREATE TABLE test2 (</span><br><span class="line">id INT UNIQUE, # 列级约束</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">email VARCHAR(25) UNIQUE,</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line"># 表级约束(起名)</span><br><span class="line">CONSTRAINT uk_test2_email UNIQUE(email)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test2;</span><br><span class="line"></span><br><span class="line">-- email约束不取名，约束名即默认列名email</span><br><span class="line">SELECT * FROM information_schema.table_constraints </span><br><span class="line">WHERE table_name = &#x27;test2&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO test2(id, last_name, email, salary)</span><br><span class="line">VALUES (1, &#x27;Tom&#x27;, &#x27;tom@126.com&#x27;, 4500);</span><br><span class="line"></span><br><span class="line">-- Duplicate entry &#x27;1&#x27; for key &#x27;test2.id&#x27;</span><br><span class="line">INSERT INTO test2(id, last_name, email, salary)</span><br><span class="line">VALUES (1, &#x27;Tom&#x27;, &#x27;tom@126.com&#x27;, 4500);</span><br><span class="line"></span><br><span class="line">-- Duplicate entry &#x27;tom@126.com&#x27; for key &#x27;test2.email&#x27;</span><br><span class="line">INSERT INTO test2(id, last_name, email, salary)</span><br><span class="line">VALUES (2, &#x27;Tom&#x27;, &#x27;tom@126.com&#x27;, 4500);</span><br><span class="line"></span><br><span class="line">-- 可以向声明unique的字段 添加null值，且允许多个null存在</span><br><span class="line">INSERT INTO test2(id, last_name, email, salary)</span><br><span class="line">VALUES (2, &#x27;Tom1&#x27;, NULL, 4500);</span><br><span class="line"></span><br><span class="line">INSERT INTO test2(id, last_name, email, salary)</span><br><span class="line">VALUES (3, &#x27;Tom2&#x27;, NULL, 4500);</span><br><span class="line"></span><br><span class="line">-- update同理</span><br><span class="line"></span><br><span class="line">SELECT * FROM test2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 4.2 ALTER TABLE添加约束</span><br><span class="line">DESC test2;</span><br><span class="line"></span><br><span class="line">-- add key 方法（类比表级约束）</span><br><span class="line">UPDATE test2</span><br><span class="line">SET salary = 5000</span><br><span class="line">WHERE id = 3;</span><br><span class="line"></span><br><span class="line">UPDATE test2</span><br><span class="line">SET salary = 5500</span><br><span class="line">WHERE id = 1;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test2</span><br><span class="line">ADD CONSTRAINT uk_test2_sal UNIQUE(salary)</span><br><span class="line"></span><br><span class="line">-- modify方法（类比列级约束）</span><br><span class="line">ALTER TABLE test2</span><br><span class="line">MODIFY last_name VARCHAR(15) UNIQUE;</span><br></pre></td></tr></table></figure>



<h3 id="3-2-复合唯一约束"><a href="#3-2-复合唯一约束" class="headerlink" title="3.2 复合唯一约束"></a>3.2 复合唯一约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 4.3 复合的唯一性约束</span><br><span class="line">CREATE TABLE USER(</span><br><span class="line">id INT,</span><br><span class="line">`name` VARCHAR(15),</span><br><span class="line">`password` VARCHAR(25),</span><br><span class="line"># 表级约束</span><br><span class="line">CONSTRAINT uk_user_name_pwd UNIQUE(`name`,`password`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC USER;</span><br><span class="line"></span><br><span class="line">INSERT INTO USER</span><br><span class="line">VALUES(1,&#x27;Tom&#x27;,&#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">-- 可以添加成功</span><br><span class="line">INSERT INTO USER</span><br><span class="line">VALUES(1,&#x27;tom1&#x27;,&#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * FROM USER;</span><br><span class="line"></span><br><span class="line"># 案例：复合唯一性约束场景</span><br><span class="line">#学生表</span><br><span class="line">CREATE TABLE student(</span><br><span class="line">    sid INT,	#学号</span><br><span class="line">    sname VARCHAR(20),			#姓名</span><br><span class="line">    tel CHAR(11) UNIQUE KEY,  #电话</span><br><span class="line">    cardid CHAR(18) UNIQUE KEY #身份证号</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#课程表</span><br><span class="line">CREATE TABLE course(</span><br><span class="line">    cid INT,  #课程编号</span><br><span class="line">    cname VARCHAR(20)     #课程名称</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#选课表</span><br><span class="line">CREATE TABLE student_course(</span><br><span class="line">    id INT,</span><br><span class="line">    sid INT, # 学生编号</span><br><span class="line">    cid INT, # 课程编号</span><br><span class="line">    score INT,</span><br><span class="line">    UNIQUE KEY(sid,cid)  #复合唯一</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO student VALUES(1,&#x27;张三&#x27;,&#x27;13710011002&#x27;,&#x27;101223199012015623&#x27;);#成功</span><br><span class="line">INSERT INTO student VALUES(2,&#x27;李四&#x27;,&#x27;13710011003&#x27;,&#x27;101223199012015624&#x27;);#成功</span><br><span class="line">INSERT INTO course VALUES(1001,&#x27;Java&#x27;),(1002,&#x27;MySQL&#x27;);#成功</span><br><span class="line"></span><br><span class="line">SELECT * FROM student;</span><br><span class="line">SELECT * FROM course;</span><br><span class="line"></span><br><span class="line">INSERT INTO student_course VALUES</span><br><span class="line">(1, 1, 1001, 89),</span><br><span class="line">(2, 1, 1002, 90),</span><br><span class="line">(3, 2, 1001, 88),</span><br><span class="line">(4, 2, 1002, 56);#成功</span><br><span class="line"></span><br><span class="line">SELECT * FROM student_course;</span><br><span class="line"></span><br><span class="line">-- Duplicate entry &#x27;2-1002&#x27; for key &#x27;student_course.sid&#x27;</span><br><span class="line">INSERT INTO student_course VALUES</span><br><span class="line">(5, 2, 1002, 67);</span><br></pre></td></tr></table></figure>



<h3 id="3-3-删除唯一约束"><a href="#3-3-删除唯一约束" class="headerlink" title="3.3 删除唯一约束"></a>3.3 删除唯一约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 4.4 删除唯一性约束</span><br><span class="line">-- 添加唯一性约束的列上也会自动创建唯一索引。</span><br><span class="line">-- 删除唯一约束只能通过删除唯一索引的方式删除。</span><br><span class="line">-- 删除时需要指定唯一索引名，唯一索引名就和唯一约束名一样。</span><br><span class="line">-- 如果创建唯一约束时未指定名称，如果是单列，就默认和列名相同；如果是组合列，那么默认和()中排在第一个的列名相同。也可以自定义唯一性约束名。</span><br><span class="line"></span><br><span class="line">-- 删除索引（也可以show index from test2查看所有索引）</span><br><span class="line">DESC test2;</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints </span><br><span class="line">WHERE table_name = &#x27;test2&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ALTER TABLE test2</span><br><span class="line">DROP INDEX uk_test2_email;</span><br></pre></td></tr></table></figure>





<h2 id="4-PRIMARY-KEY"><a href="#4-PRIMARY-KEY" class="headerlink" title="4. PRIMARY KEY"></a>4. PRIMARY KEY</h2><h3 id="4-1-PRIMARY特点"><a href="#4-1-PRIMARY特点" class="headerlink" title="4.1 PRIMARY特点"></a>4.1 PRIMARY特点</h3><p> <code>PRIMARY KEY </code>关键字用于唯一标识表中的某行记录，特点如下：</p>
<ul>
<li>主键约束包含：<code>UNIQUE + NOT NULL的约束</code>，即不允许重复也不允许空值</li>
<li>一个表只能有一个主键约束，可以通过列级约束创建，也可以通过表级约束<ul>
<li>主键约束对应表中的一列或者多列（复合主键）</li>
<li>如果定义了复合主键，那么这些组合列都不允许重复且不允许出现空值</li>
</ul>
</li>
<li>MySQL主键名总是<code>PRIMARY</code>，即使自己对约束命名了也没用</li>
<li>创建主键约束时<ul>
<li>系统默认在对应的列或组合列上创建<code>主键索引</code>（建议查询尽量根据主键查询，效率更高）</li>
<li>删除主键约束后，对应的索引自动删除</li>
<li>后续不要再修改主键字段的值，因为主键是数据记录唯一标识，可能会破坏数据的完整性</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意：删除主键约束，不需要指定主键名，因为一个表只有一个主键，删除主键约束后，非空还存在。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 5. PRIMARY KEY主键约束</span><br><span class="line"># 5.1 CREATE TABLE声明 </span><br><span class="line">-- 一个表最多一个主键约束，且需要定义这个主键约束</span><br><span class="line"></span><br><span class="line">CREATE TABLE test3(</span><br><span class="line">id INT PRIMARY KEY, # 列级约束,不能再定义主键，只能有一个</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 主键约束：非空且唯一，唯一标识表中的记录</span><br><span class="line">CREATE TABLE test4(</span><br><span class="line">id INT, # 列级约束,不能再定义主键，只能有一个</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25),</span><br><span class="line"># 表级约束(没有必要起名字了)</span><br><span class="line">CONSTRAINT pk_test4_id PRIMARY KEY(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 主键约束名都是 PRIMARY，不管有没有取名</span><br><span class="line">SELECT * FROM information_schema.table_constraints </span><br><span class="line">WHERE table_name = &#x27;test3&#x27;;</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.table_constraints </span><br><span class="line">WHERE table_name = &#x27;test4&#x27;;</span><br><span class="line"></span><br><span class="line">INSERT INTO test4(id, last_name, salary, email)</span><br><span class="line">VALUES (1, &#x27;Tom&#x27;, 4500, &#x27;tom@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">-- Duplicate entry &#x27;1&#x27; for key &#x27;test4.PRIMARY&#x27;</span><br><span class="line">INSERT INTO test4(id, last_name, salary, email)</span><br><span class="line">VALUES (1, &#x27;Tom&#x27;, 4500, &#x27;tom@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">-- Column &#x27;id&#x27; cannot be null</span><br><span class="line">INSERT INTO test4(id, last_name, salary, email)</span><br><span class="line">VALUES (NULL, &#x27;Tom&#x27;, 4500, &#x27;tom@126.com&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test4;</span><br></pre></td></tr></table></figure>



<h3 id="4-2-复合主键约束"><a href="#4-2-复合主键约束" class="headerlink" title="4.2 复合主键约束"></a>4.2 复合主键约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 复合说明</span><br><span class="line"></span><br><span class="line"># 5.2 ALTER TABLE声明</span><br><span class="line">CREATE TABLE user1 (</span><br><span class="line">id INT,</span><br><span class="line">NAME VARCHAR(15),</span><br><span class="line">PASSWORD VARCHAR(25),</span><br><span class="line">PRIMARY KEY (NAME, PASSWORD)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO user1</span><br><span class="line">VALUES (1, &#x27;tom&#x27;, &#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO user1</span><br><span class="line">VALUES (1, &#x27;tom1&#x27;, &#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">-- 联合在一起的时候，只要有一个为null 就不行</span><br><span class="line">INSERT INTO user1</span><br><span class="line">VALUES (1, NULL, &#x27;abc&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM user1;</span><br><span class="line"></span><br><span class="line"># alter table时添加约束</span><br><span class="line">CREATE TABLE test6(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2),</span><br><span class="line">email VARCHAR(25)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">DESC test6;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test6</span><br><span class="line">ADD PRIMARY KEY (id)</span><br></pre></td></tr></table></figure>



<h3 id="4-3-删除主键约束"><a href="#4-3-删除主键约束" class="headerlink" title="4.3 删除主键约束"></a>4.3 删除主键约束</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 5.3 删除主键约束(实际开发中不会做，索引删除，B+树的特征被破坏)</span><br><span class="line">ALTER TABLE test6</span><br><span class="line">DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>



<h2 id="5-AUTO-INCREMENT"><a href="#5-AUTO-INCREMENT" class="headerlink" title="5. AUTO_INCREMENT"></a>5. AUTO_INCREMENT</h2><h3 id="5-1-AUTO-INCREMENT特点"><a href="#5-1-AUTO-INCREMENT特点" class="headerlink" title="5.1 AUTO_INCREMENT特点"></a>5.1 AUTO_INCREMENT特点</h3><p><code>AUTO_INCREMENT</code>关键字使得某个字段自增，特点如下：</p>
<ul>
<li><p>一个表只能有一个自增长列</p>
<ul>
<li>一般是需要产生唯一标识符 &#x2F; 顺序值时 使用</li>
</ul>
</li>
<li><p>使用要求</p>
<ul>
<li>使用自增长列必须满足键列（主键列 OR 唯一键列）</li>
<li>数据类型必须是整数类型</li>
</ul>
</li>
<li><p>特殊情况</p>
<ul>
<li>自增列如果指定0 或者 NULL，依然会在当前最大值基础上自增</li>
<li>如果手动指定具体值，直接赋值为具体值</li>
</ul>
</li>
<li><p>删除的时候，同NOT NULL，直接ALTER TABLE MODIFY即可</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 6. 自增长列：AUTO_INCREMENT</span><br><span class="line"># 6.1 create table时添加</span><br><span class="line">CREATE TABLE test7 (</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">last_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加的时候自动增长（添加0或者null时也是自动添加字段的值）</span><br><span class="line">-- 开发中，一旦声明了AUTO_INCREMENT 就不需要赋值了</span><br><span class="line">INSERT INTO test7(last_name)</span><br><span class="line">VALUES(&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test7;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 6.2 alter table时添加（一般造表就考虑上了，这个一般不会做）</span><br><span class="line">CREATE TABLE test8 (</span><br><span class="line">id INT PRIMARY KEY,</span><br><span class="line">last_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test8;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test8</span><br><span class="line">MODIFY id INT AUTO_INCREMENT;</span><br><span class="line"></span><br><span class="line"># 6.3 alter table时删除</span><br><span class="line">ALTER TABLE test8</span><br><span class="line">MODIFY id INT;</span><br></pre></td></tr></table></figure>



<h3 id="5-2-MYSQL8新特性——自增变量持久化"><a href="#5-2-MYSQL8新特性——自增变量持久化" class="headerlink" title="5.2 MYSQL8新特性——自增变量持久化"></a>5.2 MYSQL8新特性——自增变量持久化</h3><ul>
<li><p>在MySQL 8.0之前，自增主键AUTO_INCREMENT的值如果大于max(primary key)+1</p>
<ul>
<li>在MySQL重启后，会重置AUTO_INCREMENT&#x3D;max(primary key)+1，这种现象在某些情况下会导致业务主键冲突或者其他难以发现的问题。</li>
</ul>
</li>
<li><p>MySQL 5.7：对于自增主键的分配规则，是由InnoDB数据字典内部一个<code>计数器</code>来决定的，而该计数器只在<code>内存中维护</code>，并不会持久化到磁盘中。</p>
<ul>
<li>当数据库重启时，该计数器会被初始化。</li>
</ul>
</li>
<li><p>MySQL 8.0：将自增主键的计数器持久化到<code>重做日志</code>中。每次计数器发生改变，都会将其写入重做日志中。</p>
<ul>
<li>如果数据库重启，InnoDB会根据重做日志中的信息来初始化计数器的内存值。</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 6.4 MYSQL8.0新特性：自增变量持久化</span><br><span class="line"></span><br><span class="line">CREATE TABLE test9(</span><br><span class="line">id INT PRIMARY KEY AUTO_INCREMENT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 1,2,3,4</span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES (0), (0), (0), (0);</span><br><span class="line"></span><br><span class="line">DELETE FROM test9</span><br><span class="line">WHERE id = 4;</span><br><span class="line"></span><br><span class="line">-- 1,2,3,5</span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES (0);</span><br><span class="line"></span><br><span class="line">-- 1,2,3</span><br><span class="line">DELETE FROM test9</span><br><span class="line">WHERE id = 5;</span><br><span class="line"></span><br><span class="line">SELECT * FROM test9;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 重启服务器（此时将计数器持久化了，从redo日志读取相关值）</span><br><span class="line">-- -- 1,2,3,6</span><br><span class="line">INSERT INTO test9</span><br><span class="line">VALUES (0);</span><br></pre></td></tr></table></figure>



<h2 id="6-FOREIGN-KEY"><a href="#6-FOREIGN-KEY" class="headerlink" title="6. FOREIGN KEY"></a>6. FOREIGN KEY</h2><h3 id="6-1-FOREIGN-KEY特点"><a href="#6-1-FOREIGN-KEY特点" class="headerlink" title="6.1 FOREIGN KEY特点"></a>6.1 FOREIGN KEY特点</h3><p><code>FOREIGN KEY</code>关键字用于限定某个表的某个字段的引用完整性。</p>
<p>比如：员工表的员工所在部门的选择，必须在部门表能找到对应的部分。</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240816102122565.png" alt="image-20240816102122565">	</p>
<p>说特点前，首先给出<code>主表（父）</code>和<code>从表（子）</code>的概念</p>
<ul>
<li><p>主表（父表）：被引用的表，被参考的表</p>
</li>
<li><p>从表（子表）：引用别人的表，参考别人的表</p>
</li>
<li><p>举例</p>
<ul>
<li>员工表的员工所在部门这个字段的值要参考部门表：部门表是主表，员工表是从表。</li>
<li>学生表、课程表、选课表：选课表的学生和课程要分别参考学生表和课程表，学生表和课程表是主表，选课表是从表。</li>
</ul>
</li>
</ul>
<p>特点如下：</p>
<ul>
<li>从表的外键列，必须<code>引用(REFERENCES)</code>主表的主键&#x2F;唯一性约束的列<ul>
<li>因为被参考的值必须满足唯一性</li>
</ul>
</li>
<li>创建外键约束时<ul>
<li>如果不给外键约束命名，默认名此时不是列名了，而是自动产生外键名(如student_ibfk_1)，可以指定外键约束名</li>
<li>如果在创建(CREATE)表时就指定外键约束时，需要先创建主表，再创建从表</li>
<li>一个表可以指定多个外键约束</li>
<li>从表的外键列和主表的列名字不一定要相同，但数据类型必须一样，逻辑意义一致<ul>
<li>否则报“ERROR 1005 (HY000): Can’t create table’database.tablename’(errno: 150)”。</li>
</ul>
</li>
<li>创建外键约束后，系统默认在所在列上建立<code>普通索引</code>，索引名就是外键的约束名（根据外键查询的效率很高）</li>
</ul>
</li>
<li>删除外键约束<ul>
<li>删除表时，先删除从表，再删除主表</li>
<li>如果主表的记录存在被从从表<code>引用(REFERENCES)</code>时，不允许被删除，需要先删除从表中依赖该记录的数据</li>
<li>删除外键约束后，还要<code>手动删除</code>对应的普通索引</li>
</ul>
</li>
</ul>
<p>对于增删改的影响</p>
<ul>
<li>从表添加 &#x2F; 更新的时候，如果对应的外键在主表上找不到，添加 &#x2F; 更新会失败</li>
<li>主表删除 &#x2F; 更新 的时候，如果有从表的记录依赖于该字段，删除 &#x2F; 更新会失败</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 7. foriegn key(外键约束)</span><br><span class="line"># 7.1 在create table时添加</span><br><span class="line"></span><br><span class="line">-- ①先创建主表(没有主键/唯一性约束会报错)</span><br><span class="line">CREATE TABLE dept1 (</span><br><span class="line">dept_id INT ,</span><br><span class="line">dept_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ALTER TABLE dept1</span><br><span class="line">ADD PRIMARY KEY (dept_id);</span><br><span class="line"></span><br><span class="line">-- ②再创建从表</span><br><span class="line">CREATE TABLE emp1(</span><br><span class="line">emp_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">emp_name VARCHAR(15),</span><br><span class="line">department_id INT,</span><br><span class="line"># 表级约束</span><br><span class="line">CONSTRAINT fk_emp1_dept_id FOREIGN KEY (department_id) REFERENCES dept1(dept_id) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DESC dept1;</span><br><span class="line">DESC emp1;</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.`TABLE_CONSTRAINTS`</span><br><span class="line">WHERE table_name = &#x27;emp1&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 7.2 演示外键的效果</span><br><span class="line">-- 添加失败，主表没有10号id</span><br><span class="line">INSERT INTO emp1</span><br><span class="line">VALUES(1001, &#x27;Tom&#x27;, 10);</span><br><span class="line"></span><br><span class="line">INSERT INTO dept1</span><br><span class="line">VALUES(10, &#x27;IT&#x27;);</span><br><span class="line"></span><br><span class="line">-- 主表dept1添加10号部门后，从表emp1可以添加10号员工了（delete update同理）</span><br><span class="line">INSERT INTO emp1</span><br><span class="line">VALUES(1001, &#x27;Tom&#x27;, 10);</span><br><span class="line"></span><br><span class="line">SELECT * FROM emp1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 删除失败，从表存在相关的10号记录</span><br><span class="line">DELETE FROM dept1</span><br><span class="line">WHERE dept_id = 10;</span><br><span class="line"></span><br><span class="line">-- 更新失败，从表存在相关的10号记录</span><br><span class="line">UPDATE dept1</span><br><span class="line">SET dept_id = 20</span><br><span class="line">WHERE dept_id = 10;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 7.3 ALTER TABLE时添加外键约束</span><br><span class="line">CREATE TABLE dept2 (</span><br><span class="line">dept_id INT PRIMARY KEY,</span><br><span class="line">dept_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp2(</span><br><span class="line">emp_id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">emp_name VARCHAR(15),</span><br><span class="line">department_id INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">SELECT * FROM information_schema.`TABLE_CONSTRAINTS`</span><br><span class="line">WHERE table_name = &#x27;emp2&#x27;;</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD CONSTRAINT fk_emp2_dept_id FOREIGN KEY (department_id) REFERENCES dept2(dept_id);</span><br></pre></td></tr></table></figure>



<h3 id="6-2-约束等级"><a href="#6-2-约束等级" class="headerlink" title="6.2 约束等级"></a>6.2 约束等级</h3><ul>
<li><p><code>Cascade方式</code>：在父表上update&#x2F;delete记录时，同步update&#x2F;delete掉子表的匹配记录 </p>
</li>
<li><p><code>Set null方式</code>：在父表上update&#x2F;delete记录时，将子表上匹配记录的列设为null，但是要注意子表的外键列不能为not null  </p>
</li>
<li><p><code>No action方式</code>：如果子表中有匹配的记录，则不允许对父表对应候选键进行update&#x2F;delete操作  </p>
</li>
<li><p><code>Restrict方式</code>：同no action， 都是立即检查外键约束</p>
</li>
<li><p><code>Set default方式</code>（在可视化工具SQLyog中可能显示空白）：父表有变更时，子表将外键列设置成一个默认的值，但Innodb不能识别</p>
</li>
</ul>
<p>如果没有指定等级，就相当于Restrict方式。</p>
<p>对于外键约束，最好是采用: <code>ON UPDATE CASCADE ON DELETE RESTRICT</code> 的方式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 7.4 约束等级</span><br><span class="line">-- CASCADE</span><br><span class="line">-- SET NULL</span><br><span class="line">-- NO ACTION</span><br><span class="line">-- RESTRICT</span><br><span class="line">-- SET DEFAULT</span><br><span class="line"></span><br><span class="line">-- 演示：ON UPDATE CASCADE / ON DELETE SET NULL</span><br><span class="line"></span><br><span class="line">CREATE TABLE dept(</span><br><span class="line">    did INT PRIMARY KEY,		#部门编号</span><br><span class="line">    dname VARCHAR(50)			#部门名称</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp(</span><br><span class="line">    eid INT PRIMARY KEY,  #员工编号</span><br><span class="line">    ename VARCHAR(5),     #员工姓名</span><br><span class="line">    deptid INT,				#员工所在的部门</span><br><span class="line">    FOREIGN KEY (deptid) REFERENCES dept(did)  ON UPDATE CASCADE ON DELETE SET NULL</span><br><span class="line">    #把修改操作设置为级联修改等级，把删除操作设置为set null等级</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO dept VALUES(1001,&#x27;教学部&#x27;);</span><br><span class="line">INSERT INTO dept VALUES(1002, &#x27;财务部&#x27;);</span><br><span class="line">INSERT INTO dept VALUES(1003, &#x27;咨询部&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO emp VALUES(1,&#x27;张三&#x27;,1001); #在添加这条记录时，要求部门表有1001部门</span><br><span class="line">INSERT INTO emp VALUES(2,&#x27;李四&#x27;,1001);</span><br><span class="line">INSERT INTO emp VALUES(3,&#x27;王五&#x27;,1002);</span><br><span class="line"></span><br><span class="line">-- 员工表王五也变为1004</span><br><span class="line">UPDATE dept</span><br><span class="line">SET did = 1004</span><br><span class="line">WHERE did = 1002;</span><br><span class="line"></span><br><span class="line">-- 张三 李四的部门id置为null</span><br><span class="line">DELETE FROM dept</span><br><span class="line">WHERE did = 1001;</span><br><span class="line"></span><br><span class="line">SELECT * FROM dept;</span><br><span class="line">SELECT * FROM emp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 结论：外键约束建议采用 ON UPDATE CASCADE ON DELETE RESTRICT 的方式</span><br></pre></td></tr></table></figure>



<h3 id="6-3-删除外键约束"><a href="#6-3-删除外键约束" class="headerlink" title="6.3 删除外键约束"></a>6.3 删除外键约束</h3><ul>
<li>先查看约束名和外键约束，删除对应的外键约束ALTER TABLE … DROP FOREIGN KEY</li>
<li>再查看索引名和删除索引DROP INDEX（只能手动删除）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 7.5 删除外键约束</span><br><span class="line">-- 一个表中可以声明多个外键约束</span><br><span class="line">USE atguigudb;</span><br><span class="line">SELECT * FROM information_schema.`TABLE_CONSTRAINTS`</span><br><span class="line">WHERE table_name = &#x27;employees&#x27;;</span><br><span class="line"></span><br><span class="line">USE dbtest13;</span><br><span class="line">SELECT * FROM information_schema.`TABLE_CONSTRAINTS`</span><br><span class="line">WHERE table_name = &#x27;emp1&#x27;;</span><br><span class="line"></span><br><span class="line">-- 删除外键约束</span><br><span class="line">ALTER TABLE emp1</span><br><span class="line">DROP FOREIGN KEY fk_emp1_dept_id;</span><br><span class="line"></span><br><span class="line"># 手动删除外键约束的普通索引</span><br><span class="line">SHOW INDEX FROM emp1;</span><br><span class="line"></span><br><span class="line">ALTER TABLE emp1</span><br><span class="line">DROP INDEX fk_emp1_dept_id;</span><br></pre></td></tr></table></figure>



<h3 id="6-4-开发场景"><a href="#6-4-开发场景" class="headerlink" title="6.4 开发场景"></a>6.4 开发场景</h3><p><strong>问题1：如果两个表之间有关系（一对一、一对多），比如：员工表和部门表（一对多），它们之间是否一定要建外键约束？</strong></p>
<p>答：不是的</p>
<p><strong>问题2：建和不建外键约束有什么区别？</strong></p>
<p>答：建外键约束，你的操作（创建表、删除表、添加、修改、删除）会受到限制，从语法层面受到限制。例如：在员工表中不可能添加一个员工信息，它的部门的值在部门表中找不到。</p>
<p>不建外键约束，你的操作（创建表、删除表、添加、修改、删除）不受限制，要保证数据的<code>引用完整性</code>，只能依<code>靠程序员的自觉</code>，或者是<code>在Java程序中进行限定</code>。例如：在员工表中，可以添加一个员工的信息，它的部门指定为一个完全不存在的部门。</p>
<blockquote>
<p><strong>阿里开发规范</strong></p>
<p>【<code>强制</code>】不得使用外键与级联，一切外键概念必须在应用层解决。 </p>
<p>说明：（概念解释）学生表中的 student_id 是主键，那么成绩表中的 student_id 则为外键。如果更新学生表中的 student_id，同时触发成绩表中的 student_id 更新，即为级联更新。外键与级联更新适用于<code>单机低并发</code>，不适合<code>分布式</code>、<code>高并发集群</code>；级联更新是强阻塞，存在数据库<code>更新风暴</code>的风险；外键影响数据库的<code>插入速度</code>。</p>
</blockquote>
<p><strong>问题3：那么建和不建外键约束和查询有没有关系？</strong></p>
<p>答：没有</p>
<blockquote>
<p>在 MySQL 里，外键约束是有成本的，需要消耗系统资源。对于大并发的 SQL 操作，有可能会不适合。比如大型网站的中央数据库，可能会<code>因为外键约束的系统开销而变得非常慢</code>。所以， MySQL 允许你不使用系统自带的外键约束，在<code>应用层面</code>完成检查数据一致性的逻辑。也就是说，即使你不用外键约束，也要想办法通过应用层面的附加逻辑，来实现外键约束的功能，确保数据的一致性。</p>
</blockquote>
<p><strong>总结</strong></p>
<ul>
<li>外键是保证数据的完整性的技术之一，有一个缺点是在数据库中产生开销，影响数据库性能，<code>分布式、高并发</code>情况下可能不适合，更多用于<code>单机低并发</code></li>
<li>除了外键，我们也可以在应用层面保证引用完整性，如在Java程序中就事先进行判断和限定，而不是等到了数据库再限定</li>
</ul>
<h2 id="7-CHECK"><a href="#7-CHECK" class="headerlink" title="7. CHECK"></a>7. CHECK</h2><p><code>CHECK</code>关键字用于检验字段是否复合要求，一般是判断值的范围。</p>
<ul>
<li>说明：MySQL5.7 可以使用check约束，但check约束对数据验证没有任何作用。添加数据时，没有任何错误或警告</li>
<li><strong>MySQL 8.0中可以正常使用check约束</strong>。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 8. check约束</span><br><span class="line">CREATE TABLE test10(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2) CHECK(salary &gt; 2000)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO test10</span><br><span class="line">VALUES (1, &#x27;Tom&#x27;, 2500);</span><br><span class="line"></span><br><span class="line">-- 添加失败（MYSQL5.7不支持）</span><br><span class="line">INSERT INTO test10</span><br><span class="line">VALUES (2, &#x27;Tom1&#x27;, 1500);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test10;</span><br></pre></td></tr></table></figure>



<h2 id="8-DEFAULT"><a href="#8-DEFAULT" class="headerlink" title="8. DEFAULT"></a>8. DEFAULT</h2><p><code>DEFAULT</code>关键字用于指定字段的默认值，即插入数据的时候没有显式指定数据时赋值的内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 9.DEFAULT约束</span><br><span class="line"># 9.1 CREATE TABLE时添加</span><br><span class="line">CREATE TABLE test11(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2) DEFAULT 2000</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC test11;</span><br><span class="line"></span><br><span class="line">INSERT INTO test11(id,last_name)</span><br><span class="line">VALUES(2,&#x27;Tom1&#x27;);</span><br><span class="line"></span><br><span class="line">SELECT * FROM test11;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 9.2 ALTER TABLE时添加约束</span><br><span class="line">CREATE TABLE test12(</span><br><span class="line">id INT,</span><br><span class="line">last_name VARCHAR(15),</span><br><span class="line">salary DECIMAL(10,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">ALTER TABLE test12</span><br><span class="line">MODIFY salary DECIMAL(10,2) DEFAULT 2500;</span><br><span class="line"></span><br><span class="line">DESC test12</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 9.3 删除默认值约束</span><br><span class="line">ALTER TABLE test12</span><br><span class="line">MODIFY salary DECIMAL(10,2);</span><br></pre></td></tr></table></figure>



<h2 id="9-面试题"><a href="#9-面试题" class="headerlink" title="9. 面试题"></a>9. 面试题</h2><p><strong>面试1、为什么建表时，加 not null default ‘’ 或 default 0</strong></p>
<p>答：不想让表中出现null值。</p>
<p><strong>面试2、为什么不想要 null 的值</strong></p>
<p>答:（1）不好比较。null是一种特殊值，比较时只能用专门的is null 和 is not null来比较。碰到运算符，通常返回null。</p>
<pre><code> （2）效率不高。影响提高索引效果。因此，我们往往在建表时 not null default &#39;&#39; 或 default 0
</code></pre>
<p><strong>面试3、带AUTO_INCREMENT约束的字段值是从1开始的吗？</strong><br>在MySQL中，默认AUTO_INCREMENT的初始值是1，每新增一条记录，字段值自动加1。设置自增属性（AUTO_INCREMENT）的时候，还可以指定第一条插入记录的自增字段的值，这样新插入的记录的自增字段值从初始值开始递增，如在表中插入第一条记录，同时指定id值为5，则以后插入的记录的id值就会从6开始往上增加。添加主键约束时，往往需要设置字段自动增加属性。</p>
<p><strong>面试4、并不是每个表都可以任意选择存储引擎？</strong><br>外键约束（FOREIGN KEY）不能跨引擎使用。</p>
<p>MySQL支持多种存储引擎，每一个表都可以指定一个不同的存储引擎，需要注意的是：<strong>外键约束是用来保证数据的参照完整性的</strong>，如果表之间需要关联外键，却指定了不同的存储引擎，那么这些表之间是不能创建外键约束的。所以说，存储引擎的选择也不完全是随意的。</p>
<h2 id="10-课后练习"><a href="#10-课后练习" class="headerlink" title="10. 课后练习"></a>10. 课后练习</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 约束课后练习</span><br><span class="line"></span><br><span class="line"># 练习1：</span><br><span class="line">CREATE DATABASE test04_emp;</span><br><span class="line">USE test04_emp;</span><br><span class="line"></span><br><span class="line">CREATE TABLE emp2(</span><br><span class="line">id INT,</span><br><span class="line">emp_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE dept2(</span><br><span class="line">id INT,</span><br><span class="line">dept_name VARCHAR(15)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#1.向表emp2的id列中添加PRIMARY KEY约束</span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD PRIMARY KEY(id);</span><br><span class="line"></span><br><span class="line">#2.向表dept2的id列中添加PRIMARY KEY约束</span><br><span class="line">ALTER TABLE dept2</span><br><span class="line">ADD PRIMARY KEY(id);</span><br><span class="line"></span><br><span class="line">#3.向表emp2中添加列dept_id，并在其中定义FOREIGN KEY约束，</span><br><span class="line">#  与之相关联的列是dept2表中的id列。</span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD dept_id INT;</span><br><span class="line">ALTER TABLE emp2</span><br><span class="line">ADD CONSTRAINT fk_emp2_dept_id FOREIGN KEY(dept_id) REFERENCES dept2(id);</span><br><span class="line"></span><br><span class="line">DESC emp2;</span><br><span class="line"></span><br><span class="line"># 练习2：对图书管理数据表加上约束</span><br><span class="line">USE test01_library;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY id INT(11) PRIMARY KEY AUTO_INCREMENT;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY NAME VARCHAR(50) NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY AUTHORS VARCHAR(100) NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY price FLOAT NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY pubdate YEAR NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE books</span><br><span class="line">MODIFY num INT(11) NOT NULL;</span><br><span class="line"></span><br><span class="line">DESC books;</span><br><span class="line"></span><br><span class="line"># 练习3：</span><br><span class="line">#1.创建数据库test04_company</span><br><span class="line">CREATE DATABASE IF NOT EXISTS test04_company CHARACTER SET &#x27;utf8&#x27;;</span><br><span class="line"></span><br><span class="line">USE test04_company;</span><br><span class="line"></span><br><span class="line">#2.按照下表给出的表结构在test04_company数据库中创建两个数据表offices和employees</span><br><span class="line">CREATE TABLE IF NOT EXISTS offices(</span><br><span class="line">officeCode INT PRIMARY KEY,</span><br><span class="line">city VARCHAR(50) NOT NULL,</span><br><span class="line">address VARCHAR(50),</span><br><span class="line">country VARCHAR(50) NOT NULL,</span><br><span class="line">#postalCode VARCHAR(15) UNIQUE</span><br><span class="line">postalCode VARCHAR(15),</span><br><span class="line">CONSTRAINT uk_off_posCode UNIQUE(postalCode)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DESC offices;</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS employees(</span><br><span class="line">employeeNumber INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">lastName VARCHAR(50) NOT NULL,</span><br><span class="line">firstName VARCHAR(50) NOT NULL,</span><br><span class="line">mobile VARCHAR(25) UNIQUE,</span><br><span class="line">officeCode INT NOT NULL,</span><br><span class="line">jobTitle VARCHAR(50) NOT NULL,</span><br><span class="line">birth DATETIME NOT NULL,</span><br><span class="line">note VARCHAR(255),</span><br><span class="line">sex VARCHAR(5),</span><br><span class="line">CONSTRAINT fk_emp_officeCode FOREIGN KEY(officeCode) REFERENCES offices(officeCode)</span><br><span class="line">);</span><br><span class="line">DESC employees;</span><br><span class="line"></span><br><span class="line">#3.将表employees的mobile字段修改到officecode字段后面</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">MODIFY mobile VARCHAR(25) AFTER officeCode;</span><br><span class="line"></span><br><span class="line">#4.将表employees的birth字段改名为employee_birth</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">CHANGE birth employee_birth DATETIME;</span><br><span class="line"></span><br><span class="line">#5.修改sex字段，数据类型为CHAR(1)，非空约束</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">MODIFY sex CHAR(1) NOT NULL;</span><br><span class="line"></span><br><span class="line">#6.删除字段note</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">DROP COLUMN note;</span><br><span class="line"></span><br><span class="line">#7.增加字段名favoriate_activity，数据类型为VARCHAR(188)</span><br><span class="line">ALTER TABLE employees</span><br><span class="line">ADD favoriate_activity VARCHAR(100);</span><br><span class="line"></span><br><span class="line">#8.将表employees名称修改为employees_info</span><br><span class="line">RENAME TABLE employees TO employees_info</span><br><span class="line"></span><br><span class="line">DESC employees_info;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://yuezi2048.github.io">yuezi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://yuezi2048.github.io/2024/08/16/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/13.%E7%BA%A6%E6%9D%9F/">https://yuezi2048.github.io/2024/08/16/2.Areas🌐/back-end-java/2.MySQL/基础篇/13.约束/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://yuezi2048.github.io" target="_blank">yuezi</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%9F%BA%E7%A1%80%E7%AF%87/">基础篇</a></div><div class="post-share"><div class="social-share" data-image="/img/touxiang.jpg" data-sites="qq,wechat"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/08/16/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/12.%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" title="12.数据库数据类型"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">12.数据库数据类型</div></div><div class="info-2"><div class="info-item-1">十二、数据库数据类型1....</div></div></div></a><a class="pagination-related" href="/2024/08/17/2.Areas%F0%9F%8C%90/back-end-java/1.JavaSE/%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%94%E2%80%94%E9%9F%A9%E9%A1%BA%E5%B9%B3/15.%E6%B3%9B%E5%9E%8B/" title="15.泛型"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">15.泛型</div></div><div class="info-2"><div class="info-item-1">十五、泛型15.1 为什么要泛型 如果要在ArrayList中添加三个Dog对象，用传统的多态实现，会有两个问题 每次调用Dog对象方法都需要向下转型一次 如果不小心加入了Cat等其他对象，可能会出现异常    package com.hspedu.generic;import java.util.ArrayList;/** * @author yuezi2048 * @version 1.0 */public class Generic01 &#123;    /*    	大黄：10        中黄：5        小黄：1        Exception in thread &quot;main&quot; java.lang.ClassCastException: com.hspedu.generic.Cat cannot be cast to com.hspedu.generic.Dog            at com.hspedu.generic.Generic01.main(Generic01.java:22)    */   ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/08/14/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/00.%E5%9F%BA%E7%A1%80%E7%AF%87%E5%86%85%E5%AE%B9%E6%A1%86%E6%9E%B6/" title="00.基础篇内容框架"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="info-item-2">00.基础篇内容框架</div></div><div class="info-2"><div class="info-item-1">MySQL数据库基础篇分为5个篇章： 1. 数据库概述与MySQL安装篇  第01章：数据库概述 第02章：MySQL环境搭建  2. SQL之SELECT使用篇  第03章：基本的SELECT语句 第04章：运算符 第05章：排序与分页 第06章：多表查询 第07章：单行函数 第08章：聚合函数 第09章：子查询  3. SQL之DDL、DML、DCL使用篇  第10章：创建和管理表 第11章：数据处理之增删改 第12章：MySQL数据类型精讲 第13章：约束  4. 其它数据库对象篇（开发用到了再学）  第14章：视图 第15章：存储过程与函数 第16章：变量、流程控制与游标 第17章：触发器  5. MySQL8 新特性篇（开发用到了再学）  第18章：MySQL8其它新特性  ps：普通开发往往积累单点技术、比如 CRUD、锁类型、索引的数据结构… 而对于技术骨干、架构师则往往需要对底层原理吃透：  数据库事务 ACID...</div></div></div></a><a class="pagination-related" href="/2024/08/14/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/01.%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0/" title="01.数据库概述"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="info-item-2">01.数据库概述</div></div><div class="info-2"><div class="info-item-1">一、数据库概述1. 为什么要数据库 数据的持久化：将数据保存到硬盘上，可供可掉电式的存储设备使用，大多使用关系数据库实现（也可以通过文件I&#x2F;O、XML实现）  	 2. DB 和 DBMS2.1 概述 数据库DB：存储数据的仓库，本质上是一个文件系统，保存一系列有组织的数据 数据库管理系统DBMS：管理和操纵数据库的大型软件，从而建立、使用和维护数据库。用户可以使用DBMS查询数据库的数据 结构化查询语言SQL：用于数据库交互的语言  其中，DBMS可以管理多个DB，开发中，通常针对每个应用创建一个数据库，并在一个数据库中创建多个表，从而保存实体用户的数据 	 2.2 常见DBMS常见的DBMS 参考数据库最新排名:https://db-engines.com/en/ranking 	 发展趋势：https://db-engines.com/en/ranking_trend 	 Oracle 1979 年，Oracle 2 诞生，它是第一个商用的 RDBMS（关系型数据库管理系统）。随着 Oracle 软件的名气越来越大，公司也改名叫 Oracle...</div></div></div></a><a class="pagination-related" href="/2025/05/25/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/02.MySQL%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="02.MySQL环境搭建"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-25</div><div class="info-item-2">02.MySQL环境搭建</div></div><div class="info-2"><div class="info-item-1">二、MySQL环境搭建1. 清除原有MySQL环境Step1：停止MySQL服务 	 Step2：软件卸载  亦可通过mysql-installer-community-8.0.26.0.msi卸载，此时安装目录也会被移除  	 Step3：残余文件清理 如果再次安装不成功，可以卸载后对残余文件进行清理后再安装。 （1）服务目录：mysql服务的安装目录 （2）数据目录：默认在C:\ProgramData\MySQL 注意：请在卸载前做好数据备份 在操作完以后，需要重启计算机，然后进行安装即可。如果仍然安装失败，需要继续操作如下步骤4。 Step4：清理注册表 在系统的搜索框中输入regedit HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQL服务 目录删除HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\MySQL服务...</div></div></div></a><a class="pagination-related" href="/2024/08/16/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/03.%E5%9F%BA%E6%9C%ACSELECT%E8%AF%AD%E5%8F%A5/" title="03.基本SELECT语句"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-16</div><div class="info-item-2">03.基本SELECT语句</div></div><div class="info-2"><div class="info-item-1">三、基本SELECT语句1. SQL概述1.1 SQL背景 1946 年，世界上第一台电脑诞生，如今，借由这台电脑发展起来的互联网已经自成江湖。在这几十年里，无数的技术、产业在这片江湖里沉浮，有的方兴未艾，有的已经几幕兴衰。但在这片浩荡的波动里，有一门技术从未消失，甚至“老当益壮”，那就是 SQL。  45 年前，也就是 1974 年，IBM 研究员发布了一篇揭开数据库技术的论文《SEQUEL：一门结构化的英语查询语言》，直到今天这门结构化的查询语言并没有太大的变化，相比于其他语言，SQL 的半衰期可以说是非常长了。   不论是前端工程师，还是后端算法工程师，都一定会和数据打交道，都需要了解如何又快又准确地提取自己想要的数据。更别提数据分析师了，他们的工作就是和数据打交道，整理不同的报告，以便指导业务决策。  SQL（Structured Query...</div></div></div></a><a class="pagination-related" href="/2025/04/24/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/04.%E8%BF%90%E7%AE%97%E7%AC%A6/" title="04.运算符"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-24</div><div class="info-item-2">04.运算符</div></div><div class="info-2"><div class="info-item-1">四、运算符1. 算数运算符算术运算符主要用于数学运算，其可以连接运算符前后的两个数值或表达式，对数值或表达式进行加（+）、减（-）、乘（*）、除（&#x2F;）和取模（%）运算。 1.1 加减法# 算数运算符：+ - * / div % mod SELECT 100, 100 + 0, 100 - 0, 100 + 50, 100 + 50 - 30, 100 + 35.5, 100 - 35.5FROM DUAL;+-----+---------+---------+----------+--------------+------------+------------+| 100 | 100 + 0 | 100 - 0 | 100 + 50 | 100 + 50 -30 | 100 + 35.5 | 100 - 35.5 |+-----+---------+---------+----------+--------------+------------+------------+| 100 |     100 |     100 |      150 |         ...</div></div></div></a><a class="pagination-related" href="/2025/05/28/2.Areas%F0%9F%8C%90/back-end-java/2.MySQL/%E5%9F%BA%E7%A1%80%E7%AF%87/05.%E6%8E%92%E5%BA%8F%E5%92%8C%E5%88%86%E9%A1%B5/" title="05.排序和分页"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-05-28</div><div class="info-item-2">05.排序和分页</div></div><div class="info-2"><div class="info-item-1">五、排序和分页1. 排序1.1 单列排序 使用 ORDER BY 子句排序 ASC（ascend）: 升序 DESC（descend）:降序   ORDER BY 子句在SELECT语句的结尾。 关注SELECT查询的顺序，实际场景：别名不能在where从句中使用，而可以在order by中使用  # 1. 一级排序# 如果没有使用排序操作，默认情况下查询返回的数据按照添加数据的顺序SELECT * FROM employees;-- 1.1 基本使用# 练习：按照salary从高到低显示数据(ORDER BY 通过什么来排序)# 升序:ASC(ascend) 降序：DESC(descend)SELECT employee_id, last_name, salaryFROM employeesORDER BY salary DESC;# 从低到高(没有显式写，默认升序)SELECT employee_id, last_name, salaryFROM employeesORDER BY salary ASC;-- 2. 别名# 使用列的别名进行排序SELECT...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">yuezi</div><div class="author-info-description">积微者速成</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">603</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">85</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yuezi2048"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://githubfast.com/yuezi2048" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_46345703" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="https://qm.qq.com/cgi-bin/qm/qr?k=dD62GIPTf5-iS4UdSfJRy7NHwsrCh3-j" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:joyLing@stumail.nwu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">积微者速成</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E7%BA%A6%E6%9D%9F"><span class="toc-text">十三、约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BA%A6%E6%9D%9F-CONSTRAINT-%E6%A6%82%E8%BF%B0"><span class="toc-text">1. 约束(CONSTRAINT)概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.1 为什么要约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.2 什么是约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">1.3 约束的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E6%9F%A5%E7%9C%8B%E8%A1%A8%E4%B8%AD%E7%9A%84%E7%BA%A6%E6%9D%9F"><span class="toc-text">1.4 查看表中的约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-NOT-NULL"><span class="toc-text">2. NOT NULL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-NOT-NULL%E7%89%B9%E7%82%B9"><span class="toc-text">2.1 NOT NULL特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%88%A0%E9%99%A4%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">2.2 删除非空约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-UNIQUE"><span class="toc-text">3. UNIQUE</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-UNIQUE%E7%89%B9%E7%82%B9"><span class="toc-text">3.1 UNIQUE特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%A4%8D%E5%90%88%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.2 复合唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%88%A0%E9%99%A4%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-text">3.3 删除唯一约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-PRIMARY-KEY"><span class="toc-text">4. PRIMARY KEY</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-PRIMARY%E7%89%B9%E7%82%B9"><span class="toc-text">4.1 PRIMARY特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%A4%8D%E5%90%88%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">4.2 复合主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">4.3 删除主键约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-AUTO-INCREMENT"><span class="toc-text">5. AUTO_INCREMENT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-AUTO-INCREMENT%E7%89%B9%E7%82%B9"><span class="toc-text">5.1 AUTO_INCREMENT特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-MYSQL8%E6%96%B0%E7%89%B9%E6%80%A7%E2%80%94%E2%80%94%E8%87%AA%E5%A2%9E%E5%8F%98%E9%87%8F%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-text">5.2 MYSQL8新特性——自增变量持久化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-FOREIGN-KEY"><span class="toc-text">6. FOREIGN KEY</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-FOREIGN-KEY%E7%89%B9%E7%82%B9"><span class="toc-text">6.1 FOREIGN KEY特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E7%BA%A6%E6%9D%9F%E7%AD%89%E7%BA%A7"><span class="toc-text">6.2 约束等级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.3 删除外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF"><span class="toc-text">6.4 开发场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-CHECK"><span class="toc-text">7. CHECK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-DEFAULT"><span class="toc-text">8. DEFAULT</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">9. 面试题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E8%AF%BE%E5%90%8E%E7%BB%83%E4%B9%A0"><span class="toc-text">10. 课后练习</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/Excalidraw/Drawing%202024-11-01%2015.37.37.excalidraw/" title="Drawing 2024-11-01 15.37.37.excalidraw">Drawing 2024-11-01 15.37.37.excalidraw</a><time datetime="2025-10-31T04:19:26.621Z" title="发表于 2025-10-31 12:19:26">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/01.project/condefather/yupao/back-end/7.%E4%BC%98%E5%8C%96%E4%B8%BB%E9%A1%B5%E6%80%A7%E8%83%BD-%E4%BC%98%E5%8C%96%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/" title="7.优化主页性能-优化批量导入数据">7.优化主页性能-优化批量导入数据</a><time datetime="2025-10-31T04:19:26.102Z" title="发表于 2025-10-31 12:19:26">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/MySQL/81.%E4%BB%80%E4%B9%88%E6%98%AF%E6%B8%B8%E6%A0%87Cursor%E5%88%86%E9%A1%B5_%E5%AF%B9%E6%AF%94%E4%BC%A0%E7%BB%9FLIMIT_OFFSET%E5%88%86%E9%A1%B5%E7%9A%84%E4%BC%98%E5%8A%BF%E6%98%AF%E4%BB%80%E4%B9%88/" title="81.什么是游标Cursor分页_对比传统LIMIT_OFFSET分页的优势是什么">81.什么是游标Cursor分页_对比传统LIMIT_OFFSET分页的优势是什么</a><time datetime="2025-10-31T04:14:27.000Z" title="发表于 2025-10-31 12:14:27">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/MySQL/80.%E5%85%A8%E9%87%8F%E5%90%8C%E6%AD%A5%E5%92%8C%E5%A2%9E%E9%87%8F%E5%90%8C%E6%AD%A5%E5%90%84%E8%87%AA%E4%BC%98%E7%BC%BA%E7%82%B9/" title="80.全量同步和增量同步各自优缺点">80.全量同步和增量同步各自优缺点</a><time datetime="2025-10-31T04:13:32.000Z" title="发表于 2025-10-31 12:13:32">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/31/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/MySQL/79.%E4%BB%80%E4%B9%88%E6%98%AF%E6%89%B9%E9%87%8F%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93_%E7%9B%B8%E6%AF%94%E5%8D%95%E6%9D%A1%E6%8F%92%E5%85%A5%E4%BC%98%E5%8A%BF/" title="79.什么是批量数据入库_相比单条插入优势">79.什么是批量数据入库_相比单条插入优势</a><time datetime="2025-10-31T04:03:26.000Z" title="发表于 2025-10-31 12:03:26">2025-10-31</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/default.png);"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By yuezi</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>