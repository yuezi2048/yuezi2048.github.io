<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>6. Session_filter_listener | yuezi</title><meta name="author" content="yuezi"><meta name="copyright" content="yuezi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ç¬¬å…­ç«  Session_filter_listener1. Session1.1 ä¸ºä»€ä¹ˆè¦Session HTTPæ˜¯æ— çŠ¶æ€åè®®(Stateless)ï¼Œå³HTTPåè®®æœ¬èº«ä¸ä¼šä¿å­˜è¯·æ±‚å’Œå“åº”çš„é€šä¿¡çŠ¶æ€ ä¾‹å¦‚ï¼Œåœ¨å®¢æˆ·ç«¯è¯·æ±‚â€”â€”æœåŠ¡ç«¯å›åº” çš„C&#x2F;Så“åº”æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šè®°å½•è¯¥è¯·æ±‚æ¥è‡ªäºå“ªä¸ªæµè§ˆå™¨ï¼Œå³å®¢æˆ·ç«¯çš„çŠ¶æ€ ç”Ÿæ´»ä¾‹å­ï¼šå¼ ä¸‰ä¸‹é¦†å­åƒäº†ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å†æ¥åƒï¼Œè€æ¿åœ¨æœ‰çŠ¶æ€çš„æƒ…å†µä¸‹çŸ¥é“å¼ ä¸‰ä¸Šæ¬¡åƒçš„å•¥">
<meta property="og:type" content="article">
<meta property="og:title" content="6. Session_filter_listener">
<meta property="og:url" content="https://yuezi2048.github.io/2025/05/06/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/6.%20Session_filter_listener/index.html">
<meta property="og:site_name" content="yuezi">
<meta property="og:description" content="ç¬¬å…­ç«  Session_filter_listener1. Session1.1 ä¸ºä»€ä¹ˆè¦Session HTTPæ˜¯æ— çŠ¶æ€åè®®(Stateless)ï¼Œå³HTTPåè®®æœ¬èº«ä¸ä¼šä¿å­˜è¯·æ±‚å’Œå“åº”çš„é€šä¿¡çŠ¶æ€ ä¾‹å¦‚ï¼Œåœ¨å®¢æˆ·ç«¯è¯·æ±‚â€”â€”æœåŠ¡ç«¯å›åº” çš„C&#x2F;Så“åº”æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šè®°å½•è¯¥è¯·æ±‚æ¥è‡ªäºå“ªä¸ªæµè§ˆå™¨ï¼Œå³å®¢æˆ·ç«¯çš„çŠ¶æ€ ç”Ÿæ´»ä¾‹å­ï¼šå¼ ä¸‰ä¸‹é¦†å­åƒäº†ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å†æ¥åƒï¼Œè€æ¿åœ¨æœ‰çŠ¶æ€çš„æƒ…å†µä¸‹çŸ¥é“å¼ ä¸‰ä¸Šæ¬¡åƒçš„å•¥">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yuezi2048.github.io/img/touxiang.jpg">
<meta property="article:published_time" content="2025-05-06T12:08:51.000Z">
<meta property="article:modified_time" content="2025-05-06T12:08:51.000Z">
<meta property="article:author" content="yuezi">
<meta property="article:tag" content="4.JavaWeb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yuezi2048.github.io/img/touxiang.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "6. Session_filter_listener",
  "url": "https://yuezi2048.github.io/2025/05/06/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/6.%20Session_filter_listener/",
  "image": "https://yuezi2048.github.io/img/touxiang.jpg",
  "datePublished": "2025-05-06T12:08:51.000Z",
  "dateModified": "2025-05-06T12:08:51.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "yuezi",
      "url": "https://yuezi2048.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yuezi2048.github.io/2025/05/06/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/6.%20Session_filter_listener/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bfb48b678d82bea9f9cc9d59227767e4";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"FPH6F2TOJL","apiKey":"06d9ea26c803ba912b4d8e13404ed34d","indexName":"blog","hitsPerPage":6,"languages":{"input_placeholder":"æœç´¢","hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œè€—æ—¶ ${time} æ¯«ç§’"}},
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":350,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '6. Session_filter_listener',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/backgound.css"><meta name="generator" content="Hexo 8.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">785</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">66</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">91</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/default.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">yuezi</span></a><a class="nav-page-title" href="/"><span class="site-name">6. Session_filter_listener</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> åšæ–‡</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> å½’æ¡£</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºç¬”è€…</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">6. Session_filter_listener</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-05-06T12:08:51.000Z" title="å‘è¡¨äº 2025-05-06 20:08:51">2025-05-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-05-06T12:08:51.000Z" title="æ›´æ–°äº 2025-05-06 20:08:51">2025-05-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/">2.AreasğŸŒ</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/">back-end-java</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/2-Areas%F0%9F%8C%90/back-end-java/4-JavaWeb/">4.JavaWeb</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">12k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>50åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="ç¬¬å…­ç« -Session-filter-listener"><a href="#ç¬¬å…­ç« -Session-filter-listener" class="headerlink" title="ç¬¬å…­ç«  Session_filter_listener"></a>ç¬¬å…­ç«  Session_filter_listener</h1><h2 id="1-Session"><a href="#1-Session" class="headerlink" title="1. Session"></a>1. Session</h2><h3 id="1-1-ä¸ºä»€ä¹ˆè¦Session"><a href="#1-1-ä¸ºä»€ä¹ˆè¦Session" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆè¦Session"></a>1.1 ä¸ºä»€ä¹ˆè¦Session</h3><ul>
<li>HTTPæ˜¯<code>æ— çŠ¶æ€åè®®(Stateless)</code>ï¼Œå³HTTPåè®®æœ¬èº«ä¸ä¼šä¿å­˜è¯·æ±‚å’Œå“åº”çš„é€šä¿¡çŠ¶æ€<ul>
<li>ä¾‹å¦‚ï¼Œåœ¨å®¢æˆ·ç«¯è¯·æ±‚â€”â€”æœåŠ¡ç«¯å›åº” çš„C&#x2F;Så“åº”æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šè®°å½•è¯¥è¯·æ±‚æ¥è‡ªäºå“ªä¸ªæµè§ˆå™¨ï¼Œå³å®¢æˆ·ç«¯çš„çŠ¶æ€</li>
<li>ç”Ÿæ´»ä¾‹å­ï¼šå¼ ä¸‰ä¸‹é¦†å­åƒäº†ä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡å†æ¥åƒï¼Œè€æ¿åœ¨æœ‰çŠ¶æ€çš„æƒ…å†µä¸‹çŸ¥é“å¼ ä¸‰ä¸Šæ¬¡åƒçš„å•¥ï¼Œåœ¨æ— çŠ¶æ€çš„æƒ…å†µä¸‹åˆ™ä¸çŸ¥é“ï¼Œéœ€è¦å¼ ä¸‰é‡æ–°ç‚¹</li>
</ul>
</li>
<li>å¼•å‡ºä½¿ç”¨<code>Cookie</code>é…åˆ<code>Session</code>è§£å†³HTTPåè®®ä¸­è¯·æ±‚å’Œå“åº”çš„æŒä¹…åŒ–é—®é¢˜<ul>
<li>Cookieè®°å½•å°‘é‡æ•°æ®ï¼Œé€šè¿‡<code>å“åº”å¤´set-cookie</code>æ¥å‘å®¢æˆ·ç«¯å“åº”ç”¨æˆ·è¦ä¿ç•™çš„ä¿¡æ¯</li>
<li>Sessionè®°å½•æ›´å¤šæ•°æ®ï¼Œé€šè¿‡<code>HttpSessionå¯¹è±¡</code>ä¿å­˜å’Œå®¢æˆ·ç«¯ç›¸å…³çš„ä¿¡æ¯</li>
<li>Sessionçš„ä¼ é€’é…åˆCookieä¸€èµ·ä½¿ç”¨</li>
<li>ç”Ÿæ´»ä¾‹å­ï¼šå¼ ä¸‰å»é“¶è¡ŒåŠä¸šåŠ¡ï¼Œé“¶è¡Œç»™å¼ ä¸‰å¼€æˆ·ï¼ˆSessionï¼‰ï¼Œå¹¶å‘äº†é“¶è¡Œå¡ï¼ˆCookieï¼‰ï¼Œåç»­å¼ ä¸‰é€šè¿‡Cookieç»™é“¶è¡Œï¼Œé“¶è¡Œå°±ä¼šé€šè¿‡CookieæŸ¥è¯¢åˆ°å¼ ä¸‰çš„Session</li>
</ul>
</li>
</ul>
<h3 id="1-2-Cookie"><a href="#1-2-Cookie" class="headerlink" title="1.2 Cookie"></a>1.2 Cookie</h3><h4 id="1-2-1-CookieåŸç†"><a href="#1-2-1-CookieåŸç†" class="headerlink" title="1.2.1 CookieåŸç†"></a>1.2.1 CookieåŸç†</h4><p>Cookieæ˜¯å®¢æˆ·ç«¯çš„ä¼šè¯æŠ€æœ¯ï¼Œç”±æœåŠ¡ç«¯äº§ç”Ÿï¼Œå®¢æˆ·ç«¯è®¿é—®è¯¥æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨åˆ™æºå¸¦è¯¥Cookieç»™æœåŠ¡ç«¯ï¼Œè¿‡ç¨‹å¦‚ä¸‹</p>
<ul>
<li>ç”¨æˆ·ä¸€å¼€å§‹ä¸æºå¸¦cookieè¯·æ±‚æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å…ˆåˆ›å»ºcookieï¼Œå°†cookieæ”¾å…¥ç›¸åº”å¯¹è±¡ä¸­ï¼ŒTomcatå®¹å™¨è‡ªåŠ¨å°†cookieè½¬åŒ–ä¸ºset-cookieå“åº”å¤´ï¼Œç›¸åº”ç»™å®¢æˆ·ç«¯</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°set-cookieå“åº”å¤´åï¼Œä¸‹æ¬¡è¯·æ±‚ä¼šæºå¸¦cookieæ”¾å…¥è¯·æ±‚ä½“ä¸­ï¼Œå‘é€ç»™æœåŠ¡ç«¯<ul>
<li>cookieæ˜¯<code>é”®å€¼å¯¹</code>æ•°æ®ï¼Œtomcat8.5ç‰ˆæœ¬åå¯å­˜æ”¾ä¸­æ–‡ï¼Œä½†ä¸æ¨è</li>
<li>cookieå­˜å‚¨äºå®¢æˆ·ç«¯ï¼Œå®¹æ˜“æš´éœ²<code>ä¸å®‰å…¨</code>ï¼Œä¸€èˆ¬å­˜å‚¨ä¸æ•æ„Ÿçš„æ•°æ®<ul>
<li>è®°å½•ç”¨æˆ·åï¼ˆå¸®åŠ©ä¸‹æ¬¡ç™»å½•å¿«é€Ÿå¡«å……ç”¨æˆ·åï¼‰</li>
<li>ä¿å­˜ç”µå½±æ’­æ”¾è¿›åº¦ï¼ˆå¸®åŠ©å…³é—­é¡µé¢åè‡ªåŠ¨è·³è½¬åˆ°ä¸Šæ¬¡æ’­æ”¾è¿›åº¦ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä¸Šè¿°è¿‡ç¨‹å›¾è§£</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915143213849.png" alt="image-20240915143213849">	</p>
<h4 id="1-2-2-Cookieä½¿ç”¨"><a href="#1-2-2-Cookieä½¿ç”¨" class="headerlink" title="1.2.2 Cookieä½¿ç”¨"></a>1.2.2 Cookieä½¿ç”¨</h4><p>ServletAï¼šç”ŸæˆCookieï¼Œå°†Cookieæ”¾å…¥å“åº”ä½“ä¸­</p>
<ul>
<li>åˆ›å»ºCookieå¯¹è±¡</li>
<li>å¯ä»¥è®¾ç½®Cookieå¯¹è±¡çš„æŒä¹…åŒ–æ—¶é—´maxAgeå’ŒæŒä¹…åŒ–è·¯å¾„Path<ul>
<li>è®¾ç½®æŒä¹…åŒ–æ—¶é—´åï¼ŒCookieå°†ç”±ä¼šè¯çº§åˆ°æŒä¹…çº§ï¼Œæ•°æ®ä¼šä»å†…å­˜å­˜å‚¨åˆ°ç¡¬ç›˜ä¸­ï¼Œä¸ä¼šéšæµè§ˆå™¨å…³é—­è€Œæ¶ˆå¤±</li>
<li>è®¾ç½®æŒä¹…åŒ–è·¯å¾„å¯ä»¥å®ç°è®¿é—®ä¸åŒèµ„æºè·¯å¾„ï¼Œå¯ä»¥æºå¸¦ä¸åŒçš„Cookie</li>
</ul>
</li>
<li>åœ¨respå¯¹è±¡ä¸­ç›´æ¥è°ƒç”¨addCookieæ–¹æ³•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servletA&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºcookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;keyA&quot;</span>, <span class="string">&quot;valueA&quot;</span>);</span><br><span class="line">        <span class="comment">// è®¾ç½®cookieæŒä¹…åŒ–æ—¶é—´</span></span><br><span class="line">        cookie1.setMaxAge(<span class="number">60</span> * <span class="number">5</span>); <span class="comment">// å•ä½æ˜¯ç§’</span></span><br><span class="line">        <span class="comment">// è®¾ç½®cookieæŒä¹…åŒ–è·¯å¾„</span></span><br><span class="line">        cookie1.setPath(<span class="string">&quot;/demo06/servletB&quot;</span>);</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;keyB&quot;</span>, <span class="string">&quot;valueB&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†cookieæ”¾å…¥respå¯¹è±¡å“åº”ç»™å®¢æˆ·ï¼Œåç»­å®¢æˆ·æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦Cookieè¯·æ±‚ï¼ˆå…³é—­æµè§ˆå™¨åè‡ªåŠ¨æ¸…é™¤ï¼‰</span></span><br><span class="line">        resp.addCookie(cookie1);</span><br><span class="line">        resp.addCookie(cookie2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è®¿é—®ServletAåçš„å“åº”æŠ¥æ–‡ï¼Œæ­¤æ—¶åœ¨ServeltAç•Œé¢ï¼Œåªå­˜å‚¨äº†keyB-valueBæŠ¥æ–‡</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915144808856.png" alt="image-20240915144808856">	</p>
<p>ServletBï¼šæ£€éªŒç”¨æˆ·è¯·æ±‚ä½“ä¸­çš„Cookieä¿¡æ¯</p>
<ul>
<li>é€šè¿‡reqå¯¹è±¡çš„getCookiesæ–¹æ³•è·å–ï¼ˆå¯èƒ½æœ‰å¤šä¸ªCookieï¼Œå¦‚æœæ²¡æœ‰è¿”å›çš„æ˜¯nullï¼‰</li>
<li>foreachéå†è¯»å–Cookie[]æ•°ç»„ä¿¡æ¯</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚ä¸­æºå¸¦çš„cookieï¼ˆå¤šä¸ªcookieçš„æ•°ç»„ï¼‰</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰cookieï¼ŒCookieä¸ºnullè¿˜æ˜¯é•¿åº¦ä¸º0ï¼Ÿï¼ˆä¸ºNULLï¼Œå› æ­¤éœ€è¦å…ˆåˆ¤æ–­åœ¨è¿›è¡Œè¿­ä»£ï¼Œå¦åˆ™å‡ºç°NULL Pointer Exceptionï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                System.out.println(cookie.getName() + <span class="string">&quot; &quot;</span> + cookie.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¯·æ±‚ServeltBä¼šæºå¸¦keyA-valueAå’ŒkeyB-valueBçš„Cookieï¼Œé‚£ä¹ˆä¹Ÿå°±é¡ºåˆ©å®ç°äº†Cookieçš„æäº¤è·¯å¾„</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915145311092.png" alt="image-20240915145311092">	</p>
<p>æœåŠ¡ç«¯æ§åˆ¶å°ä¹Ÿèƒ½æ‰“å°å‡ºæ¥ç›¸å…³Cookieä¿¡æ¯</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915145330996.png" alt="image-20240915145330996">	</p>
<h3 id="1-3-Session"><a href="#1-3-Session" class="headerlink" title="1.3 Session"></a>1.3 Session</h3><h4 id="1-3-1-HttpSessionåŸç†"><a href="#1-3-1-HttpSessionåŸç†" class="headerlink" title="1.3.1 HttpSessionåŸç†"></a>1.3.1 HttpSessionåŸç†</h4><p>HttpSessionç”¨äºä¿ç•™ç”¨æˆ·æ›´å¤šä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¼šä¸ºç”¨æˆ·å¼€è¾Ÿä¸€å—å†…å­˜ç©ºé—´ï¼ˆå­˜å‚¨<code>Sessionå¯¹è±¡</code>ï¼‰ï¼Œåç»­å®¢æˆ·ç«¯å‘æ¥è¯·æ±‚åï¼ŒæœåŠ¡ç«¯å¯ä»¥é€šè¿‡Sessionæ¥å¾—åˆ°å’Œè¿”å›æŒ‡å®šå®¢æˆ·ç«¯çš„çŠ¶æ€äº†ï¼Œå…·ä½“çš„æµç¨‹å¦‚ä¸‹ã€‚</p>
<ul>
<li>å®¢æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚åï¼ŒæœåŠ¡ç«¯é¦–å…ˆä¸ºå®¢æˆ·åˆ›å»ºSessionï¼ŒåŒæ—¶ä¼šå°†sessionå¯¹è±¡çš„idï¼ˆ<code>JSESSIONID</code>ï¼‰é€šè¿‡cookieçš„æ–¹å¼æ”¾å…¥å“åº”å¯¹è±¡ï¼Œè¿›è€Œç”Ÿæˆå“åº”ä½“å“åº”ç»™å®¢æˆ·</li>
<li>å®¢æˆ·åˆ™ä¼šæ¥æ”¶åˆ°JSESSIONIDçš„ç‰¹æ®ŠCookieï¼Œåç»­è¯·æ±‚çš„æ—¶å€™å°±ä¼šæºå¸¦ä¸Šè¯¥Cookieï¼Œåç«¯å†æ¥æ”¶åˆ°çš„æ—¶å€™å°±ä¼šæ ¹æ®idå¯»æ‰¾å¯¹åº”çš„Sessionå¯¹è±¡<ul>
<li>åé¢ä¼šæåˆ°ï¼ŒSessionå¯¹è±¡æ˜¯<code>ä¸‰å¤§åŸŸå¯¹è±¡</code>ä¹‹ä¸€</li>
<li>Sessionå¯ä»¥åœ¨æœåŠ¡ç«¯å­˜å‚¨ç”¨æˆ·çš„ä¸€äº›é‡è¦ä¿¡æ¯<ul>
<li>ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼ˆç”¨æˆ·ç™»é™†åçš„æ•æ„Ÿä¿¡æ¯ï¼‰</li>
<li>ç”¨æˆ·æ“ä½œå†å²ï¼ˆè®¿é—®ç—•è¿¹ï¼Œè´­ç‰©è½¦ç­‰ä¸´æ—¶ä¿¡æ¯ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä¸Šè¿°æµç¨‹çš„å›¾è§£</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915150156034.png" alt="image-20240915150156034">	</p>
<h4 id="1-3-2-HttpSessionä½¿ç”¨"><a href="#1-3-2-HttpSessionä½¿ç”¨" class="headerlink" title="1.3.2 HttpSessionä½¿ç”¨"></a>1.3.2 HttpSessionä½¿ç”¨</h4><p>Servlet1ï¼šåˆ›å»ºSessisionå¯¹è±¡ï¼Œå¹¶æ„å»ºCookieå“åº”ç»™å®¢æˆ·ç«¯</p>
<ul>
<li>é€šè¿‡è¯·æ±‚å¯¹è±¡è·å–Sessionå¯¹è±¡ï¼ŒåŒ…æ‹¬äº†ä»¥ä¸‹æ“ä½œ<ul>
<li>å¦‚æœreqåŒ…å«äº†JSESSIONID çš„Cookieï¼Œåˆ™ä¼šæ‰¾å¯¹åº”çš„Sessionï¼Œå¦‚æœæ‰¾åˆ°è¿”å›Sessionï¼Œæ²¡æ‰¾åˆ°åˆ™åˆ›å»ºSessionå¹¶è¿”å›cookie</li>
<li>å¦‚æœreqæ²¡æœ‰åŒ…å«JESSIONIDï¼Œåˆ™åˆ›å»ºsessionå¹¶è¿”å›cookie</li>
</ul>
</li>
</ul>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915150950851.png" alt="image-20240915150950851">	</p>
<ul>
<li><p>å¯è®¾ç½®sessionçš„å­˜æ´»æ—¶é—´ï¼Œä¹Ÿå¯ä»¥ç«‹å³ä½¿sessionå¤±æ•ˆ</p>
<ul>
<li>tomcat&#x2F;conf&#x2F;web.xmlçš„xmlé…ç½®æ–‡ä»¶ä¸ºé»˜è®¤30(min)ï¼Œå»ºè®®ä¸è¦ä¿®æ”¹</li>
<li>æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæ‰‹åŠ¨åœ¨æœ¬åœ°é¡¹ç›®web.xmlæ–‡ä»¶å¯¹å…¶è¿›è¡Œæ›´æ–°</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>ä¹Ÿå¯ä»¥é€šè¿‡APIè®¾å®šï¼Œè§ä¸‹é¢ä»£ç </li>
</ul>
</li>
<li><p>å¦å¤–ï¼Œsessionå¯¹è±¡é€šè¿‡getæ–¹æ³•è·å–åˆ°idï¼Œæ›´æ–°æƒ…å†µç­‰å±æ€§ä¿¡æ¯ï¼Œé€šè¿‡setæ–¹æ³•è®¾ç½®å±æ€§ï¼ˆé”®å€¼å¯¹æ–¹å¼å­˜å‚¨ï¼‰</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servlet1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// æ¥æ”¶è¯·æ±‚ä¸­çš„Usernameå‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å¾—Sessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"><span class="comment">//        session.setMaxInactiveInterval(30 * 60); // ç§’æ•°ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯ä¿®æ”¹</span></span><br><span class="line"><span class="comment">//        session.invalidate();</span></span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜åœ¨å…³äºSessionçš„ç‰¹æ®ŠCookieï¼Œkï¼šJSESSIONID v:xxxxxxx</span></span><br><span class="line">        <span class="comment">//      æœ‰ï¼šæ ¹æ®JSESSIONIDæ‰¾å¯¹åº”çš„SESSIONå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//          æ‰¾åˆ°äº†ï¼šè¿”å›ä¹‹å‰çš„SESSION</span></span><br><span class="line">        <span class="comment">//          æ²¡æ‰¾åˆ°ï¼šåˆ›å»ºSESSION å¹¶è¿”å›ç‰¹æ®ŠCookie</span></span><br><span class="line">        <span class="comment">//      æ²¡æœ‰ï¼šåˆ›å»ºä¸€ä¸ªsessionï¼Œå¹¶è¿”å›ç‰¹æ®ŠCookieï¼ˆå·²å°è£…ï¼‰</span></span><br><span class="line">        System.out.println(session.getId());</span><br><span class="line">        System.out.println(session.isNew());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†Usernameå­˜å…¥Sessionï¼Œå‘å®¢æˆ·å“åº”ä¿¡æ¯</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;username&quot;</span>, username); <span class="comment">// v:Objectç±»å‹</span></span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;åˆ›å»ºSESSIONæˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼ŒæˆåŠŸè·å–åˆ°Sessionï¼Œå¹¶å¾—åˆ°Cookieï¼Œå¹¶å¾—åˆ°æœ€æ–°çš„SessionIdï¼Œä¸€åˆ†é’Ÿå†…å¤šæ¬¡è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡ä¹‹åå°±è¾“å‡ºfalseäº†</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915151333661.png" alt="image-20240915151333661">	</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915151647972.png" alt="image-20240915151647972">	</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915151955469.png" alt="image-20240915151955469">	</p>
<p>servlet2ï¼šè´Ÿè´£æ¥æ”¶Sessionå¯¹è±¡ï¼ŒæŠŠSessionå¯¹è±¡ä¸­çš„æ•°æ®æ‹¿å‡ºæ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servlet2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å¾—Sessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        System.out.println(session.getId());</span><br><span class="line">        System.out.println(session.isNew());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å–Sessionä¸­å­˜å‚¨çš„ç”¨æˆ·å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;servlet2 got username: &quot;</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼šè¯·æ±‚çš„æ—¶å€™æºå¸¦äº†Cookieï¼Œservlet1ä¼ å‚åä¹Ÿæ˜¯èƒ½è·å–åˆ°ç”¨æˆ·ä¿¡æ¯çš„</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915151759324.png" alt="image-20240915151759324">	</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915151911044.png" alt="image-20240915151911044">	</p>
<h3 id="1-4-ä¸‰å¤§åŸŸå¯¹è±¡"><a href="#1-4-ä¸‰å¤§åŸŸå¯¹è±¡" class="headerlink" title="1.4 ä¸‰å¤§åŸŸå¯¹è±¡"></a>1.4 ä¸‰å¤§åŸŸå¯¹è±¡</h3><h4 id="1-4-1-åŸŸå¯¹è±¡è¯´æ˜"><a href="#1-4-1-åŸŸå¯¹è±¡è¯´æ˜" class="headerlink" title="1.4.1 åŸŸå¯¹è±¡è¯´æ˜"></a>1.4.1 åŸŸå¯¹è±¡è¯´æ˜</h4><ul>
<li>å­˜å‚¨æ•°æ®å’Œä¼ é€’æ•°æ®çš„å¯¹è±¡ï¼Œæ•°æ®å…±äº«çš„èŒƒå›´æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤æˆ‘ä»¬åˆ’åˆ†äº†ä¸‰å¤§åŸŸå¯¹è±¡ï¼Œä¸åŒçš„å¯¹è±¡ä»£è¡¨äº†ä¸åŒçš„åŸŸ</li>
<li>è¯·æ±‚åŸŸå¯¹è±¡<code>HttpServletRequest</code>ï¼šä¼ é€’æ•°æ®çš„èŒƒå›´æ˜¯ä¸€æ¬¡è¯·æ±‚å†…çš„è¯·æ±‚è½¬å‘</li>
<li>ä¼šè¯åŸŸå¯¹è±¡<code>HttpSession</code>ï¼šä¼ é€’æ•°æ®çš„èŒƒå›´æ˜¯ä¸€æ¬¡ä¼šè¯å†…ï¼Œå¯è·¨è¯·æ±‚</li>
<li>åº”ç”¨åŸŸå¯¹è±¡<code>ServletContext</code>ï¼šä¼ é€’æ•°æ®çš„èŒƒå›´æ˜¯æœ¬åº”ç”¨å†…ï¼Œå¯è·¨ä¼šè¯</li>
<li>ç”Ÿæ´»ä¸¾ä¾‹ï¼šçƒ­æ°´å™¨çš„ä½¿ç”¨èŒƒå›´ï¼Œå¼ ä¸‰å·¥ä½ åªèƒ½å¼ ä¸‰ç”¨ï¼Œå®éªŒå®¤å†… æ•´ä¸ªå®éªŒå®¤ç”¨ï¼Œå¤–é¢èµ°å»Š è¯¥å±‚æ‰€æœ‰äººéƒ½å¯ä»¥ç”¨</li>
</ul>
<p>ä¸Šè¿°å¯¹è±¡å›¾è§£</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915152817138.png" alt="image-20240915152817138">	</p>
<ul>
<li>è¯·æ±‚è½¬å‘æ—¶,è¯·æ±‚åŸŸå¯ä»¥ä¼ é€’æ•°æ®<code>è¯·æ±‚åŸŸå†…ä¸€èˆ¬æ”¾æœ¬æ¬¡è¯·æ±‚ä¸šåŠ¡æœ‰å…³çš„æ•°æ®,å¦‚:æŸ¥è¯¢åˆ°çš„æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯</code></li>
<li>åŒä¸€ä¸ªä¼šè¯å†…,ä¸ç”¨è¯·æ±‚è½¬å‘,ä¼šè¯åŸŸå¯ä»¥ä¼ é€’æ•°æ®<code>ä¼šè¯åŸŸå†…ä¸€èˆ¬æ”¾æœ¬æ¬¡ä¼šè¯çš„å®¢æˆ·ç«¯æœ‰å…³çš„æ•°æ®,å¦‚:å½“å‰å®¢æˆ·ç«¯ç™»å½•çš„ç”¨æˆ·</code> </li>
<li>åŒä¸€ä¸ªAPPå†…,ä¸åŒçš„å®¢æˆ·ç«¯,åº”ç”¨åŸŸå¯ä»¥ä¼ é€’æ•°æ®<code>åº”ç”¨åŸŸå†…ä¸€èˆ¬æ”¾æœ¬ç¨‹åºåº”ç”¨æœ‰å…³çš„æ•°æ® å¦‚:Springæ¡†æ¶çš„IOCå®¹å™¨</code></li>
</ul>
<h4 id="1-4-2-åŸŸå¯¹è±¡é€šç”¨API"><a href="#1-4-2-åŸŸå¯¹è±¡é€šç”¨API" class="headerlink" title="1.4.2 åŸŸå¯¹è±¡é€šç”¨API"></a>1.4.2 åŸŸå¯¹è±¡é€šç”¨API</h4><p>åŸŸå¯¹è±¡é€šç”¨API</p>
<blockquote>
<p>åŸŸå¯¹è±¡çš„API</p>
</blockquote>
<table>
<thead>
<tr>
<th>API</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td>void setAttribute(String name,String value)</td>
<td>å‘åŸŸå¯¹è±¡ä¸­æ·»åŠ &#x2F;ä¿®æ”¹æ•°æ®</td>
</tr>
<tr>
<td>Object getAttribute(String name);</td>
<td>ä»åŸŸå¯¹è±¡ä¸­è·å–æ•°æ®</td>
</tr>
<tr>
<td>removeAttribute(String name);</td>
<td>ç§»é™¤åŸŸå¯¹è±¡ä¸­çš„æ•°æ®</td>
</tr>
</tbody></table>
<p>servletAï¼šå‘ä¸‰å¤§åŸŸæ”¾å…¥æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servletA&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// å‘è¯·æ±‚åŸŸå­˜æ”¾æ•°æ®</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;request&quot;</span>, <span class="string">&quot;requestMessage&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘ä¼šè¯åŸŸå­˜æ”¾æ•°æ®</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;session&quot;</span>, <span class="string">&quot;sessionMessage&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘åº”ç”¨åŸŸå­˜æ”¾æ•°æ®</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> req.getServletContext(); <span class="comment">// getServletContext()ä¹Ÿå¯ä»¥</span></span><br><span class="line">        application.setAttribute(<span class="string">&quot;application&quot;</span>, <span class="string">&quot;applicationMessage&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚åŸŸçš„æ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">reqMessage</span> <span class="operator">=</span> (String) req.getAttribute(<span class="string">&quot;request&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;request: &quot;</span> + reqMessage);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘ ç»™ ServletB</span></span><br><span class="line">        <span class="comment">// req.getRequestDispatcher(&quot;servletB&quot;).forward(req, resp);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// é‡å®šå‘</span></span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;servletB&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>servletBï¼šå‘ä¸‰å¤§åŸŸæ‹¿å‡ºæ•°æ®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servletB&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// è·å–è¯·æ±‚åŸŸçš„æ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">reqMessage</span> <span class="operator">=</span> (String) req.getAttribute(<span class="string">&quot;request&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;request: &quot;</span> + reqMessage);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–ä¼šè¯åŸŸçš„æ•°æ®</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="type">String</span> <span class="variable">session1</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;session&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;session1: &quot;</span> + session1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–åº”ç”¨åŸŸçš„æ•°æ®</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> getServletContext();</span><br><span class="line">        <span class="type">String</span>  <span class="variable">appMessage</span> <span class="operator">=</span> (String) application.getAttribute(<span class="string">&quot;application&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;appMessage: &quot;</span> + appMessage);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>è¯·æ±‚è½¬å‘æµ‹è¯•ï¼šæ­¤æ—¶servlet1å’Œservlet2åœ¨åŒä¸€ä¸ªè¯·æ±‚åŸŸä¸­ï¼Œéƒ½èƒ½æ”¶åˆ°è¯·æ±‚åŸŸå¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ï¼Œä¸€èˆ¬åé¢å¯¹åº”çš„ä¸šåŠ¡åº”è¯¥å°±æ˜¯æŸ¥è¯¢æ•°æ®åº“ç­‰ä¸€æ¬¡æ€§è¯·æ±‚</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915154534109.png" alt="image-20240915154534109">	</p>
<p>é‡å®šå‘æµ‹è¯•ï¼šåœ¨servletBé‡å®šå‘åï¼Œå“åº”è¯·æ±‚åŸŸçš„ä¿¡æ¯æ²¡äº†</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915154421693.png" alt="image-20240915154421693">	</p>
<p>sessionåŸŸåœ¨æœ‰æ•ˆæœŸå†…éƒ½æ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œå¯ä»¥æ§åˆ¶ä¸€æ®µæ—¶é—´å†…ç”¨æˆ·çš„ç™»å½•çŠ¶æ€</p>
<p>applicationåŸŸçš„ç”Ÿå‘½å‘¨æœŸå°±éšç€Tomcatåº”ç”¨çš„æ­å»ºå’Œåœæ­¢è€ŒåŒæ—¶å˜åŠ¨äº†ï¼Œæ˜¯æœ€å¤§çš„ä¸€å—ï¼Œåªè¦åº”ç”¨ä¸åœå°±ä¸€ç›´åœ¨</p>
<h2 id="2-filter"><a href="#2-filter" class="headerlink" title="2. filter"></a>2. filter</h2><h3 id="2-1-filteræ¦‚è¿°"><a href="#2-1-filteræ¦‚è¿°" class="headerlink" title="2.1 filteræ¦‚è¿°"></a>2.1 filteræ¦‚è¿°</h3><p>Filteræ˜¯Java EEçš„æŠ€æœ¯è§„èŒƒä¹‹ä¸€ï¼Œå¯¹ç›®æ ‡èµ„æºè¯·æ±‚è¿›è¡Œè¿‡æ»¤çš„è§„èŒƒï¼Œæ˜¯<code>æœ€ä¸ºå®ç”¨çš„æŠ€æœ¯ä¹‹ä¸€</code></p>
<ul>
<li>Filteræ¥å£å®šä¹‰äº†è¿‡æ»¤å™¨çš„å¼€å‘è§„èŒƒï¼Œæ‰€æœ‰æ¥å£å‡éµå¾ªè¯¥æ¥å£<ul>
<li>è¿™é‡Œinitå’Œdestroyç”¨åˆ°äº†jdk1.8ç‰¹æ€§çš„defaultï¼Œä½¿å¾—æˆ‘ä»¬å®ç°è¯¥æ¥å£æ—¶æ— é¡»å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> jakarta.servlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException, ServletException;</span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Filterçš„å·¥ä½œä½ç½®æ˜¯é¡¹ç›®ä¸­æ‰€æœ‰ç›®æ ‡èµ„æºä¹‹å‰ï¼Œå®¹å™¨åœ¨åˆ›å»º<code>HttpServletRequest</code>å’Œ<code>HttpServletResponse</code>ä¹‹åï¼Œä¼šå…ˆè°ƒç”¨<code>doFilter</code>æ–¹æ³•<ul>
<li>doFilteræ–¹æ³•å¯ä»¥æ§åˆ¶è¯·æ±‚æ˜¯å¦ç»§ç»­ï¼Œå¦‚æœæ”¾è¡Œï¼Œåˆ™ç»§ç»­ï¼Œå¦åˆ™è¯·æ±‚è¢«æ‹¦ä½ï¼Œè¿‡æ»¤å™¨æœ¬èº«åšå‡ºå“åº”</li>
<li>Filterä¸ä»…ä»…æ˜¯å¯ä»¥å¯¹è¯·æ±‚åšå“åº”ï¼Œä¹Ÿå¯ä»¥åœ¨ç›®æ ‡èµ„æºå“åº”å‰ï¼Œå¯¹å“åº”å†æ¬¡å¤„ç†</li>
</ul>
</li>
<li>Filteræ˜¯GOFä¸­è´£ä»»é“¾çš„å…¸å‹æ¡ˆä¾‹</li>
<li>å¸¸ç”¨åº”ç”¨åŒ…æ‹¬ä½†ä¸é™äºï¼šç™»å½•æƒé™ã€ä¹±ç å¤„ç†ã€è¿‡æ»¤æ•æ„Ÿå­—ç¬¦ã€æ—¥å¿—è®°å½•ã€æ€§èƒ½åˆ†æã€äº‹åŠ¡æ§åˆ¶ã€è·¨åŸŸå¤„ç†â€¦<ul>
<li>ç”Ÿæ´»æ¡ˆä¾‹ï¼šåœ°é“ç«™å®‰ä¿ï¼Œä¼šæ£€æŸ¥è¡Œæï¼Œå†æ ¹æ®æƒ…å†µæ”¾è¡Œè¿˜æ˜¯æ‹¦ä¸‹</li>
</ul>
</li>
</ul>
<p>å›¾è§£ï¼ˆfilterä¹Ÿå¯ä»¥åœ¨è½¬æ¢æˆå“åº”æŠ¥æ–‡å‰ï¼ŒæŠ“å“åº”å¯¹è±¡respï¼‰</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915171630278.png" alt="image-20240915171630278">	</p>
<p>flteræ¥å£ä¸‹è§„å®šçš„APIå’Œè¯´æ˜å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>API</th>
<th>ç›®æ ‡</th>
</tr>
</thead>
<tbody><tr>
<td>default public void init(FilterConfig filterConfig)</td>
<td>åˆå§‹åŒ–æ–¹æ³•,ç”±å®¹å™¨è°ƒç”¨å¹¶ä¼ å…¥åˆå§‹é…ç½®ä¿¡æ¯filterConfigå¯¹è±¡</td>
</tr>
<tr>
<td>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</td>
<td>è¿‡æ»¤æ–¹æ³•,æ ¸å¿ƒæ–¹æ³•,è¿‡æ»¤è¯·æ±‚,å†³å®šæ˜¯å¦æ”¾è¡Œ,å“åº”ä¹‹å‰çš„å…¶ä»–å¤„ç†ç­‰éƒ½åœ¨è¯¥æ–¹æ³•ä¸­</td>
</tr>
<tr>
<td>default public void destroy()</td>
<td>é”€æ¯æ–¹æ³•,å®¹å™¨åœ¨å›æ”¶è¿‡æ»¤å™¨å¯¹è±¡ä¹‹å‰è°ƒç”¨çš„æ–¹æ³•</td>
</tr>
</tbody></table>
<h3 id="2-2-filterä½¿ç”¨â€”â€”è®°å½•æ—¥å¿—"><a href="#2-2-filterä½¿ç”¨â€”â€”è®°å½•æ—¥å¿—" class="headerlink" title="2.2 filterä½¿ç”¨â€”â€”è®°å½•æ—¥å¿—"></a>2.2 filterä½¿ç”¨â€”â€”è®°å½•æ—¥å¿—</h3><p>æˆ‘ä»¬è¿™é‡Œå¸Œæœ›å®ç°ä¸€ä¸ªæ—¥å¿—è®°å½•ï¼Œåˆ™å¯ä»¥è€ƒè™‘é€šè¿‡filterå¸®åŠ©æˆ‘ä»¬è®°å½•reqå’Œrespçš„å†…å®¹ï¼Œå› ä¸ºfilteræ˜¯è¿™ä¸¤ä¸ªæŠ¥æ–‡çš„å¿…ç»ä¹‹è·¯</p>
<p>è¿™é‡Œæˆ‘ä»¬ç®€å•çš„å®ç°çš„æ—¥å¿—å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾ç›®æ ‡èµ„æºå‰ï¼Œè®°å½•ç”¨æˆ·çš„<code>è¯·æ±‚è·¯å¾„</code></li>
<li>å“åº”æœåŠ¡å™¨å¤„ç†ç”¨æˆ·è¯·æ±‚çš„<code>æ—¶é—´</code></li>
<li>å°†<code>æ—¥å¿—è®°å½•</code>å†™å…¥æ–‡ä»¶ï¼ˆå¾…å®ç°ï¼‰ï¼Œå¯ä»¥å…ˆç®€å•çš„åœ¨æ§åˆ¶å°è¾“å‡º</li>
</ul>
<p>è¿‡æ»¤å™¨filterï¼šLoggingFilter</p>
<ul>
<li>å®ç°è¿‡æ»¤ï¼š1. å®ç°<code>Filteræ¥å£</code>ï¼›2. é‡å†™<code>doFilteræ–¹æ³•</code>ï¼›3. é…ç½®<code>æ˜ å°„è·¯å¾„</code>ï¼ˆannotation &#x2F; xmlï¼‰</li>
<li>ç¼–å†™æŠ€å·§ï¼šè®°å½•æ—¥æœŸçš„æ ¼å¼å¯ä»¥ä½œä¸ºä¸€ä¸ªç§æœ‰å˜é‡ä»¥ä¾¿å¤ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.filters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ—¥å¿—è¿‡æ»¤å™¨ï¼Œç”¨äºè®°å½•è¯·æ±‚çš„å†å²ï¼Œå°†æ—¥å¿—æš‚æ—¶æ‰“å°åˆ°æ§åˆ¶å°ï¼Œåç»­æœ‰æ¡†æ¶åå¯ä»¥æ‰“åˆ°æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * 1. å®ç°Filter æ¥å£</span></span><br><span class="line"><span class="comment"> * 2. é‡å†™è¿‡æ»¤æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * 3. é…ç½®è¿‡æ»¤å™¨çš„æ˜ å°„è·¯å¾„</span></span><br><span class="line"><span class="comment"> *      web.xml</span></span><br><span class="line"><span class="comment"> *      æ³¨è§£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">SimpleDateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        è¿‡æ»¤è¯·æ±‚å’Œå“åº”çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">            1. è¯·æ±‚åˆ°è¾¾ç›®æ ‡èµ„æºå‰ï¼Œå…ˆç»è¿‡è¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">            2. è¯¥æ–¹æ³•æœ‰èƒ½åŠ›æ§åˆ¶è¯·æ±‚æ˜¯å¦å¯ä»¥å¾€ååˆ°è¾¾ç›®æ ‡èµ„æºï¼Œä¹Ÿå¯ä»¥ç›´æ¥å‘å®¢æˆ·ç«¯åšå“åº”</span></span><br><span class="line"><span class="comment">            3. è¯·æ±‚åˆ°ç›®æ ‡èµ„æºåï¼Œåœ¨å“åº”ä¹‹å‰ä¹ŸåŒæ ·ä¼šç»è¿‡è¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1. è¯·æ±‚åˆ°è¾¾ç›®æ ‡èµ„æºçš„æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="comment">     *      åˆ¤æ–­æ˜¯å¦èƒ½ç™»å½•</span></span><br><span class="line"><span class="comment">     *      æ ¡éªŒæƒé™æ˜¯å¦æ»¡è¶³</span></span><br><span class="line"><span class="comment">     * 2. æ”¾è¡Œä»£ç </span></span><br><span class="line"><span class="comment">     * 3. å“åº”å‰ï¼ˆHttpServletResponseå¯¹è±¡è½¬æ¢æˆå“åº”æŠ¥æ–‡ä¹‹å‰ï¼‰çš„åŠŸèƒ½ä»£ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”±äºæˆ‘ä»¬æ˜ç¡®æ˜¯é€šè¿‡HTTPåè®®é€šä¿¡ï¼Œå‚æ•°çˆ¶è½¬å­,è·å¾—æ›´ä¸°å¯Œçš„req respåŠŸèƒ½æ–¹æ³•</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯·æ±‚åˆ°è¾¾ç›®æ ‡èµ„æºURIå‰ yyyy-MM-dd HH:mm:ss ****è¢«è®¿é—®äº†</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        <span class="type">String</span> <span class="variable">dateTime</span> <span class="operator">=</span> dateFormat.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        <span class="type">String</span> <span class="variable">beforeLogging</span> <span class="operator">=</span> requestURI + <span class="string">&quot;åœ¨&quot;</span> + dateTime + <span class="string">&quot;æ—¶é—´è¢«è®¿é—®äº†&quot;</span>;</span><br><span class="line">        System.out.println(beforeLogging);</span><br><span class="line"></span><br><span class="line">        <span class="type">Long</span> <span class="variable">t1</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. é€šè¿‡è¿‡æ»¤å™¨é“¾è¡¨ æ”¾è¡Œï¼Œå¦‚æœè¿™è¡Œæ²¡æœ‰æ‰§è¡Œåˆ°ï¼Œå°†ç›´æ¥æ‰“å›è¯·æ±‚</span></span><br><span class="line">        <span class="comment">// 2. reqå’Œrespå¯¹è±¡ä¼šç»§ç»­ä¼ é€’ç»™ä¸‹ä¸€ä¸ªfilter / æœåŠ¡å™¨ï¼Œå³ä¸ä¼šäº§ç”Ÿæ–°çš„req respå¯¹è±¡</span></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">t2</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å“åº”å‰çš„åŠŸèƒ½ä»£ç  ***èµ„æº åœ¨yyyy-MM-dd HH:mm:ss çš„è¯·æ±‚è€—æ—¶ x æ¯«ç§’</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">afterLogging</span> <span class="operator">=</span> requestURI + <span class="string">&quot;èµ„æºåœ¨&quot;</span> + dateTime + <span class="string">&quot;çš„è¯·æ±‚è€—æ—¶&quot;</span> + (t2 - t1) +  <span class="string">&quot;æ¯«ç§’&quot;</span>;</span><br><span class="line">        System.out.println(afterLogging);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>XMLé…ç½®æ˜ å°„è·¯å¾„ï¼ˆè¿™é‡Œè¯¦ç»†è¯´ä¸€ä¸‹XMLï¼Œåé¢åŒç†å°±copyä¸€ä¸‹äº†ï¼Œå’ŒServletå·®ä¸å¤šï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªé€šè¿‡servlet-nameçš„è®¿é—®è·¯å¾„ï¼Œæ³¨è§£æ˜¯ç®€åŒ–å†™æ³•ï¼Œæœ€åè¯´ï¼‰</p>
<ul>
<li>é…ç½®<code>è¿‡æ»¤å™¨</code>&lt;filter&gt;<ul>
<li>&lt;filter-name&gt; ï¼šfilterçš„åˆ«å</li>
<li>&lt;filter-class&gt; ï¼š filterçš„ç±»è·¯å¾„</li>
</ul>
</li>
<li>é…ç½®è¿‡æ»¤å™¨çš„<code>æ˜ å°„è·¯å¾„</code>&lt;filter-mapping&gt;<ul>
<li>&lt;filter-name&gt; ï¼šfilterçš„åˆ«å</li>
<li>&lt;url-pattern&gt; ï¼šå¯¹æŒ‡å®šè·¯å¾„è¿‡æ»¤ï¼Œè¿™é‡Œéƒ½æ˜¯ç”¨æ–œæ å¼€å¤´çš„ï¼Œç›¸å¯¹è·¯å¾„å°±æ¯”è¾ƒéš¾å®šä½ï¼Ÿ</li>
<li>&lt;servlet-name&gt; ï¼šservletçš„åˆ«åï¼Œå¯¹æŒ‡å®šservletè¿‡æ»¤</li>
</ul>
</li>
<li>æ³¨ï¼šä¸€ä¸ªfilter-mappingå¯ä»¥æœ‰å¤šä¸ªurl-pattern å’Œ servlet-nameç»„åˆ</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        é…ç½®è¿‡æ»¤å™¨ï¼ˆå’ŒServletç±»ä¼¼ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>loggingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filters.LoggingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--        é…ç½®è¿‡æ»¤å™¨çš„è·¯å¾„ï¼ˆurl-nameæˆ–è€…servlet-nameä¸¤ç§æ–¹å¼å®šä½ï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>loggingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    url-pattern æ ¹æ®è¯·æ±‚è·¯å¾„ï¼Œå¯¹æŒ‡å®šè¯·æ±‚è¿‡æ»¤--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        /*          è¿‡æ»¤å…¨éƒ¨èµ„æº--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        /a/*        è¿‡æ»¤aå¼€å¤´çš„å…¨éƒ¨èµ„æº--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        *.html      è¿‡æ»¤åç¼€--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        /servlet1   å¯¹servlet1è¯·æ±‚è¿‡æ»¤--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    servlet-name æ ¹æ®è¯·æ±‚çš„servletåˆ«åï¼Œå¯¹æŒ‡å®šservletèµ„æºè¿‡æ»¤--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    ä¸€ä¸ªfilter-mappingå¯å­˜åœ¨å¤šä¸ªurl-patternå’Œservlet-name--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/static<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.html<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>æ¥ä¸‹æ¥é…ç½®servletè´Ÿè´£ä¸»è¦æ˜¯å“åº”æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(value = &quot;/servlet1&quot;, name = &quot;servlet1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Servlet1 service invoked...&quot;</span>);</span><br><span class="line">        resp.getWriter().write(<span class="string">&quot;Servlet1 Message...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ§åˆ¶å°è¾“å‡º</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915175310193.png" alt="image-20240915175310193">	</p>
<p>ä¸Šè¿°è¿‡ç¨‹å›¾è§£</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915174757993.png" alt="image-20240915174757993">	</p>
<h3 id="2-3-filterç”Ÿå‘½å‘¨æœŸ"><a href="#2-3-filterç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.3 filterç”Ÿå‘½å‘¨æœŸ"></a>2.3 filterç”Ÿå‘½å‘¨æœŸ</h3><ul>
<li>filterçš„å£°æ˜å‘¨æœŸå’ŒServletç±»ä¼¼ï¼Œå°‘äº†ä¸€ä¸ª<code>load-on-startup</code>çš„é…ç½®ï¼Œä»–é»˜è®¤æ˜¯ç³»ç»Ÿå¯åŠ¨ç«‹å³æ„é€ </li>
<li>ä¸»è¦æ˜¯initæ–¹æ³•ï¼Œå‚æ•°é‡Œé¢åŒ…å«äº†filterConfigå‚æ•°ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åŠ å…¥çš„é…ç½®ï¼Œç±»ä¼¼äºServletï¼ŒgetNamesæ–¹æ³• + ç±»ä¼¼äºHashMapçš„whileå¾ªç¯éå†</li>
</ul>
<table>
<thead>
<tr>
<th>é˜¶æ®µ</th>
<th>å¯¹åº”æ–¹æ³•</th>
<th>æ‰§è¡Œæ—¶æœº</th>
<th>æ‰§è¡Œæ¬¡æ•°</th>
</tr>
</thead>
<tbody><tr>
<td>åˆ›å»ºå¯¹è±¡</td>
<td>æ„é€ å™¨</td>
<td>webåº”ç”¨å¯åŠ¨æ—¶</td>
<td>1</td>
</tr>
<tr>
<td>åˆå§‹åŒ–æ–¹æ³•</td>
<td>void init(FilterConfig filterConfig)</td>
<td>æ„é€ å®Œæ¯•</td>
<td>1</td>
</tr>
<tr>
<td>è¿‡æ»¤è¯·æ±‚</td>
<td>void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</td>
<td>æ¯æ¬¡è¯·æ±‚</td>
<td>å¤šæ¬¡</td>
</tr>
<tr>
<td>é”€æ¯</td>
<td>default void destroy()</td>
<td>webåº”ç”¨å…³é—­æ—¶</td>
<td>1æ¬¡</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.filters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LifeCycleFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *      1. æ„é€        æ„é€ å™¨         é¡¹ç›®å¯åŠ¨      1</span></span><br><span class="line"><span class="comment">     *      2. åˆå§‹åŒ–      init         æ„é€ å®Œæ¯•      1</span></span><br><span class="line"><span class="comment">     *      3. è¿‡æ»¤       doFilter      æ¯æ¬¡è¯·æ±‚      å¤šæ¬¡</span></span><br><span class="line"><span class="comment">     *      4. é”€æ¯       destroy       æœåŠ¡å…³é—­      1</span></span><br><span class="line"><span class="comment">     *      initå’Œdestroyä½¿ç”¨defaultä¿®é¥°ï¼Œä¸é‡å†™ä¹Ÿä¸ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">     *      å¯åŠ¨åfilteré»˜è®¤ç«‹å³æ„é€ å¯åŠ¨ï¼Œä¸ä¼šåƒServletä¸€æ ·é€šè¿‡loadOnStartUpæ§åˆ¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LifeCycleFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter constructor...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter init...&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;filter config: &quot;</span>);</span><br><span class="line">        Enumeration&lt;String&gt; initParameterNames = filterConfig.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span> (initParameterNames.hasMoreElements()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">initParameterName</span> <span class="operator">=</span> initParameterNames.nextElement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">intParameterValue</span> <span class="operator">=</span> filterConfig.getInitParameter(initParameterName);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t&quot;</span> + initParameterName + <span class="string">&quot;=&gt;&quot;</span> + intParameterValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter doFilter...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Filter destroy...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>XMLé…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>lifeCycleFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filters.LifeCycleFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>dateTimePattern<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>yyyy-MM-dd HH:mm:ss<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>lifeCycleFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>è¾“å‡ºä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Filter constructor...</span><br><span class="line">Filter init...</span><br><span class="line">filter config: </span><br><span class="line">	dateTimePattern=&gt;yyyy-MM-<span class="built_in">dd</span> HH:mm:ss</span><br><span class="line">Filter doFilter...</span><br><span class="line">/demo08/servlet1åœ¨2024-09-15 19:26:18æ—¶é—´è¢«è®¿é—®äº†</span><br><span class="line">Servlet1 service invoked...</span><br><span class="line">/demo08/servlet1èµ„æºåœ¨2024-09-15 19:26:18çš„è¯·æ±‚è€—æ—¶97æ¯«ç§’</span><br><span class="line">Filter destroy...</span><br></pre></td></tr></table></figure>



<h3 id="2-4-FilterChain"><a href="#2-4-FilterChain" class="headerlink" title="2.4 FilterChain"></a>2.4 FilterChain</h3><p>æˆ‘ä»¬ä¹‹å‰åœ¨è°ƒç”¨dofilteræ–¹æ³•æ—¶ï¼Œå‚æ•°å‘ç°æ˜¯FIlterChainçš„å¯¹è±¡ï¼Œé‚£ä¹ˆç±»æ¯”å•é“¾è¡¨ï¼Œæˆ‘ä»¬å½“å‰æ˜¯å¯ä»¥æ¨æ–­å‡ºæ˜¯æœ‰å¤šä¸ªFilterçš„ï¼Œç„¶åæœ‰ä¸€å®šçš„å…ˆåé¡ºåº</p>
<p>è€ŒFilterChainçš„å…ˆåè§„åˆ™æ˜¯è¿™æ ·çš„ï¼ˆåˆ†æˆä¸¤ç§æƒ…å†µï¼‰ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ’åºè§„åˆ™ï¼šæŒ‰ç…§<code>&lt;filter-mapping&gt;</code>çš„é¡ºåº</li>
<li>ç¬¬äºŒæ’åºè§„åˆ™ï¼šæŒ‰ç…§<code>&lt;servlet-name&gt;</code>çš„é¡ºåºï¼ˆä¼˜å…ˆçº§è¦ä½ï¼‰</li>
<li>æ³¨ï¼šå¦‚æœæ˜¯æ³¨è§£çš„æ–¹å¼ï¼Œæ˜¯æ ¹æ®ç±»åæ¥æ’åºçš„</li>
</ul>
<blockquote>
<p>æ³¨ï¼šæ¯ä¸ªè¿‡æ»¤å™¨è¿‡æ»¤çš„èŒƒå›´æ˜¯ä¸åŒçš„ï¼Œå³å®¢æˆ·è®¿é—®ä¸åŒçš„ç›®æ ‡èµ„æºï¼Œè¿‡æ»¤å™¨çš„ä¸ªæ•°æ˜¯å¯ä»¥ä¸ä¸€æ ·çš„</p>
</blockquote>
<p>ä¸Šè¿°è¿‡ç¨‹çš„å›¾è§£ï¼š</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915193259955.png" alt="image-20240915193259955">	</p>
<p>æ–°å»º3ä¸ªåŠŸèƒ½ç›¸åŒçš„filterï¼Œä»¥filter1ä¸ºä¾‹ï¼Œå…¶ä»–ä¸¤ä¸ªfilteråŒç†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.filters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ³¨ï¼šå¦‚æœæ˜¯ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®Filterï¼Œæ˜¯é€šè¿‡ç±»åçš„é¡ºåºæ¥ç»å½“è¿‡æ»¤å™¨å®é™…çš„æ‰§è¡Œé¡ºåºï¼ˆå¦‚æœæœ‰é¡ºåºè¦æ±‚ï¼Œéœ€è¦æ³¨æ„ç±»å f1_testï¼‰</span></span><br><span class="line"><span class="comment"> * filteræŠ€æœ¯ä¸»è¦å…³æ³¨çš„å°±æ˜¯é¡ºåºé—®é¢˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/servlet1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Filter1</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;filter1 before doFilter invoked&quot;</span>);</span><br><span class="line"></span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;filter1 after doFilter invoked&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>è¿›è¡ŒXMLé…ç½®ï¼ˆæ³¨æ„æˆ‘ä»¬å°†filter-mappingçš„é¡ºåºè°ƒæ•´ä¸º2-1-3ï¼‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®å¤šä¸ªè¿‡æ»¤å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter1<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filters.Filter1<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filters.Filter2<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter3<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filters.Filter3<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- filter-mappingæ ‡ç­¾çš„é¡ºåºæ§åˆ¶è¿‡æ»¤å™¨çš„è¿è¡Œé¡ºåº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter1<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter3<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servlet1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>è¿è¡Œç»“æœ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">filter2 before doFilter invoked</span><br><span class="line">filter1 before doFilter invoked</span><br><span class="line">filter3 before doFilter invoked</span><br><span class="line">Filter doFilter...</span><br><span class="line">/demo08/servlet1åœ¨2024-09-15 19:26:18æ—¶é—´è¢«è®¿é—®äº†</span><br><span class="line">Filter doFilter...</span><br><span class="line">Servlet1 service invoked...</span><br><span class="line">/demo08/servlet1èµ„æºåœ¨2024-09-15 19:26:18çš„è¯·æ±‚è€—æ—¶97æ¯«ç§’</span><br><span class="line">filter3 after doFilter invoked</span><br><span class="line">filter1 after doFilter invoked</span><br><span class="line">filter2 after doFilter invoked</span><br></pre></td></tr></table></figure>



<p>ä¸Šè¿°ä»£ç è¿è¡Œå›¾è§£</p>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915194253429.png" alt="image-20240915194253429">	</p>
<h3 id="2-4-æ³¨è§£æ–¹å¼é…ç½®filter"><a href="#2-4-æ³¨è§£æ–¹å¼é…ç½®filter" class="headerlink" title="2.4 æ³¨è§£æ–¹å¼é…ç½®filter"></a>2.4 æ³¨è§£æ–¹å¼é…ç½®filter</h3><p>ä½¿ç”¨<code>@WebFilter</code>æ¥æ›¿ä»£ä¸Šè¿°çš„XMLé…ç½®ï¼Œé€šè¿‡é˜…è¯»æºç ï¼Œå¯ä»¥å¾—åˆ°å‡ ä¸ªé‡è¦ç»“è®º</p>
<ul>
<li><p>ä¿®é¥°çš„æ˜¯ç±»ï¼Œè¿è¡Œæ—¶ç”Ÿæ•ˆï¼Œå› ä¸ºæ¶‰åŠåˆ°é€šè¿‡class-pathæ¥åå°„å¯¹åº”çš„ç±»ï¼Œåé¢javadocçš„æ—¶å€™è¿™ä¸ªä¹Ÿä¼šè®°å½•åˆ°</p>
</li>
<li><p>åˆå§‹å‚æ•°å’ŒServletä¸€æ ·ï¼Œé€šè¿‡@WebInitParamä¼ å…¥è‹¥å¹²ä¸ªk-vå³å¯</p>
</li>
<li><p>valueæ˜¯é»˜è®¤çš„æ˜ å°„è·¯å¾„ï¼Œä½œç”¨å°±æ˜¯å½“åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥çœç•¥ä¸å†™ï¼Œå¦‚<code>@WebFilter(&quot;/servlet1&quot;)</code></p>
</li>
<li><p>å› ä¸ºå¯èƒ½æœ‰å¤šä¸ªæ˜ å°„è·¯å¾„ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°urlPatternså’ŒservletNameséƒ½æ˜¯<code>String[]</code>ç±»å‹ï¼Œåˆ°æ—¶å€™ä¼ å…¥çš„ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> WebFilter &#123;</span><br><span class="line">    WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">filterName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String[] servletNames() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æˆ‘ä»¬ä¹‹å‰çš„æ—¥å¿—è®°å½•ä¸ºä¾‹ï¼ŒXMLè½¬æ¢æˆæ³¨è§£</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®filter,å¹¶ä¸ºfilterèµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>loggingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.atguigu.filters.LoggingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®filterçš„åˆå§‹å‚æ•°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>dateTimePattern<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>yyyy-MM-dd HH:mm:ss<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ä¸ºåˆ«åå¯¹åº”çš„filteré…ç½®è¦è¿‡æ»¤çš„ç›®æ ‡èµ„æº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>loggingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é€šè¿‡æ˜ å°„è·¯å¾„ç¡®å®šè¿‡æ»¤èµ„æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletA<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é€šè¿‡åç¼€åç¡®å®šè¿‡æ»¤èµ„æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.html<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é€šè¿‡servletåˆ«åç¡®å®šè¿‡æ»¤èµ„æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletBName<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebFilter(</span></span><br><span class="line"><span class="meta">        filterName = &quot;loggingFilter&quot;,</span></span><br><span class="line"><span class="meta">        initParams = &#123;@WebInitParam(name=&quot;dateTimePattern&quot;,value=&quot;yyyy-MM-dd HH:mm:ss&quot;)&#125;,</span></span><br><span class="line"><span class="meta">        urlPatterns = &#123;&quot;/servletA&quot;,&quot;*.html&quot;&#125;,</span></span><br><span class="line"><span class="meta">        servletNames = &#123;&quot;servletBName&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggingFilter</span>  <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-listener"><a href="#3-listener" class="headerlink" title="3. listener"></a>3. listener</h2><h3 id="3-1-listeneræ¦‚è¿°"><a href="#3-1-listeneræ¦‚è¿°" class="headerlink" title="3.1 listeneræ¦‚è¿°"></a>3.1 listeneræ¦‚è¿°</h3><blockquote>
<p>ç›‘å¬å™¨ï¼šè¿™é‡Œç›‘å¬çš„æ˜¯åŸŸå¯¹è±¡å‘ç”Ÿäº‹ä»¶æˆ–çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œå¹¶è¿›è¡Œå“åº”çš„å¤„ç†</p>
</blockquote>
<ul>
<li>ç›‘å¬å™¨æ˜¯GOFè®¾è®¡æ¨¡å¼ï¼Œè§‚å¯Ÿè€…æ¨¡å¼çš„å…¸å‹æ¡ˆä¾‹<ul>
<li>è§‚å¯Ÿè€…æ¨¡å¼: å½“è¢«è§‚å¯Ÿçš„å¯¹è±¡å‘ç”ŸæŸäº›æ”¹å˜æ—¶, è§‚å¯Ÿè€…è‡ªåŠ¨é‡‡å–å¯¹åº”çš„è¡ŒåŠ¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼</li>
</ul>
</li>
<li>ç›‘å¬å™¨ç±»ä¼¼äºJSçš„äº‹ä»¶ï¼Œå½“è¢«è§‚å¯Ÿå¯¹è±¡å‘ç”Ÿæƒ…å†µæ—¶ï¼Œè‡ªåŠ¨è§¦å‘ä»£ç æ‰§è¡Œ</li>
<li>æ³¨æ„ï¼šwebé¡¹ç›®çš„ç›‘å¬å™¨ä»…ç›‘å¬ä¸‰å¤§åŸŸå¯¹è±¡ç›¸å…³çš„äº‹ä»¶ï¼Œå…¶ä»–ç»„ä»¶æ²¡æœ‰</li>
</ul>
<blockquote>
<p>ç›‘å¬å™¨çš„åˆ†ç±»</p>
</blockquote>
<ul>
<li>webä¸€å…±æœ‰8ç§ç›‘å¬å™¨æ¥å£ï¼Œå¯æŒ‰å¦‚ä¸‹è§„åˆ™åˆ†ç±»ï¼š</li>
<li>æŒ‰ç›‘å¬çš„å¯¹è±¡åˆ’åˆ†<ul>
<li>applicationåŸŸç›‘å¬å™¨ ServletContextListener  ServletContextAttributeListener </li>
<li>sessionåŸŸç›‘å¬å™¨ HttpSessionListener  HttpSessionAttributeListener  HttpSessionBindingListener  HttpSessionActivationListener  </li>
<li>requeståŸŸç›‘å¬å™¨ ServletRequestListener  ServletRequestAttributeListener</li>
</ul>
</li>
<li>æŒ‰ç›‘å¬çš„äº‹ä»¶åˆ†<ul>
<li>åŸŸå¯¹è±¡çš„åˆ›å»ºå’Œé”€æ¯ç›‘å¬å™¨ ServletContextListener   HttpSessionListener   ServletRequestListener  </li>
<li>åŸŸå¯¹è±¡æ•°æ®å¢åˆ æ”¹äº‹ä»¶ç›‘å¬å™¨ ServletContextAttributeListener  HttpSessionAttributeListener   ServletRequestAttributeListener </li>
<li>å…¶ä»–ç›‘å¬å™¨  HttpSessionBindingListener  HttpSessionActivationListener</li>
</ul>
</li>
</ul>
<h3 id="3-2-listenerå…­ä¸ªä¸»è¦æ¥å£"><a href="#3-2-listenerå…­ä¸ªä¸»è¦æ¥å£" class="headerlink" title="3.2 listenerå…­ä¸ªä¸»è¦æ¥å£"></a>3.2 listenerå…­ä¸ªä¸»è¦æ¥å£</h3><h4 id="3-2-1-applicationåŸŸ"><a href="#3-2-1-applicationåŸŸ" class="headerlink" title="3.2.1 applicationåŸŸ"></a>3.2.1 applicationåŸŸ</h4><blockquote>
<p>ServletContextListener  ç›‘å¬ServletContextå¯¹è±¡çš„åˆ›å»ºä¸é”€æ¯</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>contextInitialized(ServletContextEvent sce)</td>
<td>ServletContextåˆ›å»ºæ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>contextDestroyed(ServletContextEvent sce)</td>
<td>ServletContexté”€æ¯æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>ServletContextEventå¯¹è±¡ä»£è¡¨ä»ServletContextå¯¹è±¡èº«ä¸Šæ•è·åˆ°çš„äº‹ä»¶ï¼Œé€šè¿‡è¿™ä¸ªäº‹ä»¶å¯¹è±¡æˆ‘ä»¬å¯ä»¥è·å–åˆ°ServletContextå¯¹è±¡ã€‚</li>
</ul>
<blockquote>
<p>ServletContextAttributeListener ç›‘å¬ServletContextä¸­å±æ€§çš„æ·»åŠ ã€ç§»é™¤å’Œä¿®æ”¹</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>attributeAdded(ServletContextAttributeEvent scab)</td>
<td>å‘ServletContextä¸­æ·»åŠ å±æ€§æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>attributeRemoved(ServletContextAttributeEvent scab)</td>
<td>ä»ServletContextä¸­ç§»é™¤å±æ€§æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>attributeReplaced(ServletContextAttributeEvent scab)</td>
<td>å½“ServletContextä¸­çš„å±æ€§è¢«ä¿®æ”¹æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>ServletContextAttributeEventå¯¹è±¡ä»£è¡¨å±æ€§å˜åŒ–äº‹ä»¶ï¼Œå®ƒåŒ…å«çš„æ–¹æ³•å¦‚ä¸‹ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>getName()</td>
<td>è·å–ä¿®æ”¹æˆ–æ·»åŠ çš„å±æ€§å</td>
</tr>
<tr>
<td>getValue()</td>
<td>è·å–è¢«ä¿®æ”¹æˆ–æ·»åŠ çš„å±æ€§å€¼</td>
</tr>
<tr>
<td>getServletContext()</td>
<td>è·å–ServletContextå¯¹è±¡</td>
</tr>
</tbody></table>
<p>applicationåŸŸç›‘å¬å™¨ä»£ç </p>
<ul>
<li>æ³¨æ„è¿™é‡Œå¦‚æœè¦æ•æ‰ä¿®æ”¹çš„è¯ï¼Œå‚æ•°é‡Œçš„getValueè·å–çš„æ˜¯æ—§çš„ï¼Œè·å–æ–°çš„éœ€è¦é€šè¿‡è·å–ä¸Šä¸‹æ–‡å†è·å–ä¸€æ¬¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplicationListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span>, ServletContextAttributeListener &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> sce.getServletContext();</span><br><span class="line">        System.out.println(application.hashCode() +  <span class="string">&quot;åº”ç”¨åŸŸåˆå§‹åŒ–äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> sce.getServletContext();</span><br><span class="line">        System.out.println(application.hashCode() +  <span class="string">&quot;åº”ç”¨åŸŸé”€æ¯äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(ServletContextAttributeEvent scae)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> scae.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> scae.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> scae.getValue();</span><br><span class="line">        System.out.println(application.hashCode() + <span class="string">&quot;åº”ç”¨åŸŸå¢åŠ äº†ä¸€ä¸ªé”®å€¼å¯¹ key=&quot;</span> + key + <span class="string">&quot;, value=&quot;</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(ServletContextAttributeEvent scae)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> scae.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> scae.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> scae.getValue();</span><br><span class="line">        System.out.println(application.hashCode() + <span class="string">&quot;åº”ç”¨åŸŸç§»é™¤äº†ä¸€ä¸ªé”®å€¼å¯¹ key=&quot;</span> + key + <span class="string">&quot;, value=&quot;</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(ServletContextAttributeEvent scae)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> scae.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> scae.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> scae.getValue(); <span class="comment">// è¿™é‡Œè·å–çš„æ˜¯æ—§å€¼</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">newValue</span> <span class="operator">=</span> application.getAttribute(key); <span class="comment">// å†è®¿é—®ä¸€æ¬¡å±æ€§å°±æ˜¯æ–°å€¼</span></span><br><span class="line">        System.out.println(application.hashCode() + <span class="string">&quot;åº”ç”¨åŸŸä¿®æ”¹äº†ä¸€ä¸ªé”®å€¼å¯¹ key=&quot;</span> + key + <span class="string">&quot;, value from &quot;</span> + value + <span class="string">&quot; to &quot;</span> + newValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è§¦å‘applicationåŸŸç›‘å¬å™¨ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/servlet1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Servlet1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘åº”ç”¨åŸŸä¸­æ”¾å…¥æ•°æ®</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        application.setAttribute(<span class="string">&quot;keyA&quot;</span>, <span class="string">&quot;valueA&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¿®æ”¹åº”ç”¨åŸŸçš„æ•°æ®</span></span><br><span class="line">        <span class="comment">// ServletContext application = this.getServletContext();</span></span><br><span class="line">        <span class="comment">// application.setAttribute(&quot;keyA&quot;, &quot;valueX&quot;);</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ é™¤åº”ç”¨åŸŸä¸­çš„æ•°æ®</span></span><br><span class="line">        <span class="comment">// ServletContext application = this.getServletContext();</span></span><br><span class="line">        <span class="comment">// application.removeAttribute(&quot;keyA&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>æ§åˆ¶å°è¾“å‡º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Connected to server</span><br><span class="line">210262392åº”ç”¨åŸŸåˆå§‹åŒ–äº†</span><br><span class="line">210262392åº”ç”¨åŸŸå¢åŠ äº†ä¸€ä¸ªé”®å€¼å¯¹ key=keyA, value=valueA</span><br><span class="line">210262392åº”ç”¨åŸŸé”€æ¯äº†</span><br></pre></td></tr></table></figure>





<h4 id="3-2-2-sessionåŸŸ"><a href="#3-2-2-sessionåŸŸ" class="headerlink" title="3.2.2 sessionåŸŸ"></a>3.2.2 sessionåŸŸ</h4><blockquote>
<p>HttpSessionListener  ç›‘å¬HttpSessionå¯¹è±¡çš„åˆ›å»ºä¸é”€æ¯</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>sessionCreated(HttpSessionEvent hse)</td>
<td>HttpSessionå¯¹è±¡åˆ›å»ºæ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>sessionDestroyed(HttpSessionEvent hse)</td>
<td>HttpSessionå¯¹è±¡é”€æ¯æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>HttpSessionEventå¯¹è±¡ä»£è¡¨ä»HttpSessionå¯¹è±¡èº«ä¸Šæ•è·åˆ°çš„äº‹ä»¶ï¼Œé€šè¿‡è¿™ä¸ªäº‹ä»¶å¯¹è±¡æˆ‘ä»¬å¯ä»¥è·å–åˆ°è§¦å‘äº‹ä»¶çš„HttpSessionå¯¹è±¡ã€‚</li>
</ul>
<blockquote>
<p>HttpSessionAttributeListener ç›‘å¬HttpSessionä¸­å±æ€§çš„æ·»åŠ ã€ç§»é™¤å’Œä¿®æ”¹</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>attributeAdded(HttpSessionBindingEvent se)</td>
<td>å‘HttpSessionä¸­æ·»åŠ å±æ€§æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>attributeRemoved(HttpSessionBindingEvent se)</td>
<td>ä»HttpSessionä¸­ç§»é™¤å±æ€§æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>attributeReplaced(HttpSessionBindingEvent se)</td>
<td>å½“HttpSessionä¸­çš„å±æ€§è¢«ä¿®æ”¹æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>HttpSessionBindingEventå¯¹è±¡ä»£è¡¨å±æ€§å˜åŒ–äº‹ä»¶ï¼Œå®ƒåŒ…å«çš„æ–¹æ³•å¦‚ä¸‹ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>getName()</td>
<td>è·å–ä¿®æ”¹æˆ–æ·»åŠ çš„å±æ€§å</td>
</tr>
<tr>
<td>getValue()</td>
<td>è·å–è¢«ä¿®æ”¹æˆ–æ·»åŠ çš„å±æ€§å€¼</td>
</tr>
<tr>
<td>getSession()</td>
<td>è·å–è§¦å‘äº‹ä»¶çš„HttpSessionå¯¹è±¡</td>
</tr>
</tbody></table>
<p>å’ŒapplicationåŒç†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span>, HttpSessionAttributeListener &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬sessionåˆ›å»º</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;session&quot;</span>+session.hashCode()+<span class="string">&quot; created&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬sessioné”€æ¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;session&quot;</span>+session.hashCode()+<span class="string">&quot; destroyed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç›‘å¬æ•°æ®å¢åŠ </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(HttpSessionBindingEvent se)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> se.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> se.getValue();</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;session&quot;</span>+session.hashCode()+<span class="string">&quot; add:&quot;</span>+name+<span class="string">&quot;=&quot;</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç›‘å¬æ•°æ®ç§»é™¤</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(HttpSessionBindingEvent se)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> se.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> se.getValue();</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;session&quot;</span>+session.hashCode()+<span class="string">&quot; remove:&quot;</span>+name+<span class="string">&quot;=&quot;</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç›‘å¬æ•°æ®ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(HttpSessionBindingEvent se)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> se.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> se.getValue();</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">newValue</span> <span class="operator">=</span> session.getAttribute(name);</span><br><span class="line">        System.out.println(<span class="string">&quot;session&quot;</span>+session.hashCode()+<span class="string">&quot; change:&quot;</span>+name+<span class="string">&quot;=&quot;</span>+value+<span class="string">&quot; to &quot;</span>+newValue);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è§¦å‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// servletAç”¨äºåˆ›å»ºsessionå¹¶å‘sessionä¸­æ”¾æ•°æ®</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletA&quot;,name = &quot;servletAName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºsession,å¹¶å‘sessionä¸­æ”¾å…¥æ•°æ®</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line"></span><br><span class="line">        session.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">        session.setAttribute(<span class="string">&quot;k2&quot;</span>,<span class="string">&quot;v2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// servletBç”¨äºä¿®æ”¹åˆ é™¤sessionä¸­çš„æ•°æ®å¹¶æ‰‹åŠ¨è®©sessionä¸å¯ç”¨</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletB&quot;, name = &quot;servletBName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">//  ä¿®æ”¹sessionåŸŸä¸­çš„æ•°æ®</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;value1&quot;</span>);</span><br><span class="line">        <span class="comment">//  åˆ é™¤sessionåŸŸä¸­çš„æ•°æ®</span></span><br><span class="line">        session.removeAttribute(<span class="string">&quot;k2&quot;</span>);</span><br><span class="line">        <span class="comment">// æ‰‹åŠ¨è®©sessionä¸å¯ç”¨</span></span><br><span class="line">        session.invalidate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="3-2-3-requeståŸŸ"><a href="#3-2-3-requeståŸŸ" class="headerlink" title="3.2.3 requeståŸŸ"></a>3.2.3 requeståŸŸ</h4><blockquote>
<p>ServletRequestListener ç›‘å¬ServletRequestå¯¹è±¡çš„åˆ›å»ºä¸é”€æ¯</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>requestInitialized(ServletRequestEvent sre)</td>
<td>ServletRequestå¯¹è±¡åˆ›å»ºæ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>requestDestroyed(ServletRequestEvent sre)</td>
<td>ServletRequestå¯¹è±¡é”€æ¯æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>ServletRequestEventå¯¹è±¡ä»£è¡¨ä»HttpServletRequestå¯¹è±¡èº«ä¸Šæ•è·åˆ°çš„äº‹ä»¶ï¼Œé€šè¿‡è¿™ä¸ªäº‹ä»¶å¯¹è±¡æˆ‘ä»¬å¯ä»¥è·å–åˆ°è§¦å‘äº‹ä»¶çš„HttpServletRequestå¯¹è±¡ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥è·å–åˆ°å½“å‰Webåº”ç”¨çš„ServletContextå¯¹è±¡ã€‚</li>
</ul>
<blockquote>
<p>ServletRequestAttributeListener ç›‘å¬ServletRequestä¸­å±æ€§çš„æ·»åŠ ã€ç§»é™¤å’Œä¿®æ”¹</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>attributeAdded(ServletRequestAttributeEvent srae)</td>
<td>å‘ServletRequestä¸­æ·»åŠ å±æ€§æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>attributeRemoved(ServletRequestAttributeEvent srae)</td>
<td>ä»ServletRequestä¸­ç§»é™¤å±æ€§æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>attributeReplaced(ServletRequestAttributeEvent srae)</td>
<td>å½“ServletRequestä¸­çš„å±æ€§è¢«ä¿®æ”¹æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>ServletRequestAttributeEventå¯¹è±¡ä»£è¡¨å±æ€§å˜åŒ–äº‹ä»¶ï¼Œå®ƒåŒ…å«çš„æ–¹æ³•å¦‚ä¸‹ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>getName()</td>
<td>è·å–ä¿®æ”¹æˆ–æ·»åŠ çš„å±æ€§å</td>
</tr>
<tr>
<td>getValue()</td>
<td>è·å–è¢«ä¿®æ”¹æˆ–æ·»åŠ çš„å±æ€§å€¼</td>
</tr>
<tr>
<td>getServletRequest ()</td>
<td>è·å–è§¦å‘äº‹ä»¶çš„ServletRequestå¯¹è±¡</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestListener</span> <span class="keyword">implements</span> <span class="title class_">ServletRequestListener</span> , ServletRequestAttributeListener &#123;</span><br><span class="line">    <span class="comment">// ç›‘å¬åˆå§‹åŒ–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestInitialized</span><span class="params">(ServletRequestEvent sre)</span> &#123;</span><br><span class="line">        <span class="type">ServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> sre.getServletRequest();</span><br><span class="line">        System.out.println(<span class="string">&quot;request&quot;</span>+request.hashCode()+<span class="string">&quot; initialized&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬é”€æ¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">requestDestroyed</span><span class="params">(ServletRequestEvent sre)</span> &#123;</span><br><span class="line">        <span class="type">ServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> sre.getServletRequest();</span><br><span class="line">        System.out.println(<span class="string">&quot;request&quot;</span>+request.hashCode()+<span class="string">&quot; destoryed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬æ•°æ®å¢åŠ </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeAdded</span><span class="params">(ServletRequestAttributeEvent srae)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> srae.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> srae.getValue();</span><br><span class="line">        <span class="type">ServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> srae.getServletRequest();</span><br><span class="line">        System.out.println(<span class="string">&quot;request&quot;</span>+request.hashCode()+<span class="string">&quot; add:&quot;</span>+name+<span class="string">&quot;=&quot;</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  ç›‘å¬æ•°æ®ç§»é™¤</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeRemoved</span><span class="params">(ServletRequestAttributeEvent srae)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> srae.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> srae.getValue();</span><br><span class="line">        <span class="type">ServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> srae.getServletRequest();</span><br><span class="line">        System.out.println(<span class="string">&quot;request&quot;</span>+request.hashCode()+<span class="string">&quot; remove:&quot;</span>+name+<span class="string">&quot;=&quot;</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç›‘å¬æ•°æ®ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">attributeReplaced</span><span class="params">(ServletRequestAttributeEvent srae)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> srae.getName();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> srae.getValue();</span><br><span class="line">        <span class="type">ServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> srae.getServletRequest();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">newValue</span> <span class="operator">=</span> request.getAttribute(name);</span><br><span class="line">        System.out.println(<span class="string">&quot;request&quot;</span>+request.hashCode()+<span class="string">&quot; change:&quot;</span>+name+<span class="string">&quot;=&quot;</span>+value+<span class="string">&quot; to &quot;</span>+newValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è§¦å‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  servletAå‘è¯·æ±‚åŸŸä¸­æ”¾æ•°æ®</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletA&quot;,name = &quot;servletAName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// å‘requestä¸­å¢åŠ æ•°æ®</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">        req.setAttribute(<span class="string">&quot;k2&quot;</span>,<span class="string">&quot;v2&quot;</span>);</span><br><span class="line">        <span class="comment">// è¯·æ±‚è½¬å‘</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;servletB&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// servletBä¿®æ”¹åˆ é™¤åŸŸä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletB&quot;, name = &quot;servletBName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//  ä¿®æ”¹requeståŸŸä¸­çš„æ•°æ®</span></span><br><span class="line">        req.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;value1&quot;</span>);</span><br><span class="line">        <span class="comment">//  åˆ é™¤sessionåŸŸä¸­çš„æ•°æ®</span></span><br><span class="line">        req.removeAttribute(<span class="string">&quot;k2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="3-3-sessionåŸŸä¸¤ä¸ªç‰¹æ®Šlistenerï¼ˆäº†è§£ï¼‰"><a href="#3-3-sessionåŸŸä¸¤ä¸ªç‰¹æ®Šlistenerï¼ˆäº†è§£ï¼‰" class="headerlink" title="3.3 sessionåŸŸä¸¤ä¸ªç‰¹æ®Šlistenerï¼ˆäº†è§£ï¼‰"></a>3.3 sessionåŸŸä¸¤ä¸ªç‰¹æ®Šlistenerï¼ˆäº†è§£ï¼‰</h3><h4 id="3-3-1-sessionç»‘å®šlistener"><a href="#3-3-1-sessionç»‘å®šlistener" class="headerlink" title="3.3.1 sessionç»‘å®šlistener"></a>3.3.1 sessionç»‘å®šlistener</h4><blockquote>
<p>HttpSessionBindingListener ç›‘å¬å½“å‰ç›‘å¬å™¨å¯¹è±¡åœ¨SessionåŸŸä¸­çš„å¢åŠ ä¸ç§»é™¤</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>valueBound(HttpSessionBindingEvent event)</td>
<td>è¯¥ç±»çš„å®ä¾‹è¢«æ”¾åˆ°SessionåŸŸä¸­æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>valueUnbound(HttpSessionBindingEvent event)</td>
<td>è¯¥ç±»çš„å®ä¾‹ä»Sessionä¸­ç§»é™¤æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>HttpSessionBindingEventå¯¹è±¡ä»£è¡¨å±æ€§å˜åŒ–äº‹ä»¶ï¼Œå®ƒåŒ…å«çš„æ–¹æ³•å¦‚ä¸‹ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>getName()</td>
<td>è·å–å½“å‰äº‹ä»¶æ¶‰åŠçš„å±æ€§å</td>
</tr>
<tr>
<td>getValue()</td>
<td>è·å–å½“å‰äº‹ä»¶æ¶‰åŠçš„å±æ€§å€¼</td>
</tr>
<tr>
<td>getSession()</td>
<td>è·å–è§¦å‘äº‹ä»¶çš„HttpSessionå¯¹è±¡</td>
</tr>
</tbody></table>
<p>ç›‘å¬å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionBindingEvent;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionBindingListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySessionBindingListener</span>  <span class="keyword">implements</span> <span class="title class_">HttpSessionBindingListener</span> &#123;</span><br><span class="line">    <span class="comment">//  ç›‘å¬ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">valueBound</span><span class="params">(HttpSessionBindingEvent event)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> event.getSession();</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> event.getName();</span><br><span class="line">        System.out.println(<span class="string">&quot;MySessionBindingListener&quot;</span>+<span class="built_in">this</span>.hashCode()+<span class="string">&quot; binding into session&quot;</span>+session.hashCode()+<span class="string">&quot; with name &quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬è§£é™¤ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">valueUnbound</span><span class="params">(HttpSessionBindingEvent event)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> event.getSession();</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> event.getName();</span><br><span class="line">        System.out.println(<span class="string">&quot;MySessionBindingListener&quot;</span>+<span class="built_in">this</span>.hashCode()+<span class="string">&quot; unbond outof session&quot;</span>+session.hashCode()+<span class="string">&quot; with name &quot;</span>+name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è§¦å‘ç›‘å¬å™¨</p>
<ul>
<li>sessionå®é™…ä¸Šç»‘å®šæ˜¯æ˜¯listenerå¯¹è±¡ï¼Œå› æ­¤è¦åœ¨sessionçš„setAttributeæ–¹æ³•ä¸­ä¼ å…¥listenerå¯¹è±¡æ¥ç»‘å®š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletA&quot;,name = &quot;servletAName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">// ç»‘å®šç›‘å¬å™¨</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;bindingListener&quot;</span>,<span class="keyword">new</span> <span class="title class_">MySessionBindingListener</span>());</span><br><span class="line">        <span class="comment">// è§£é™¤ç»‘å®šç›‘å¬å™¨</span></span><br><span class="line">        session.removeAttribute(<span class="string">&quot;bindingListener&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="3-3-2-é’åŒ–æ´»åŒ–listener"><a href="#3-3-2-é’åŒ–æ´»åŒ–listener" class="headerlink" title="3.3.2 é’åŒ–æ´»åŒ–listener"></a>3.3.2 é’åŒ–æ´»åŒ–listener</h4><blockquote>
<p>HttpSessionActivationListener  ç›‘å¬æŸä¸ªå¯¹è±¡åœ¨Sessionä¸­çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>sessionWillPassivate(HttpSessionEvent se)</td>
<td>è¯¥ç±»å®ä¾‹å’ŒSessionä¸€èµ·é’åŒ–åˆ°ç¡¬ç›˜æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td>sessionDidActivate(HttpSessionEvent se)</td>
<td>è¯¥ç±»å®ä¾‹å’ŒSessionä¸€èµ·æ´»åŒ–åˆ°å†…å­˜æ—¶è°ƒç”¨</td>
</tr>
</tbody></table>
<ul>
<li>HttpSessionEventå¯¹è±¡ä»£è¡¨äº‹ä»¶å¯¹è±¡ï¼Œé€šè¿‡getSession()æ–¹æ³•è·å–äº‹ä»¶æ¶‰åŠçš„HttpSessionå¯¹è±¡ã€‚</li>
</ul>
<blockquote>
<p>ä»€ä¹ˆæ˜¯é’åŒ–æ´»åŒ–</p>
</blockquote>
<ul>
<li><p>sessionå¯¹è±¡åœ¨æœåŠ¡ç«¯æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼å­˜å‚¨äºå†…å­˜çš„,sessionè¿‡å¤š,æœåŠ¡å™¨çš„å†…å­˜ä¹Ÿæ˜¯åƒä¸æ¶ˆçš„</p>
</li>
<li><p>è€Œä¸”ä¸€æ—¦æœåŠ¡å™¨å‘ç”Ÿé‡å¯,æ‰€æœ‰çš„sessionå¯¹è±¡éƒ½å°†è¢«æ¸…é™¤,ä¹Ÿå°±æ„å‘³ç€sessionä¸­å­˜å‚¨çš„ä¸åŒå®¢æˆ·ç«¯çš„ç™»å½•çŠ¶æ€ä¸¢å¤±</p>
</li>
<li><p>ä¸ºäº†åˆ†æ‘Šå†…å­˜ å‹åŠ›å¹¶ä¸”ä¸ºäº†ä¿è¯sessioné‡å¯ä¸ä¸¢å¤±,æˆ‘ä»¬å¯ä»¥è®¾ç½®å°†sessionè¿›è¡Œé’åŒ–å¤„ç†</p>
</li>
<li><p>åœ¨å…³é—­æœåŠ¡å™¨å‰æˆ–è€…åˆ°è¾¾äº†è®¾å®šæ—¶é—´æ—¶,å¯¹<code>sessionè¿›è¡Œåºåˆ—åŒ–åˆ°ç£ç›˜</code>,è¿™ç§æƒ…å†µå«åš<code>sessionçš„é’åŒ–</code></p>
</li>
<li><p>åœ¨æœåŠ¡å™¨å¯åŠ¨åæˆ–è€…å†æ¬¡è·å–æŸä¸ªsessionæ—¶,å°†<code>ç£ç›˜ä¸Šçš„sessionè¿›è¡Œååºåˆ—åŒ–åˆ°å†…å­˜</code>,è¿™ç§æƒ…å†µå«åš<code>sessionçš„æ´»åŒ–</code></p>
</li>
<li><p>åœ¨webç›®å½•ä¸‹,æ·»åŠ  META-INFä¸‹åˆ›å»ºContext.xml</p>
</li>
<li><p>æ–‡ä»¶ä¸­é…ç½®é’åŒ–</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Context</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.session.PersistentManager&quot;</span> <span class="attr">maxIdleSwap</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Store</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.session.FileStore&quot;</span> <span class="attr">directory</span>=<span class="string">&quot;d:\mysession&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Store</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Manager</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Context</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è¯·æ±‚servletA,è·å¾—session,å¹¶å­˜å…¥æ•°æ®,ç„¶åé‡å¯æœåŠ¡å™¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletA&quot;,name = &quot;servletAName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>è¯·æ±‚servletBè·å–session,è·å–é‡å¯å‰å­˜å…¥çš„æ•°æ®</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletB&quot;, name = &quot;servletBName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletB</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">v1</span> <span class="operator">=</span> session.getAttribute(<span class="string">&quot;k1&quot;</span>);</span><br><span class="line">        System.out.println(v1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚ä½•ç›‘å¬é’åŒ–æ´»åŒ–</p>
</blockquote>
<ul>
<li>å®šä¹‰ç›‘å¬å™¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.listeners;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionActivationListener;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ActivationListener</span>  <span class="keyword">implements</span> <span class="title class_">HttpSessionActivationListener</span>, Serializable &#123;</span><br><span class="line">    <span class="comment">//  ç›‘å¬é’åŒ–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionWillPassivate</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;session with JSESSIONID &quot;</span>+ session.getId()+<span class="string">&quot; will passivate&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  ç›‘å¬æ´»åŒ–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDidActivate</span><span class="params">(HttpSessionEvent se)</span> &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> se.getSession();</span><br><span class="line">        System.out.println(<span class="string">&quot;session with JSESSIONID &quot;</span>+ session.getId()+<span class="string">&quot; did activate&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å®šä¹‰è§¦å‘ç›‘å¬å™¨çš„ä»£ç </li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@WebServlet(urlPatterns = &quot;/servletA&quot;,name = &quot;servletAName&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletA</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;v1&quot;</span>);</span><br><span class="line">        <span class="comment">// æ·»åŠ é’åŒ–æ´»åŒ–ç›‘å¬å™¨</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;activationListener&quot;</span>,<span class="keyword">new</span> <span class="title class_">ActivationListener</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬ä¸‰æœŸ"><a href="#4-æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬ä¸‰æœŸ" class="headerlink" title="4. æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬ä¸‰æœŸ"></a>4. æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬ä¸‰æœŸ</h2><h3 id="4-1-è¿‡æ»¤å™¨æ§åˆ¶ç™»å½•æ ¡éªŒ"><a href="#4-1-è¿‡æ»¤å™¨æ§åˆ¶ç™»å½•æ ¡éªŒ" class="headerlink" title="4.1 è¿‡æ»¤å™¨æ§åˆ¶ç™»å½•æ ¡éªŒ"></a>4.1 è¿‡æ»¤å™¨æ§åˆ¶ç™»å½•æ ¡éªŒ</h3><blockquote>
<p>éœ€æ±‚è¯´æ˜:æœªç™»å½•çŠ¶æ€ä¸‹ä¸å…è®¸è®¿é—®showShedule.htmlå’ŒSysScheduleControllerç›¸å…³å¢åˆ æ”¹å¤„ç†,é‡å®šå‘åˆ°login.html,ç™»å½•æˆåŠŸåå¯ä»¥è‡ªç”±è®¿é—®</p>
</blockquote>
<ul>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡filteræ¥åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦ç™»å½•æˆåŠŸè·å¾—Sessionï¼Œå¦‚æœæ²¡æœ‰Sessionä¼šè¯å°±æ‰“å›ï¼Œå¦åˆ™æ‰§è¡ŒdoFilteræ”¾è¡Œã€‚<ul>
<li>æ˜ å°„è·¯å¾„å°±æ˜¯å¯¹åº”æˆ‘ä»¬ä¸å…è®¸è®¿é—®çš„ä¸¤ä¸ªåœ°å€ï¼Œåªæœ‰æ»¡è¶³ç™»å½•æˆåŠŸæ‰å¯ä»¥è®¿é—®</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.pojo.SysUser;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebListener;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// servletNamesä¹Ÿå¯ä»¥ï¼Œæ˜¯servletæ³¨è§£ä¸­å®šä¹‰nameå±æ€§å³å¯</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &#123;&quot;/showSchedule.html&quot;, &quot;/schedule/*&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å¾—SessionåŸŸå¯¹è±¡ï¼ˆé€šè¿‡Httpå­æ¥å£è·å–ï¼‰</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="comment">// ä»SessionåŸŸä¸­è·å¾—ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">        <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> (SysUser) session.getAttribute(<span class="string">&quot;sysUser&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œå›åˆ°login.htmlï¼Œå¦åˆ™æ­£å¸¸æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == sysUser) &#123;</span><br><span class="line">            response.sendRedirect(<span class="string">&quot;/login.html&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            filterChain.doFilter(request, response);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>SysUserControllerçš„loginæ–¹æ³•ä»£ç ä¼˜åŒ–ï¼Œç™»å½•æˆåŠŸåï¼Œå°†ä¿¡æ¯è½½å…¥SessionåŸŸä»¥ä¾¿filteræ£€æŸ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¥æ”¶ç”¨æˆ·ç™»å½•è¯·æ±‚çš„ä¸šåŠ¡æ–¹æ³•ï¼ˆå®Œæˆç™»å½•çš„ä¸šåŠ¡æ¥å£ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">// 1. æ¥æ”¶ç”¨æˆ·åå¯†ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">userPwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userPwd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•ï¼Œæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="type">SysUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> userService.findUserName(username);</span><br><span class="line">    <span class="keyword">if</span> (loginUser == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·åæœ‰è¯¯ï¼Œè·³è½¬åˆ°ç”¨æˆ·åæœ‰è¯¯æç¤ºé¡µ</span></span><br><span class="line">        response.sendRedirect(<span class="string">&quot;/loginUsernameError.html&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!MD5Util.encrypt(userPwd).equals(loginUser.getUserPwd())) &#123;</span><br><span class="line">        <span class="comment">// å¯†ç æœ‰è¯¯ï¼Œè·³è½¬åˆ°å¯†ç æœ‰è¯¯æç¤ºä¹Ÿ</span></span><br><span class="line">        response.sendRedirect(<span class="string">&quot;/loginUserPwdError.html&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ç™»å½•æˆåŠŸåï¼Œéœ€è¦å°†ç™»å½•æˆåŠŸçš„ä¿¡æ¯æ”¾å…¥SessionåŸŸ</span></span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;sysUser&quot;</span>, loginUser);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·³è½¬æˆåŠŸï¼Œè·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">        response.sendRedirect(<span class="string">&quot;/showSchedule.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="5-Ajax"><a href="#5-Ajax" class="headerlink" title="5. Ajax"></a>5. Ajax</h2><h3 id="5-1-Ajaxæ˜¯ä»€ä¹ˆ"><a href="#5-1-Ajaxæ˜¯ä»€ä¹ˆ" class="headerlink" title="5.1 Ajaxæ˜¯ä»€ä¹ˆ"></a>5.1 Ajaxæ˜¯ä»€ä¹ˆ</h3><ul>
<li>AJAX &#x3D; <code>Asynchronous JavaScript and XML</code>ï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰</li>
<li>AJAXçš„ä¼˜åŠ¿<ul>
<li>å…è®¸ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¯·æ±‚æœåŠ¡å™¨ååªæ›´æ–°ç½‘é¡µçš„éƒ¨åˆ†æ•°æ®</li>
<li>AJAXä»…éœ€æ”¯æŒJSå³å¯æ‰§è¡Œï¼Œæ— éœ€å…¶ä»–æ’ä»¶</li>
</ul>
</li>
<li><code>XMLHttpRequest</code> åªæ˜¯å®ç° Ajax çš„ä¸€ç§æ–¹å¼ã€‚</li>
</ul>
<p><img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915203647873.png" alt="image-20240915203647873">	</p>
<ul>
<li>æˆ‘ä»¬ä¹‹å‰å­¦çš„æ˜¯é€šè¿‡formè¡¨å•æ ‡ç­¾ã€aæ ‡ç­¾æ¥å‘èµ·è¯·æ±‚ï¼Œè€Œç°åœ¨åªéœ€è¦é€šè¿‡è§¦å‘jsä»£ç å°±å¯ä»¥åŠ¨æ€è¯·æ±‚<ul>
<li>é€šè¿‡JSè¿è¡Œä»£ç ï¼Œæ— éœ€è·³è½¬ç•Œé¢ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥è‡ªè¡Œè®¾å®šæ˜¯å¦è·³è½¬ç•Œé¢ï¼‰</li>
<li>å½“æ¥æ”¶åˆ°è¿”å›ç»“æœåï¼Œé€šè¿‡DOMç¼–ç¨‹æ¸²æŸ“åˆ°ç›¸å…³å…ƒç´ ä¸Šï¼Œå®ç°å±€éƒ¨æ›´æ–°</li>
</ul>
</li>
</ul>
<h3 id="5-2-Ajaxçš„ä½¿ç”¨"><a href="#5-2-Ajaxçš„ä½¿ç”¨" class="headerlink" title="5.2 Ajaxçš„ä½¿ç”¨"></a>5.2 Ajaxçš„ä½¿ç”¨</h3><p>åŸç”ŸJSå†™æ³•ï¼ˆäº†è§£ï¼‰ï¼Œåé¢ä¼˜åŒ–çš„è¯ï¼Œjqueryå¯ä»¥å°è£…è¿™ä¸ªè¿‡ç¨‹ä½†ä¸æ˜¯æœ€ä¼˜è§£ï¼Œåç»­æˆ‘ä»¬ç›´æ¥ç”¨VUEæ¡†æ¶çš„axios promiseå¸®åŠ©æˆ‘ä»¬å®Œæˆå³å¯</p>
<ul>
<li>åˆ›å»º<code>XMLHttpRequest</code>å¯¹è±¡</li>
<li>æ‰§è¡Œå›è°ƒå‡½æ•°<code>onreadystatechange</code>ï¼Œè§£æå›é€æŠ¥æ–‡ï¼ŒåŠ¨æ€æ›´æ–°ç»„ä»¶<ul>
<li>xmlhttp.readyState&#x3D;4è¡¨ç¤ºè¯·æ±‚å®Œæˆï¼Œxmlhttp.statusè¡¨ç¤º<code>å“åº”çŠ¶æ€ç </code>ï¼ˆè¯·åŒºåˆ«åç»­JSONçš„<code>ä¸šåŠ¡çŠ¶æ€ç </code>ï¼‰</li>
</ul>
</li>
<li>openæ–¹æ³•è®¾ç½®è¯·æ±‚æ–¹å¼ã€è¯·æ±‚è·¯å¾„ï¼Œå†é€šè¿‡sendæ–¹æ³•å‘é€è¯·æ±‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadXMLDoc</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    <span class="comment">// è®¾ç½®å›è°ƒå‡½æ•°å¤„ç†å“åº”ç»“æœ</span></span><br><span class="line">    xmlhttp.<span class="property">onreadystatechange</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (xmlhttp.<span class="property">readyState</span>==<span class="number">4</span> &amp;&amp; xmlhttp.<span class="property">status</span>==<span class="number">200</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myDiv&quot;</span>).<span class="property">innerHTML</span>=xmlhttp.<span class="property">responseText</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¾ç½®è¯·æ±‚æ–¹å¼å’Œè¯·æ±‚çš„èµ„æºè·¯å¾„</span></span><br><span class="line">    xmlhttp.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;/try/ajax/ajax_info.txt&quot;</span>,<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// å‘é€è¯·æ±‚</span></span><br><span class="line">    xmlhttp.<span class="title function_">send</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="6-æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬å››æœŸ"><a href="#6-æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬å››æœŸ" class="headerlink" title="6. æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬å››æœŸ"></a>6. æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬å››æœŸ</h2><h3 id="6-1-æäº¤è¯·æ±‚å‰æ£€éªŒç”¨æˆ·åå ç”¨"><a href="#6-1-æäº¤è¯·æ±‚å‰æ£€éªŒç”¨æˆ·åå ç”¨" class="headerlink" title="6.1 æäº¤è¯·æ±‚å‰æ£€éªŒç”¨æˆ·åå ç”¨"></a>6.1 æäº¤è¯·æ±‚å‰æ£€éªŒç”¨æˆ·åå ç”¨</h3><h4 id="6-1-1-å‰ç«¯AJAXè¯·æ±‚"><a href="#6-1-1-å‰ç«¯AJAXè¯·æ±‚" class="headerlink" title="6.1.1 å‰ç«¯AJAXè¯·æ±‚"></a>6.1.1 å‰ç«¯AJAXè¯·æ±‚</h4><p>å‰ç«¯åœ¨é¼ æ ‡ç§»å¼€åï¼Œç›´æ¥æ‰§è¡Œjsä»£ç ï¼Œå¼‚æ­¥åˆ¤æ–­ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨(checkUsername)</p>
<p>HTMLéƒ¨åˆ†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span>è¯·è¾“å…¥è´¦å·<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;ipt&quot;</span> <span class="attr">id</span>=<span class="string">&quot;usernameInput&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;checkUsername()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;usernameMsg&quot;</span> <span class="attr">class</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>JSéƒ¨åˆ†(scriptæ ‡ç­¾)</p>
<ul>
<li>è§„èŒƒå“åº”ï¼šä½¿ç”¨<code>JSONä¸²</code>æ¥è¡¨ç¤ºï¼Œå…¶ä¸­åŒ…æ‹¬<code>ä¸šåŠ¡çŠ¶æ€ç code</code>ã€è¡¥å……æè¿°messageã€æ•°æ®data</li>
<li>å›è°ƒå‡½æ•°è§£æJSONä¸²åï¼Œè¯»å–é‡Œé¢çš„ä¿¡æ¯è¿›è¡Œåç»­çš„ä¸šåŠ¡åˆ¤æ–­å³å¯ï¼Œå¦‚æœè¿”å›ä¸šåŠ¡ç 200å°±è¯´æ˜æ²¡æœ‰è¢«å ç”¨</li>
<li>æ³¨æ„ä¸€ä¸‹è¯·æ±‚è·¯å¾„é—®é¢˜å§ï¼Œæˆ‘è¿™é‡Œæ˜¯æŠŠä¸Šä¸‹æ–‡è·¯å¾„è®¾ç½®ä¸º&#x2F;äº†ï¼Œå¦åˆ™å¦‚æœæ˜¯ç»å¯¹è·¯å¾„è¦åŠ ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œå¦åˆ™å°±ä½¿ç”¨ç›¸å¯¹è·¯å¾„äº†ï¼ˆæˆ‘ä¸ªäººä¸å¤ªæ¨è å®³æ€•åé¢è·¯å¾„å˜åŒ–ï¼‰</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkUsername</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> usernameInput = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;usernameInput&quot;</span>)</span><br><span class="line">    <span class="keyword">var</span> username = usernameInput.<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">var</span> usernameRegex = <span class="regexp">/^[a-zA-Z0-9]&#123;5,10&#125;$/</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> usernameMsg = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;usernameMsg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (! usernameRegex.<span class="title function_">test</span>(username)) &#123;</span><br><span class="line">        usernameMsg.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">        usernameMsg.<span class="property">innerText</span> = <span class="string">&quot;é¡»ä¸º5-10ä½å­—æ¯æˆ–æ•°å­—&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¼å¼æ­£ç¡®é€šè¿‡åï¼Œç»§ç»­æ ¡éªŒç”¨æˆ·åæ˜¯å¦è¢«å ç”¨</span></span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    <span class="comment">// å›è°ƒå‡½æ•°ï¼Œè®¾ç½®å“åº”å›æ¥çš„ä¿¡æ¯å¦‚ä½•å¤„ç†</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * å­˜åœ¨çš„é—®é¢˜ï¼š</span></span><br><span class="line"><span class="comment">             *      1. å“åº”ä¹±ç é—®é¢˜</span></span><br><span class="line"><span class="comment">             *      2. å“åº”çš„ä¿¡æ¯æ ¼å¼ä¸è§„èŒƒï¼Œå¤„ç†æ–¹å¼ä¸è§„èŒƒ</span></span><br><span class="line"><span class="comment">             *          åç«¯å“åº”å›æ¥çš„ä¿¡æ¯åº”å½“æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ¼å¼ï¼Œå‰åç«¯å…±åŒéµå®ˆ</span></span><br><span class="line"><span class="comment">             *          ä½¿ç”¨JSONå­—ç¬¦ä¸²ï¼ˆä¸ºäº†ä¸ç”¨è‡ªå·±æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡JackSonå·¥å…·å¸®åŠ©æˆ‘ä»¬é€šè¿‡å¯¹è±¡æ¥è½¬æ¢æˆJSONä¸²ï¼‰</span></span><br><span class="line"><span class="comment">             *          &#123;</span></span><br><span class="line"><span class="comment">             *              // ä¸¾ä¾‹ï¼šcode:1æˆåŠŸï¼Œcode:2å¤±è´¥...</span></span><br><span class="line"><span class="comment">             *              &quot;code&quot;:&quot;&quot;,      ä¸šåŠ¡çŠ¶æ€ç ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œå¦‚æœå¤±è´¥äº†ï¼Œä¸ºä»€ä¹ˆå¤±è´¥ï¼ˆä¸æŠ¥æ–‡çš„å“åº”ç åŒºåˆ«ï¼‰</span></span><br><span class="line"><span class="comment">             *              &quot;message&quot;:&quot;&quot;,   ä¸šåŠ¡çŠ¶æ€ç çš„è¡¥å……è¯´æ˜ï¼ˆæè¿°ï¼‰</span></span><br><span class="line"><span class="comment">             *              â€œdataâ€: &#123;&#125;      æœ¬æ¬¡å“åº”çš„æ•°æ®     æˆåŠŸ/ä¸æˆåŠŸï¼ŒList&lt;Schedule&gt;</span></span><br><span class="line"><span class="comment">             *              ...,...</span></span><br><span class="line"><span class="comment">             *          &#125;</span></span><br><span class="line"><span class="comment">             *      3. å¦‚æœæ ¡éªŒä¸é€šè¿‡ï¼Œæ— æ³•é˜»æ­¢è¡¨å•çš„æäº¤</span></span><br><span class="line"><span class="comment">             *          æœªæ¥ä½¿ç”¨VUE axios å’Œ promiseè§£å†³</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œæ— æ³•é˜»æ­¢è¡¨å•æäº¤ï¼Œå›è°ƒå‡½æ•°çš„return trueå’Œreturn falseå’ŒåŸæ–¹æ³•æ— å…³ï¼Œå› ä¸ºå·²ç»æ‰§è¡Œå®Œäº†ï¼Œè¿™é‡Œæ²¡å¿…è¦æ·±ç©¶è§£å†³</span></span><br><span class="line">    request.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (request.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; request.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">// console.log(request.responseText); // æ­¤æ—¶æ˜¯ä¸€ä¸ªJSONä¸²ï¼Œéœ€è¦å°†ä¸²è½¬æˆå¯¹è±¡</span></span><br><span class="line">            <span class="keyword">var</span> result = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(request.<span class="property">responseText</span>);</span><br><span class="line">            <span class="keyword">if</span> (result.<span class="property">code</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">                usernameMsg.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">                usernameMsg.<span class="property">innerText</span> = <span class="string">&quot;è´¦å·è¢«å ç”¨&quot;</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                usernameMsg.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;green&quot;</span>;</span><br><span class="line">                usernameMsg.<span class="property">innerText</span> = <span class="string">&quot;è´¦å·å¯ç”¨&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// è®¾ç½®è¯·æ±‚æ–¹å¼å’Œèµ„æºè·¯å¾„ï¼Œå‘é€èµ„æºè¯·æ±‚</span></span><br><span class="line">    request.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/user/checkUsernameUsed?username=&quot;</span> + username);</span><br><span class="line">    request.<span class="title function_">send</span>(); <span class="comment">// åé¢çš„ä»£ç æ‰§è¡Œæ— æ„ä¹‰ï¼Œå› ä¸ºå¯èƒ½ä¼šè¢«åç«¯ä»£ç è¦†ç›–æ‰ï¼Œè¿™æ˜¯å›è°ƒå‡½æ•°çš„ç¼ºé™·ï¼Œæœªæ¥ä½¿ç”¨VUEçš„axios promiseè§£å†³</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// usernameMsg.style.color = &quot;green&quot;;</span></span><br><span class="line">    <span class="comment">// usernameMsg.innerText = &quot;è´¦å·å¯ç”¨&quot;</span></span><br><span class="line">    <span class="comment">// return true;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6-1-2-åç«¯å¤„ç†ä¸šåŠ¡å¹¶æ„å»ºJSONå“åº”"><a href="#6-1-2-åç«¯å¤„ç†ä¸šåŠ¡å¹¶æ„å»ºJSONå“åº”" class="headerlink" title="6.1.2 åç«¯å¤„ç†ä¸šåŠ¡å¹¶æ„å»ºJSONå“åº”"></a>6.1.2 åç«¯å¤„ç†ä¸šåŠ¡å¹¶æ„å»ºJSONå“åº”</h4><p>æ¥ä¸‹æ¥å°±æ˜¯æœåŠ¡ç«¯ä¸šåŠ¡ï¼Œåˆ¤æ–­ç”¨æˆ·åæœ‰æ— è¢«å ç”¨ï¼Œç„¶åæ„é€ JSONä¸²å‘ç»™å®¢æˆ·ç«¯</p>
<p>è€Œä¸ºäº†æ„å»ºJSONï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸šåŠ¡å®šä¹‰è‹¥å¹²ä¸šåŠ¡çŠ¶æ€ç ï¼ˆé€šè¿‡<code>Enum</code>å®ç°ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.common;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ResultCodeEnum</span> &#123;</span><br><span class="line">    SUCCESS(<span class="number">200</span>, <span class="string">&quot;æˆåŠŸ&quot;</span>),</span><br><span class="line">    USERNAME_ERROR(<span class="number">501</span>, <span class="string">&quot;usernameError&quot;</span>),</span><br><span class="line">    PASSWORD_ERROR(<span class="number">503</span>, <span class="string">&quot;passwordError&quot;</span>),</span><br><span class="line">    NOT_LOGIN(<span class="number">504</span>, <span class="string">&quot;notLogin&quot;</span>),</span><br><span class="line">    USERNAME_USED(<span class="number">505</span>, <span class="string">&quot;usernameUsed&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ResultCodeEnum</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ¥ä¸‹æ¥å®šä¹‰JSONä¸²ä¸­çš„å±æ€§ï¼Œä»¥ä¾¿è½¬æ¢ï¼Œæ³¨æ„è¿™é‡Œçš„dataå› ä¸ºä¸ç¡®å®šï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹ï¼Œå…³é”®çš„å‡ ä¸ªæ–¹æ³•æ˜¯</p>
<ul>
<li>æ ¹æ®data code message  çš„æ„å»ºå¯¹è±¡æ–¹æ³• build<ul>
<li>é€šç”¨æ„å»ºæ–¹æ³•ï¼šé€šè¿‡enum å’Œ dataæ„å»ºï¼ˆmessageé€šè¿‡enumæ¥setï¼‰</li>
<li>æ²¡æœ‰æ•°æ®ï¼Œdataå¯ä»¥ä¸ºnull</li>
</ul>
</li>
<li>å¸¸ç”¨æ„å»ºæ“ä½œ<ul>
<li>SUCCESS â€“&gt; ok æ–¹æ³•</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.common;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * code:1æˆåŠŸï¼Œcode:2å¤±è´¥...</span></span><br><span class="line"><span class="comment"> *         &quot;code&quot;:&quot;&quot;,      ä¸šåŠ¡çŠ¶æ€ç ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œå¦‚æœå¤±è´¥äº†ï¼Œä¸ºä»€ä¹ˆå¤±è´¥ï¼ˆä¸æŠ¥æ–‡çš„å“åº”ç åŒºåˆ«ï¼‰ é€šè¿‡æšä¸¾å®ç°</span></span><br><span class="line"><span class="comment"> *         &quot;message&quot;:&quot;&quot;,   ä¸šåŠ¡çŠ¶æ€ç çš„è¡¥å……è¯´æ˜ï¼ˆæè¿°ï¼‰</span></span><br><span class="line"><span class="comment"> *         â€œdataâ€: &#123;&#125;      æœ¬æ¬¡å“åº”çš„æ•°æ®     æˆåŠŸ/ä¸æˆåŠŸï¼ŒList&lt;Schedule&gt;</span></span><br><span class="line"><span class="comment"> *              ...,...</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">// è¿”å›ç </span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="comment">// è¿”å›æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="comment">// è¿”å›æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> T data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†Enumçš„å†…å®¹å¡«å…¥Resultæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›æ•°æ®ï¼Œå¿«é€Ÿæ„å»ºResultå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">build</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        Result&lt;T&gt; result = <span class="keyword">new</span> <span class="title class_">Result</span>&lt;T&gt;();</span><br><span class="line">        <span class="keyword">if</span> (data != <span class="literal">null</span>)</span><br><span class="line">            result.setData(data);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">build</span><span class="params">(T body, Integer code, String message)</span> &#123;</span><br><span class="line">        Result&lt;T&gt; result = build(body);</span><br><span class="line">        result.setCode(code);</span><br><span class="line">        result.setMessage(message);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">build</span><span class="params">(T body, ResultCodeEnum resultCodeEnum)</span> &#123;</span><br><span class="line">        Result&lt;T&gt; result = build(body);</span><br><span class="line">        result.setCode(resultCodeEnum.getCode());</span><br><span class="line">        result.setMessage(resultCodeEnum.getMessage());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ“ä½œæˆåŠŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data  baseCategory1List</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>&lt;T&gt; Result&lt;T&gt; <span class="title function_">ok</span><span class="params">(T data)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> build(data, ResultCodeEnum.SUCCESS);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// get setæ–¹æ³•ç•¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>åœ¨SysUserControllerä¸“é—¨å†æ ¹æ®è¿™ä¸ªéœ€æ±‚ å†™ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•<strong>checkUsernameUsed</strong></p>
<ul>
<li>é»˜è®¤æ˜¯æ­£å¸¸æ”¾è¡Œ</li>
<li>å¦‚æœæ³¨å†Œçš„æ—¶å€™æŸ¥åˆ°è¯¥ç”¨æˆ·äº†ï¼Œé‚£ä¹ˆå°±ä¼ å…¥ResultCodeEnum.USERNAME_USEDï¼ˆç”¨åˆ°äº†JavaSEé‡ŒéŸ©è€å¸ˆè¿‡å…³æ–©å°†çš„ç¼–ç¨‹æ€æƒ³ï¼‰</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯æŠŠå¯¹è±¡è½¬æ¢æˆJSONï¼Œå¹¶å‘ŠçŸ¥æµè§ˆå™¨è¿™ä¸ªæ˜¯JSONä¸²ï¼Œä½¿ç”¨Jacksonï¼ˆéœ€å¯¼å…¥ä¾èµ–ï¼‰çš„<code>ObjectMapper.writeValueAsString</code>æ–¹æ³•å®ç°<ul>
<li>å†å›å¿†ä¸€ä¸‹å…ˆæ­»åæ´»çš„ä¼˜åŒ–ç¼–ç¨‹æ€æƒ³ï¼Œæˆ‘ä»¬æŠŠä»–æŠ½è±¡ä¸ºä¸€ä¸ªå·¥å…·ç±»ï¼Œç®€åŒ–ä»£ç çš„åŒæ—¶ï¼Œä¹Ÿä¾¿äºåç»­é‡ç”¨ï¼ˆåªè¦æœ‰ä¸€ä¸ªå“åº”JSONæ˜ å°„å¯¹è±¡å°±å¯ä»¥æ„å»ºJSONå‘é€ï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ³¨å†Œæ—¶æ¥æ”¶è¦æ¥å—çš„ç”¨æˆ·åï¼Œæ ¡éªŒç”¨æˆ·åæ˜¯å¦è¢«å ç”¨çš„ä¸šåŠ¡æ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">checkUsernameUsed</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// æ¥æ”¶ç”¨æˆ·å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è°ƒç”¨serviceå±‚ä¸šåŠ¡å¤„ç†æ–¹æ³•ï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰è¯¥ç”¨æˆ·</span></span><br><span class="line">        <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> userService.findUserName(username);</span><br><span class="line"></span><br><span class="line">        Result&lt;Object&gt; result = Result.ok(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæœ‰ï¼Œå“åº”å ç”¨ï¼Œå¦åˆ™å“åº”å¯ç”¨</span></span><br><span class="line">        <span class="keyword">if</span> (sysUser != <span class="literal">null</span>) &#123;</span><br><span class="line">            result = Result.build(<span class="literal">null</span>, ResultCodeEnum.USERNAME_USED);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        // å°†resultå¯¹è±¡è½¬æ¢ä¸ºJSONä¸²å“åº”ç»™å®¢æˆ·ç«¯ï¼ˆObjectMapperï¼‰,å·²å°è£…ä¸ºä¸€ä¸ªå·¥å…·æ–¹æ³•</span></span><br><span class="line"><span class="comment">//        ObjectMapper objectMapper = new ObjectMapper();</span></span><br><span class="line"><span class="comment">//        String info = objectMapper.writeValueAsString(result);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        // å‘Šè¯‰å®¢æˆ·ç«¯è¿™æ˜¯JSONä¸²</span></span><br><span class="line"><span class="comment">//        resp.setContentType(&quot;application/json;charset=utf-8&quot;);</span></span><br><span class="line"><span class="comment">//        resp.getWriter().write(info);</span></span><br><span class="line">        WebUtil.writeJson(resp, result); <span class="comment">// ç›´æ¥å‘å®¢æˆ·è¿”å›JSONä¸²ï¼Œåç»­SpringMVCä¼šå°è£…ä¸ºä¸€ä¸ªæ³¨è§£ï¼Œäº†è§£å³å¯</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>å·¥å…·ç±»å°è£…WebUtilï¼Œæ³¨æ„å·¥å…·ç±»çš„è¦ç‚¹</p>
<ul>
<li>å…¬å…±å˜é‡ä½œä¸ºä¸€ä¸ªç§æœ‰å˜é‡ï¼Œå¹¶åœ¨é™æ€ä»£ç å—åˆå§‹åŒ–</li>
<li>è¯¥æ–¹æ³•é¢å¤–æä¾›äº†JSONçš„è¯»ï¼Œé€šè¿‡åå°„å’Œæ³›å‹æŠ€æœ¯æ¥æ„å»ºæœªç¡®å®šå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªJackSonä¹Ÿå¸®æˆ‘ä»¬å°è£…å¥½äº†åé¢ç›´æ¥ç”¨å°±è¡Œï¼Œæ·±ç©¶åŸç†éœ€è¦çš„æ—¶å€™å†å›é¡¾ä¸€ä¸‹æ¦‚å¿µå³å¯ï¼Œè§ä¹‹å‰çš„JavaSEç›¸å…³æŠ€æœ¯çš„ç¬”è®°</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.schedule.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.schedule.common.Result;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> yuezi2048</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ObjectMapper objectMapper;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–objectMapper</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        objectMapper=<span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="comment">// è®¾ç½®JSONå’ŒObjectè½¬æ¢æ—¶çš„æ—¶é—´æ—¥æœŸæ ¼å¼</span></span><br><span class="line">        objectMapper.setDateFormat(<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»è¯·æ±‚ä¸­è·å–JSONä¸²å¹¶è½¬æ¢ä¸ºObject</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">readJson</span><span class="params">(HttpServletRequest request,Class&lt;T&gt; clazz)</span>&#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            reader = request.getReader();</span><br><span class="line">            <span class="type">StringBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span><span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">while</span>((line = reader.readLine())!= <span class="literal">null</span>)&#123;</span><br><span class="line">                buffer.append(line);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            t= objectMapper.readValue(buffer.toString(),clazz);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†Resultå¯¹è±¡è½¬æ¢æˆJSONä¸²å¹¶æ”¾å…¥å“åº”å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeJson</span><span class="params">(HttpServletResponse response, Result result)</span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/json;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> objectMapper.writeValueAsString(result);</span><br><span class="line">            response.getWriter().write(json);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>æµ‹è¯•</strong></p>
<img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915212322452.png" alt="image-20240915212322452" style="zoom:67%;" />	

<img src="/img/loading.gif" data-original="https://yuezi-1308313119.cos.ap-guangzhou.myqcloud.com/typora-user-images%2Fimage-20240915212332977.png" alt="image-20240915212332977" style="zoom:80%;" /></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://yuezi2048.github.io">yuezi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://yuezi2048.github.io/2025/05/06/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/6.%20Session_filter_listener/">https://yuezi2048.github.io/2025/05/06/2.AreasğŸŒ/back-end-java/4.JavaWeb/6. Session_filter_listener/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://yuezi2048.github.io" target="_blank">yuezi</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/4-JavaWeb/">4.JavaWeb</a></div><div class="post-share"><div class="social-share" data-image="/img/touxiang.jpg" data-sites="qq,wechat"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/04/30/2.Areas%F0%9F%8C%90/02.%E9%9D%A2%E7%BB%8F%E8%AE%B0%E5%BD%95/Java%E9%9B%86%E5%90%88/4.CopyOnWriteArrayList%E5%92%8CCollections.synchronizedList/" title="4.CopyOnWriteArrayListå’ŒCollections.synchronizedList"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">4.CopyOnWriteArrayListå’ŒCollections.synchronizedList</div></div><div class="info-2"><div class="info-item-1">CopyOnWriteArrayList  æ˜¯çº¿ç¨‹å®‰å…¨çš„Listå®ç°â€”â€”å†™æ—¶å¤åˆ¶ç­–ç•¥ æ¯æ¬¡å¯¹Listä¿®æ”¹(add set remove)åï¼Œä¼šå¤åˆ¶ä¸€ä¸ªæ–°çš„åº•å±‚æ•°ç»„ï¼Œè¯»ä¸åŠ é”ï¼Œå†™æ—¶åŠ é”   ä¼˜ç‚¹ï¼šæ¯æ¬¡å†™æ“ä½œå¤åˆ¶ä¸€ä¸ªæ–°æ•°ç»„ï¼Œç”±äºè¯»å†™ä¸å†²çªï¼Œè¯»æ“ä½œä¸éœ€è¦åŠ é”ï¼Œå¯ä»¥æä¾›é«˜æ•ˆçš„å¹¶å‘è¯»æ€§èƒ½ ç¼ºç‚¹ï¼š å†™æ“ä½œå¼€é”€ï¼šæ¯æ¬¡å†™æ“ä½œè¦è¿›è¡Œåˆ›å»ºæ•°ç»„+å¤åˆ¶çš„æ“ä½œï¼Œå†™æ“ä½œé¢‘ç¹åœºæ™¯ä¸‹æ€§èƒ½ä½ å†…å­˜å¼€é”€ï¼šç”±äºå¤åˆ¶çš„æ“ä½œï¼Œåœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼ŒåŒä¸€æ—¶åˆ»ä¼šäº§ç”ŸåŒå€çš„Listå†…å­˜å ç”¨ï¼Œå†…å­˜å¼€é”€å¤§     é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯  Collections.synchronizedList  è¿™æ˜¯ä¸€ä¸ªåŒ…è£…æ–¹æ³•ï¼Œå°†Listè½¬æ¢æˆçº¿ç¨‹å®‰å…¨ï¼Œå…·ä½“è¿‡ç¨‹æ˜¯å¯¹listçš„æ“ä½œæ–¹æ³•ï¼ˆget add set removeï¼‰åŠ ä¸Šsynchronizedé” ä¼˜ç‚¹ï¼šæ–¹ä¾¿ï¼Œç›´æ¥è°ƒç”¨å³å¯ä¿è¯Listçº¿ç¨‹å®‰å…¨ ç¼ºç‚¹ï¼šè¯»å†™éƒ½åŠ é”ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹æ€§èƒ½å·®   é€‚åˆListè½¬æ¢æˆçº¿ç¨‹å®‰å…¨çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œç‰¹å®šåœºæ™¯ä¸‹è¦è€ƒè™‘å¹¶å‘åº¦é«˜çš„JUCç±»  æ‰©å±•ï¼š  CopyOnWriteArrayListæºç åˆ†æ  </div></div></div></a><a class="pagination-related" href="/2025/05/07/2.Areas%F0%9F%8C%90/back-end-java/6.SSM/Spring/3.%20AOP/" title="3. AOP"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">3. AOP</div></div><div class="info-2"><div class="info-item-1">ä¸‰ã€AOP3.1 è½¬è´¦çš„äº‹åŠ¡é—®é¢˜ä¸è§£å†³æ€è·¯ç»§ç»­ä¸Šä¸€ç« èŠ‚è½¬è´¦æ¡ˆä¾‹çš„è¿›åº¦ï¼Œå½“å‰è¿›åº¦ï¼š  é€šè¿‡æ³¨è§£æˆ–è€…XMLé…ç½®æ–‡ä»¶çš„æ–¹å¼é…ç½®äº†IOC å¯¹æ•°æ®æºã€queryRunneræ ¸å¿ƒå¯¹è±¡ã€ä»¥åŠDAOå±‚Serviceå±‚å…³é”®å¯¹è±¡ è¿›è¡Œbeanå¯¹è±¡ç®¡ç†   å®ç°äº†å…·ä½“çš„ä¸šåŠ¡ä»£ç ï¼Œå…³é”®ä¸šåŠ¡æ˜¯AcoountServiceImplä¸­çš„transferè½¬è´¦ä¸šåŠ¡   å½“å‰è¿›åº¦å­˜åœ¨çš„é—®é¢˜ï¼šæ²¡æœ‰å®ç°äº‹åŠ¡  è¿™ä¼šé€ æˆä¸€ä¸ªé—®é¢˜ï¼šå½“ä¸šåŠ¡æ“ä½œå¤„ç†è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†é—®é¢˜ï¼Œé‚£ä¹ˆå°±ä¸æ»¡è¶³äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Œä¸€ä¸ªæ‰£é’±äº†ï¼Œå¦å¤–ä¸€ä¸ªäººå´æ²¡æœ‰åŠ é’±ï¼Œè¿™æ˜¯éå¸¸ä¸¥é‡çš„é—®é¢˜ã€‚ 	  é€ æˆè¯¥é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼š   æ²¡æœ‰å®šä¹‰äº‹åŠ¡ï¼› æ•°æ®åº“é“¾æ¥å¯¹è±¡ä¸ç»Ÿä¸€ï¼Œè¿›è€Œé€ æˆæ•°æ®åº“çš„æ“ä½œä¸åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚   è§£å†³æ–¹æ¡ˆï¼šå°†æ•°æ®åº“çš„CRUDæ“ä½œçš„è¿æ¥å¯¹è±¡ç»Ÿä¸€å³å¯ï¼Œå…·ä½“æ¥è¯´ä¸‰ä¸ªæ­¥éª¤   é€šè¿‡ThreadLocalå°†å½“å‰çº¿ç¨‹å’Œæ•°æ®åº“è¿æ¥å¯¹è±¡ç»‘å®š å®šä¹‰äº‹åŠ¡çš„ç®¡ç†å™¨ï¼ŒåŒ…å«å¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ã€é‡Šæ”¾èµ„æºçš„æ–¹æ³• ç„¶åå…·ä½“çš„æ‰§è¡Œä¸šåŠ¡çš„æ–¹æ³•åº”å½“ä¿®æ”¹æˆå¦‚ä¸‹æ–¹å¼  try &#123;  å¼€å¯äº‹åŠ¡  æ‰§è¡Œä¸šåŠ¡ä»£ç   æäº¤äº‹åŠ¡&#125; catch(Exception e)...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/09/01/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/1.%20JavaWeb%E6%A6%82%E8%BF%B0/" title="1. JavaWebæ¦‚è¿°"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-01</div><div class="info-item-2">1. JavaWebæ¦‚è¿°</div></div><div class="info-2"><div class="info-item-1">ç¬¬ä¸€ç«  Webæ¦‚è¿°1.1 JavaWebæ˜¯ä»€ä¹ˆ é€šè¿‡JavaæŠ€æœ¯è§£å†³Webäº’è”ç½‘é¢†åŸŸçš„æŠ€æœ¯æ ˆï¼ˆä½¿ç”¨JavaEEæŠ€æœ¯å¼€å‘ä¼ä¸šçº§äº’è”ç½‘é¡¹ç›®ï¼Œé¡¹ç›®è§„æ¨¡å’Œæ¶æ„æ¨¡å¼å’ŒJavaSEæœ‰å¾ˆå¤§åŒºåˆ«ï¼‰ å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼ å®¢æˆ·ç«¯ï¼šä¸ç”¨æˆ·äº¤äº’ï¼Œæ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œå‘æœåŠ¡å™¨å‘é€æ•°æ®å¹¶è¿”å›æœåŠ¡å™¨è¾“å‡ºçš„æ•°æ® æœåŠ¡å™¨ï¼šä»ç¡¬ä»¶å’Œè½¯ä»¶ä¸¤ä¸ªæ–¹é¢æè¿°(å¹¿ä¹‰å’Œç‹­ä¹‰) ç¡¬ä»¶ä¸Šï¼Œæ˜¯æ¯”æ™®é€šè®¡ç®—æœºè¿è¡Œæ›´å¿« è´Ÿè½½æ›´é«˜ ä»·æ ¼æ›´è´µï¼Œä¸€èˆ¬æ˜¯ç½‘ç»œä¸­çš„å¤§å‹å®¢æˆ·æœºæä¾›è®¡ç®—æœåŠ¡ è½¯ä»¶ä¸Šï¼Œæ˜¯å®‰è£…åœ¨è®¡ç®—æœºä¸Šçš„æŸä¸ªè¿›ç¨‹ï¼Œæ ¹æ®ä¸åŒçš„ä½œç”¨å¯ä»¥åˆ†ä¸ºä¸åŒçš„æœåŠ¡å™¨ï¼Œå¦‚DNS redis ftpæœåŠ¡å™¨ç­‰     åº”ç”¨ APP å¾®ä¿¡å°ç¨‹åº PCç«¯ç¨‹åº PCæµè§ˆå™¨ å¤–è®¾ï¼ˆå°ç±³éŸ³ç®± ç”µè¯æ‰‹è¡¨ POSæœºç­‰ï¼‰    1.2 JavaWebæŠ€æœ¯æ ˆå‰ç«¯ HTML CSS JS ES6 Nodejs npm vite vue3 router pinia axios element-plusâ€¦ åç«¯ HTTP xml Tomcat Servlet Request Response Cookie Session Filter Listener MySQL JDBC Druid...</div></div></div></a><a class="pagination-related" href="/2024/10/13/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/10.%E9%98%B6%E6%AE%B5%E9%A1%B9%E7%9B%AE%E2%80%94%E2%80%94%E5%BE%AE%E5%A4%B4%E6%9D%A1/" title="10.é˜¶æ®µé¡¹ç›®â€”â€”å¾®å¤´æ¡"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-13</div><div class="info-item-2">10.é˜¶æ®µé¡¹ç›®â€”â€”å¾®å¤´æ¡</div></div><div class="info-2"><div class="info-item-1">10. é˜¶æ®µé¡¹ç›®â€”â€”å¾®å¤´æ¡1....</div></div></div></a><a class="pagination-related" href="/2024/09/26/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/2.%20HTML_CSS/" title="2. HTML_CSS"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-26</div><div class="info-item-2">2. HTML_CSS</div></div><div class="info-2"><div class="info-item-1">ç¬¬äºŒç«  HTML-CSS1. HTMLå…¥é—¨1.1 HTML_CSS_JSä½œç”¨ HTMLç”¨äºæ­å»ºç½‘ç«™ä¸»ä½“ CSSç”¨äºå¯¹é¡µé¢å…ƒç´ ç¾åŒ– JSç”¨äºå¯¹é¡µé¢å…ƒç´ åŠ¨æ€å¤„ç†  1.2 HTMLæ¦‚å¿µHTML  HTML(Hyper Test Markup Language è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€)ï¼Œæ­å»ºç½‘ç«™ç»“æ„ï¼Œæ˜¾ç¤ºç›¸å…³å…ƒç´  HTML5   HTML5 æŠ€æœ¯ç»“åˆäº† HTML4.01 çš„ç›¸å…³æ ‡å‡†å¹¶é©æ–°ï¼Œç¬¦åˆç°ä»£ç½‘ç»œå‘å±•è¦æ±‚ï¼Œåœ¨ 2008 å¹´æ­£å¼å‘å¸ƒã€‚HTML5 ç”±ä¸åŒçš„æŠ€æœ¯æ„æˆï¼Œå…¶åœ¨äº’è”ç½‘ä¸­å¾—åˆ°äº†éå¸¸å¹¿æ³›çš„åº”ç”¨ï¼Œæä¾›æ›´å¤šå¢å¼ºç½‘ç»œåº”ç”¨çš„æ ‡å‡†æœºã€‚ ä¸ä¼ ç»Ÿçš„æŠ€æœ¯ç›¸æ¯”ï¼ŒHTML5 çš„è¯­æ³•ç‰¹å¾æ›´åŠ æ˜æ˜¾ï¼Œå¹¶ä¸”ç»“åˆäº† SVG çš„å†…å®¹ã€‚è¿™äº›å†…å®¹åœ¨ç½‘é¡µä¸­ä½¿ç”¨å¯ä»¥æ›´åŠ ä¾¿æ·åœ°å¤„ç†å¤šåª’ä½“å†…å®¹ï¼Œè€Œä¸” HTML5ä¸­è¿˜ç»“åˆäº†å…¶ä»–å…ƒç´ ï¼Œå¯¹åŸæœ‰çš„åŠŸèƒ½è¿›è¡Œè°ƒæ•´å’Œä¿®æ”¹ï¼Œè¿›è¡Œæ ‡å‡†åŒ–å·¥ä½œã€‚ HTML5 åœ¨ 2012...</div></div></div></a><a class="pagination-related" href="/2024/10/02/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/3.%20JavaScript/" title="3. JavaScript"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-02</div><div class="info-item-2">3. JavaScript</div></div><div class="info-2"><div class="info-item-1">ç¬¬ä¸‰ç«  JavaScript1. JSç®€ä»‹1.1 JSèµ·æºå’Œç‰¹ç‚¹ JavaScriptï¼šç”±Netscape(ç½‘æ™¯)çš„LiveScriptå‘å±•è€Œæ¥çš„åŸºäºå¯¹è±¡çš„åŠ¨æ€ç±»å‹åŒºåˆ†å¤§å°å†™çš„å®¢æˆ·ç«¯è„šæœ¬è¯­è¨€ï¼Œæœ€åˆç›®çš„æ˜¯ä¸ºäº†è§£å†³æœåŠ¡ç«¯è¯­è¨€ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…çš„è®¿é—®é€Ÿåº¦ï¼Œè€Œå½“æ—¶æœåŠ¡ç«¯å¯¹æ•°æ®éªŒè¯æ…¢ï¼ŒNetscapeå…¬å¸çš„æµè§ˆå™¨Navigatoræä¾›äº†æ•°æ®éªŒè¯çš„åŸºæœ¬åŠŸèƒ½ ECMA-262æ˜¯æ­£å¼JavaScriptæ ‡å‡†ï¼ŒåŸºäº JavaScript (Netscape) å’ŒJScript (Microsoft)ï¼Œåœ¨1996å¹´å¼€å§‹ï¼Œ1997.7é‡‡çº³äº†é¦–ä¸ªç‰ˆæœ¬ JavaScriptæ­£å¼åç§°ä¸ºECMAScript JSåŒ…æ‹¬ECMAScriptã€DOMã€BOM  	 JSæ˜¯ä¸€ç§è¿è¡Œäºæµè§ˆå™¨ç«¯ä¸Šçš„å°è„šæœ¬è¯­å¥,å¯ä»¥å®ç°ç½‘é¡µå¦‚æ–‡æœ¬å†…å®¹åŠ¨,æ•°æ®åŠ¨æ€å˜åŒ–å’ŒåŠ¨ç”»ç‰¹æ•ˆç­‰ï¼Œ ç‰¹ç‚¹å¦‚ä¸‹  è„šæœ¬è¯­è¨€  è§£é‡Šå‹è„šæœ¬è¯­è¨€ï¼Œä¸åŒäºC&#x2F;C++ Java...</div></div></div></a><a class="pagination-related" href="/2024/09/15/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/4.%20XML_Tomcat_HTTP/" title="4. XML_Tomcat_HTTP"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-15</div><div class="info-item-2">4. XML_Tomcat_HTTP</div></div><div class="info-2"><div class="info-item-1">ç¬¬å››ç«  XML_Tomcat10_HTTP1. XML XMLï¼ˆEXtensible Markup Lanauage å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰ï¼ŒåŒå’ŒHTMLä¸€æ ·ï¼ŒåŸºæœ¬è¯­æ³•æ˜¯æ ‡ç­¾	 å¯æ‰©å±•ï¼šå«ä¹‰æ˜¯XMLå…è®¸è‡ªå®šä¹‰æ ¼å¼ åœ¨XMLè¯­æ³•è§„èŒƒåŸºç¡€ä¸Šï¼Œç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºã€æ¡†æ¶éƒ½ä¼šé€šè¿‡XMLçº¦æŸæ¥è§„å®šé…ç½®æ–‡ä»¶ä¸­å¯ä»¥å†™ä»€ä¹ˆä»¥åŠæ€ä¹ˆå†™ æˆ‘ä»¬åªéœ€åœ¨ç¬¬ä¸‰æ–¹APPæˆ–æ¡†æ¶ä¸Šå®šä¹‰å¥½çš„é…ç½®æ–‡ä»¶åŸºç¡€ä¸Šï¼Œæ ¹æ®éœ€æ±‚åŠ ä»¥ä¿®æ”¹å³å¯    	 1.1...</div></div></div></a><a class="pagination-related" href="/2024/10/02/2.Areas%F0%9F%8C%90/back-end-java/4.JavaWeb/5.%20Servlet/" title="5. Servlet"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-02</div><div class="info-item-2">5. Servlet</div></div><div class="info-2"><div class="info-item-1">ç¬¬äº”ç«  Servlet1. Servletç®€ä»‹é¦–å…ˆæ˜ç¡®åŠ¨æ€èµ„æºå’Œé™æ€èµ„æºçš„æ¦‚å¿µï¼ˆä¹°è›‹ç³•çš„ä¾‹å­ï¼Œç°æœ‰å’Œç°åšçš„åŒºåˆ«ï¼‰ é™æ€èµ„æºï¼šæ— éœ€é€šè¿‡ä»£ç è¿è¡Œç”Ÿæˆçš„èµ„æºï¼Œå³åœ¨è¿è¡Œå‰å°±å†™å¥½çš„èµ„æºï¼ŒåŒ…æ‹¬å‰ç«¯ä¸‰å¤§ä»¶ã€imgç­‰å¤šåª’ä½“æ–‡ä»¶ åŠ¨æ€èµ„æºï¼šéœ€è¦é€šè¿‡ä»£ç è¿è¡Œç”Ÿæˆçš„èµ„æºï¼Œå³ç¨‹åºè¿è¡Œå‰æ— æ³•ç¡®å®šçš„æ•°æ®ï¼Œéœ€è¦è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆï¼ŒåŒ…æ‹¬Servletã€Thymeleaf  æ³¨ï¼šåŠ¨æ€èµ„æºæ˜¯å¼ºè°ƒè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆæ•°æ®ï¼Œè€Œä¸æ˜¯è§†å›¾ä¸Šçš„åŠ¨ç”»æ•ˆæœæˆ–è€…æ˜¯ç®€å•çš„äººæœºäº¤äº’æ•ˆæœ  æ¥ä¸‹æ¥å¼•å‡ºæˆ‘ä»¬çš„åŠ¨æ€èµ„æºâ€”â€”Servlet  Servletï¼ˆServer...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">yuezi</div><div class="author-info-description">ç§¯å¾®è€…é€Ÿæˆ</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">785</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">66</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">91</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yuezi2048"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://githubfast.com/yuezi2048" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/qq_46345703" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="https://qm.qq.com/cgi-bin/qm/qr?k=dD62GIPTf5-iS4UdSfJRy7NHwsrCh3-j" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:joyLing@stumail.nwu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">ç§¯å¾®è€…é€Ÿæˆ</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-Session-filter-listener"><span class="toc-text">ç¬¬å…­ç«  Session_filter_listener</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Session"><span class="toc-text">1. Session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81Session"><span class="toc-text">1.1 ä¸ºä»€ä¹ˆè¦Session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Cookie"><span class="toc-text">1.2 Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-Cookie%E5%8E%9F%E7%90%86"><span class="toc-text">1.2.1 CookieåŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-Cookie%E4%BD%BF%E7%94%A8"><span class="toc-text">1.2.2 Cookieä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-Session"><span class="toc-text">1.3 Session</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-HttpSession%E5%8E%9F%E7%90%86"><span class="toc-text">1.3.1 HttpSessionåŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-HttpSession%E4%BD%BF%E7%94%A8"><span class="toc-text">1.3.2 HttpSessionä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E4%B8%89%E5%A4%A7%E5%9F%9F%E5%AF%B9%E8%B1%A1"><span class="toc-text">1.4 ä¸‰å¤§åŸŸå¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1-%E5%9F%9F%E5%AF%B9%E8%B1%A1%E8%AF%B4%E6%98%8E"><span class="toc-text">1.4.1 åŸŸå¯¹è±¡è¯´æ˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-%E5%9F%9F%E5%AF%B9%E8%B1%A1%E9%80%9A%E7%94%A8API"><span class="toc-text">1.4.2 åŸŸå¯¹è±¡é€šç”¨API</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-filter"><span class="toc-text">2. filter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-filter%E6%A6%82%E8%BF%B0"><span class="toc-text">2.1 filteræ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-filter%E4%BD%BF%E7%94%A8%E2%80%94%E2%80%94%E8%AE%B0%E5%BD%95%E6%97%A5%E5%BF%97"><span class="toc-text">2.2 filterä½¿ç”¨â€”â€”è®°å½•æ—¥å¿—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-filter%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">2.3 filterç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-FilterChain"><span class="toc-text">2.4 FilterChain</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E9%85%8D%E7%BD%AEfilter"><span class="toc-text">2.4 æ³¨è§£æ–¹å¼é…ç½®filter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-listener"><span class="toc-text">3. listener</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-listener%E6%A6%82%E8%BF%B0"><span class="toc-text">3.1 listeneræ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-listener%E5%85%AD%E4%B8%AA%E4%B8%BB%E8%A6%81%E6%8E%A5%E5%8F%A3"><span class="toc-text">3.2 listenerå…­ä¸ªä¸»è¦æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-application%E5%9F%9F"><span class="toc-text">3.2.1 applicationåŸŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-session%E5%9F%9F"><span class="toc-text">3.2.2 sessionåŸŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-request%E5%9F%9F"><span class="toc-text">3.2.3 requeståŸŸ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-session%E5%9F%9F%E4%B8%A4%E4%B8%AA%E7%89%B9%E6%AE%8Alistener%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-text">3.3 sessionåŸŸä¸¤ä¸ªç‰¹æ®Šlistenerï¼ˆäº†è§£ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-session%E7%BB%91%E5%AE%9Alistener"><span class="toc-text">3.3.1 sessionç»‘å®šlistener</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E9%92%9D%E5%8C%96%E6%B4%BB%E5%8C%96listener"><span class="toc-text">3.3.2 é’åŒ–æ´»åŒ–listener</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%A1%88%E4%BE%8B%E2%80%94%E2%80%94%E6%97%A5%E7%A8%8B%E7%AE%A1%E7%90%86%E7%AC%AC%E4%B8%89%E6%9C%9F"><span class="toc-text">4. æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬ä¸‰æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E8%BF%87%E6%BB%A4%E5%99%A8%E6%8E%A7%E5%88%B6%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C"><span class="toc-text">4.1 è¿‡æ»¤å™¨æ§åˆ¶ç™»å½•æ ¡éªŒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Ajax"><span class="toc-text">5. Ajax</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-Ajax%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">5.1 Ajaxæ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-Ajax%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">5.2 Ajaxçš„ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%A1%88%E4%BE%8B%E2%80%94%E2%80%94%E6%97%A5%E7%A8%8B%E7%AE%A1%E7%90%86%E7%AC%AC%E5%9B%9B%E6%9C%9F"><span class="toc-text">6. æ¡ˆä¾‹â€”â€”æ—¥ç¨‹ç®¡ç†ç¬¬å››æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%8F%90%E4%BA%A4%E8%AF%B7%E6%B1%82%E5%89%8D%E6%A3%80%E9%AA%8C%E7%94%A8%E6%88%B7%E5%90%8D%E5%8D%A0%E7%94%A8"><span class="toc-text">6.1 æäº¤è¯·æ±‚å‰æ£€éªŒç”¨æˆ·åå ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-%E5%89%8D%E7%AB%AFAJAX%E8%AF%B7%E6%B1%82"><span class="toc-text">6.1.1 å‰ç«¯AJAXè¯·æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-%E5%90%8E%E7%AB%AF%E5%A4%84%E7%90%86%E4%B8%9A%E5%8A%A1%E5%B9%B6%E6%9E%84%E5%BB%BAJSON%E5%93%8D%E5%BA%94"><span class="toc-text">6.1.2 åç«¯å¤„ç†ä¸šåŠ¡å¹¶æ„å»ºJSONå“åº”</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/22/Excalidraw/Drawing%202024-11-01%2015.37.37.excalidraw/" title="Drawing 2024-11-01 15.37.37.excalidraw">Drawing 2024-11-01 15.37.37.excalidraw</a><time datetime="2026-02-22T05:56:41.839Z" title="å‘è¡¨äº 2026-02-22 13:56:41">2026-02-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/22/2.Areas%F0%9F%8C%90/01.project/condefather/yupao/back-end/7.%E4%BC%98%E5%8C%96%E4%B8%BB%E9%A1%B5%E6%80%A7%E8%83%BD-%E4%BC%98%E5%8C%96%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/" title="7.ä¼˜åŒ–ä¸»é¡µæ€§èƒ½-ä¼˜åŒ–æ‰¹é‡å¯¼å…¥æ•°æ®">7.ä¼˜åŒ–ä¸»é¡µæ€§èƒ½-ä¼˜åŒ–æ‰¹é‡å¯¼å…¥æ•°æ®</a><time datetime="2026-02-22T05:56:41.257Z" title="å‘è¡¨äº 2026-02-22 13:56:41">2026-02-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/31/2.Areas%F0%9F%8C%90/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/5.%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8/" title="5.å·¥å…·è°ƒç”¨">5.å·¥å…·è°ƒç”¨</a><time datetime="2026-01-31T03:54:22.000Z" title="å‘è¡¨äº 2026-01-31 11:54:22">2026-01-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/30/2.Areas%F0%9F%8C%90/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/4.RAG%E8%BF%9B%E9%98%B6/" title="4.RAGè¿›é˜¶">4.RAGè¿›é˜¶</a><time datetime="2026-01-30T13:23:42.000Z" title="å‘è¡¨äº 2026-01-30 21:23:42">2026-01-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/27/2.Areas%F0%9F%8C%90/%E4%B8%B4%E6%97%B6%E8%AE%B0%E5%BD%95/3.RAG/" title="3.RAG">3.RAG</a><time datetime="2026-01-27T09:06:56.000Z" title="å‘è¡¨äº 2026-01-27 17:06:56">2026-01-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/default.png);"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2026 By yuezi</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>